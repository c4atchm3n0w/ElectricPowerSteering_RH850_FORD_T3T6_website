---
title: FlsMem Integration Manual
linkTitle: FlsMem Integration Manual
weight: 2
---

<p><strong>Integration Manual</strong></p>
<p><strong>For</strong></p>
<p><strong>FlsMem</strong></p>
<p><strong>VERSION: 1</strong></p>
<p><strong>DATE: 11/12/17</strong></p>
<p><strong>Prepared By:</strong></p>
<p><strong>Software Group,</strong></p>
<p><strong>Nexteer Automotive,</strong></p>
<p><strong>Saginaw, MI, USA</strong></p>
<p><strong>Location:</strong> The official version of this document is stored in the Nexteer Configuration Management System.</p>
<p><strong>Revision History</strong></p>
<table>
<colgroup>
<col style="width: 5%" />
<col style="width: 27%" />
<col style="width: 27%" />
<col style="width: 10%" />
<col style="width: 28%" />
</colgroup>
<tbody>
<tr class="odd">
<td><strong>Sl. No.</strong></td>
<td><strong>Description</strong></td>
<td><strong>Author</strong></td>
<td><strong>Version</strong></td>
<td><strong>Date</strong></td>
</tr>
<tr class="even">
<td>1</td>
<td>Initial version</td>
<td>Avinash James</td>
<td>1</td>
<td>11/12/17</td>
</tr>
</tbody>
</table>
<p>Table of Contents</p>
<p><a href="#abbrevations-and-acronyms">1 Abbrevations And Acronyms 4</a></p>
<p><a href="#references">2 References 5</a></p>
<p><a href="#dependencies">3 Dependencies 6</a></p>
<p><a href="#swcs">3.1 SWCs 6</a></p>
<p><a href="#global-functionsnon-rte-to-be-provided-to-integration-project">3.2 Global Functions(Non RTE) to be provided to Integration Project 6</a></p>
<p><a href="#configuration-requirements">4 Configuration REQUIREMeNTS 7</a></p>
<p><a href="#build-time-config">4.1 Build Time Config 7</a></p>
<p><a href="#configuration-files-to-be-provided-by-integration-project">4.2 Configuration Files to be provided by Integration Project 7</a></p>
<p><a href="#da-vinci-parameter-configuration-changes">4.3 Da Vinci Parameter Configuration Changes 7</a></p>
<p><a href="#__RefHeading___Toc477509000">4.4 DaVinci Interrupt Configuration Changes 8</a></p>
<p><a href="#manual-configuration-changes">4.5 Manual Configuration Changes 8</a></p>
<p><a href="#integration-dataflow-requirements">5 Integration DATAFLOW REQUIREMENTS 9</a></p>
<p><a href="#required-global-data-inputs">5.1 Required Global Data Inputs 9</a></p>
<p><a href="#required-global-data-outputs">5.2 Required Global Data Outputs 9</a></p>
<p><a href="#specific-include-path-present">5.3 Specific Include Path present 9</a></p>
<p><a href="#runnable-scheduling">6 Runnable Scheduling 10</a></p>
<p><a href="#memory-map-requirements">7 Memory Map REQUIREMENTS 11</a></p>
<p><a href="#mapping">7.1 Mapping 11</a></p>
<p><a href="#usage">7.2 Usage 11</a></p>
<p><a href="#nvm-blocks">7.3 NvM Blocks 11</a></p>
<p><a href="#compiler-settings">8 Compiler Settings 12</a></p>
<p><a href="#preprocessor-macro">8.1 Preprocessor MACRO 12</a></p>
<p><a href="#optimization-settings">8.2 Optimization Settings 12</a></p>
<p><a href="#appendix">9 Appendix 13</a></p>
<h1 id="abbrevations-and-acronyms">Abbrevations And Acronyms</h1>
<table>
<colgroup>
<col style="width: 28%" />
<col style="width: 71%" />
</colgroup>
<tbody>
<tr class="odd">
<td><strong>Abbreviation</strong></td>
<td><strong>Description</strong></td>
</tr>
<tr class="even">
<td>DFD</td>
<td>Design functional diagram</td>
</tr>
<tr class="odd">
<td>MDD</td>
<td>Module design Document</td>
</tr>
<tr class="even">
<td>FDD</td>
<td>Functional Design Document</td>
</tr>
<tr class="odd">
<td>CCT</td>
<td>Common Checksum Tool</td>
</tr>
<tr class="even">
<td></td>
<td></td>
</tr>
</tbody>
</table>
<h1 id="references">References</h1>
<p>This section lists the title &amp; version of all the documents that are referred for development of this document</p>
<table>
<colgroup>
<col style="width: 11%" />
<col style="width: 65%" />
<col style="width: 22%" />
</colgroup>
<tbody>
<tr class="odd">
<td><strong>Sr. No.</strong></td>
<td><strong>Title</strong></td>
<td><strong>Version</strong></td>
</tr>
<tr class="even">
<td>1</td>
<td>FDD – CM102B FlsMem</td>
<td>See Synergy subproject version</td>
</tr>
<tr class="odd">
<td>2</td>
<td>Software Naming Conventions</td>
<td>Process 04.04.02</td>
</tr>
<tr class="even">
<td>3</td>
<td>Software Coding Standards</td>
<td>Process 04.04.02</td>
</tr>
<tr class="odd">
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<h1 id="dependencies">Dependencies</h1>
<h2 id="swcs">SWCs</h2>
<table>
<colgroup>
<col style="width: 30%" />
<col style="width: 69%" />
</colgroup>
<tbody>
<tr class="odd">
<td><strong>Module</strong></td>
<td><strong>Required Feature</strong></td>
</tr>
<tr class="even">
<td><strong>AR202A MicroCtrlrSuprt</strong></td>
<td>NxtrMcuSuprtLib functions and register definitions</td>
</tr>
<tr class="odd">
<td><strong>CM800A SyncCrc</strong></td>
<td>CRC HW Module Configuration and Allocation</td>
</tr>
</tbody>
</table>
<p>Note : Referencing the external components should be avoided in most cases. Only in unavoidable circumstance external components should be referred. Developer should track the references.</p>
<h2 id="global-functionsnon-rte-to-be-provided-to-integration-project">Global Functions(Non RTE) to be provided to Integration Project</h2>
<p>DtsInin - To be defined as a trusted function as the DTS Channel master registers need to be configured in the supervisor mode.</p>
<p>DtsClnUp - To be defined as a trusted function as the DTS registers are being re-configured in the supervisor mode to avoid access protection violation</p>
<p>CodFlsSngBitEcc – Single bit code flash ECC error handler call back function provided to the MCAL driver</p>
<h1 id="configuration-requirements">Configuration REQUIREMeNTS</h1>
<h2 id="build-time-config">Build Time Config</h2>
<table style="width:100%;">
<colgroup>
<col style="width: 36%" />
<col style="width: 53%" />
<col style="width: 9%" />
</colgroup>
<tbody>
<tr class="odd">
<td><strong>Modules</strong></td>
<td><strong>Notes</strong></td>
<td></td>
</tr>
<tr class="even">
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<h2 id="configuration-files-to-be-provided-by-integration-project">Configuration Files to be provided by Integration Project</h2>
<p>CDD_FlsMem_Cfg.c</p>
<p>CDD_FlsMem_Cfg_private.h</p>
<h2 id="da-vinci-parameter-configuration-changes">Da Vinci Parameter Configuration Changes</h2>
<table>
<colgroup>
<col style="width: 30%" />
<col style="width: 44%" />
<col style="width: 24%" />
</colgroup>
<tbody>
<tr class="odd">
<td><strong>Parameter</strong></td>
<td><strong>Notes</strong></td>
<td><strong>SWC</strong></td>
</tr>
<tr class="even">
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>/Nexteer/FlsMem/FlashCRCRegnConfig/ StartAddress</td>
<td><p>Configured with “FlashCRCRegnConfig”</p>
<p>Each Flash region(for eg:- Boot, App, Cal1) has a start address where the code resides on the flash</p></td>
<td>FlsMem</td>
</tr>
<tr class="even">
<td>/Nexteer/FlsMem/FlashCRCRegnConfig/Length</td>
<td><p>Configured with “FlashCRCRegnConfig”</p>
<p>Each Flash region has a length defined for the region</p></td>
<td>FlsMem</td>
</tr>
<tr class="odd">
<td>/Nexteer/FlsMem/FlashCRCRegnConfig/PredefinedCrcAddress</td>
<td><p>Configured with “FlashCRCRegnConfig”</p>
<p>Each Flash region has a PredefinedCrcAddress defined for the region which is used by the CCT tool for storing the checksum on the flash and serves as the reference location to retrieve the pre calculated CRC and do a comparison with calculated CRC</p></td>
<td>FlsMem</td>
</tr>
<tr class="even">
<td>/Nexteer/FlsMem/FlashCRCRegnConfig/LengthSymbol</td>
<td><p>Configured with “FlashCRCRegnConfig”</p>
<p>Each Flash region has a length defined for the region and accepts linker symbols</p></td>
<td>FlsMem</td>
</tr>
<tr class="odd">
<td>/Nexteer/FlsMem/FlashCRCRegnConfig/PredefinedCrcAddressSymbol</td>
<td><p>Configured with “FlashCRCRegnConfig”</p>
<p>Each Flash region has a PredefinedCrcAddress defined for the region which is used by the CCT tool for storing the checksum on the flash and serves as the reference location to retrieve the pre calculated CRC and do a comparison with calculated CRC and accepts linker symbols</p></td>
<td>FlsMem</td>
</tr>
<tr class="even">
<td>/Nexteer/FlsMem/FlashCRCRegnConfig/StartingAddressSymbol</td>
<td><p>Configured with “FlashCRCRegnConfig”</p>
<p>Each Flash region(for eg:- Boot, App, Cal1) has a start address where the code resides on the flash and accepts linker symbol</p></td>
<td>FlsMem</td>
</tr>
<tr class="odd">
<td>/Nexteer/FlsMem/FlashCRCRegnConfig/UseSymbolName</td>
<td>Configured with “FlashCRCRegnConfig” to select either the symbol names or the actual values</td>
<td>FlsMem</td>
</tr>
<tr class="even">
<td><p>/Renesas/EcucDefs_Mcu/Mcu/McuModuleConfiguration</p>
<p>/McuEcmErrorSourcesCfg/McuEcmErrorSource36</p></td>
<td>Call back function name is “CodFlsSngBitEcc”. Refer the CM104A Integration manual for the configuration of the error source. (Type of the error, classification of the error eg FENMI or EI information) .</td>
<td></td>
</tr>
<tr class="odd">
<td>/Nexteer/FlsMem/ApplCRCRegnIdx/ApplCrcRegnNr</td>
<td>The array Index for the application region CRC region definition</td>
<td>FlsMem</td>
</tr>
</tbody>
</table>
<h2 id="davinci-interrupt-configuration-changes">DaVinci Interrupt Configuration Changes</h2>
<table>
<colgroup>
<col style="width: 16%" />
<col style="width: 9%" />
<col style="width: 38%" />
<col style="width: 34%" />
</colgroup>
<tbody>
<tr class="odd">
<td><strong>ISR Name</strong></td>
<td><strong>VIM #</strong></td>
<td><strong>Priority Dependency</strong></td>
<td><strong>Notes</strong></td>
</tr>
<tr class="even">
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<h2 id="manual-configuration-changes">Manual Configuration Changes</h2>
<table>
<colgroup>
<col style="width: 39%" />
<col style="width: 47%" />
<col style="width: 12%" />
</colgroup>
<tbody>
<tr class="odd">
<td><strong>Constant</strong></td>
<td><strong>Notes</strong></td>
<td><strong>SWC</strong></td>
</tr>
<tr class="even">
<td><strong>None</strong></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<h1 id="integration-dataflow-requirements">Integration DATAFLOW REQUIREMENTS</h1>
<h2 id="required-global-data-inputs">Required Global Data Inputs</h2>
<p>None</p>
<h2 id="required-global-data-outputs">Required Global Data Outputs</h2>
<p>None</p>
<h2 id="specific-include-path-present">Specific Include Path present</h2>
<p>Yes</p>
<h1 id="runnable-scheduling">Runnable Scheduling </h1>
<p>This section specifies the required runnable scheduling.</p>
<table style="width:100%;">
<colgroup>
<col style="width: 25%" />
<col style="width: 54%" />
<col style="width: 20%" />
</colgroup>
<tbody>
<tr class="odd">
<td><strong>Init</strong></td>
<td><strong>Scheduling Requirements</strong></td>
<td><strong>Trigger</strong></td>
</tr>
<tr class="even">
<td><strong>FlsMemInit1</strong></td>
<td>None</td>
<td>Once At Init (RTE)</td>
</tr>
<tr class="odd">
<td><strong>FlsMemInit2</strong></td>
<td>Non-RTE Init, Called in Startup Sequence*</td>
<td>Function call in Startup Sequence</td>
</tr>
</tbody>
</table>
<table style="width:100%;">
<colgroup>
<col style="width: 25%" />
<col style="width: 54%" />
<col style="width: 20%" />
</colgroup>
<tbody>
<tr class="odd">
<td><strong>Runnable</strong></td>
<td><strong>Scheduling Requirements</strong></td>
<td><strong>Trigger</strong></td>
</tr>
<tr class="even">
<td><strong>FlsMemPer1</strong></td>
<td>None</td>
<td>100ms(RTE)</td>
</tr>
</tbody>
</table>
<p>*“FlsMemInit2” shall schedule after OS Start – Refer CM100 Start up sequence.</p>
<p>PEG shall be configured before “FlsMemInit2”.</p>
<p>CrcHw Init shall be scheduled before “FlsMemInit2”.</p>
<p><strong>FlsMemInit1 should be called before DiagcMgrInit1</strong></p>
<h1 id="memory-map-requirements">Memory Map REQUIREMENTS</h1>
<h2 id="mapping">Mapping</h2>
<table>
<colgroup>
<col style="width: 46%" />
<col style="width: 16%" />
<col style="width: 36%" />
</colgroup>
<tbody>
<tr class="odd">
<td><strong>Memory Section</strong></td>
<td><strong>Contents</strong></td>
<td><strong>Notes</strong></td>
</tr>
<tr class="even">
<td><strong>CDD_FlsMem_START_SEC_CODE</strong></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td><strong>CDD_FlsMem_START_SEC_CONST_UNSPECIFIED</strong></td>
<td></td>
<td>Constant section for constant variable</td>
</tr>
<tr class="even">
<td><strong>CDD_FlsMemNonRte_START_SEC_VAR_INIT_128</strong></td>
<td>Data that a DMA channel writes to during CRC test</td>
<td><p>This gets mapped to a “.data_dma_128” section and/or a “.sdata_dma_128” section (depending on compiler settings) that will need to be explicitly added to the linker file. The intent of these sections is to be placed in a RAM memory section that only the DMA has write access to (processor in user mode only has read access).</p>
<p>Additionally, since these are initialized data sections, the appropriate ROM sections will need to be added to the linker to allow initial values to be copied from Flash to RAM during startup for these sections.</p>
<p>e.g.:</p>
<p><em>.ROM_data_dma_128 ROM(.data_dma_128) FILL(0xFF) :{}&gt;.</em></p>
<p>and</p>
<p><em>.ROM_sdata_dma_128 ROM(.sdata_dma_128) FILL(0xFF) :{}&gt;.</em></p></td>
</tr>
</tbody>
</table>
<p>* Each …START_SEC… constant is terminated by a …STOP_SEC… constant as specified in the AUTOSAR Memory Mapping requirements.</p>
<h2 id="usage">Usage</h2>
<table>
<colgroup>
<col style="width: 55%" />
<col style="width: 23%" />
<col style="width: 21%" />
</colgroup>
<tbody>
<tr class="odd">
<td><strong>Feature</strong></td>
<td><strong>RAM</strong></td>
<td><strong>ROM</strong></td>
</tr>
<tr class="even">
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p>Table 1: ARM Cortex R4 Memory Usage</p>
<h2 id="nvm-blocks">NvM Blocks</h2>
<p>None</p>
<h1 id="compiler-settings">Compiler Settings</h1>
<h2 id="preprocessor-macro"> Preprocessor MACRO</h2>
<p>None</p>
<h2 id="optimization-settings">Optimization Settings</h2>
<p>None</p>
<h1 id="appendix">Appendix</h1>
