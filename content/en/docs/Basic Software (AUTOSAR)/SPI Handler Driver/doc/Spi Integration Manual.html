---
title: Spi Integration Manual
linkTitle: Spi Integration Manual
weight: 10
---

<p><strong>Integration Manual</strong></p>
<p><strong>For</strong></p>
<p><strong>Spi</strong></p>
<p><strong>VERSION: 1</strong></p>
<p><strong>DATE: 07/09/17</strong></p>
<p><strong>Prepared By:</strong></p>
<p><strong>Software Group,</strong></p>
<p><strong>Nexteer Automotive,</strong></p>
<p><strong>Saginaw, MI, USA</strong></p>
<p><strong>Location:</strong> The official version of this document is stored in the Nexteer Configuration Management System.</p>
<p><strong>Revision History</strong></p>
<table>
<colgroup>
<col style="width: 5%" />
<col style="width: 27%" />
<col style="width: 27%" />
<col style="width: 10%" />
<col style="width: 28%" />
</colgroup>
<tbody>
<tr class="odd">
<td><strong>Sl. No.</strong></td>
<td><strong>Description</strong></td>
<td><strong>Author</strong></td>
<td><strong>Version</strong></td>
<td><strong>Date</strong></td>
</tr>
<tr class="even">
<td>1</td>
<td>Initial version</td>
<td>Lucas Wendling</td>
<td>1</td>
<td>07/09/17</td>
</tr>
</tbody>
</table>
<p>Table of Contents</p>
<p><a href="#abbrevations-and-acronyms">1 Abbrevations And Acronyms 4</a></p>
<p><a href="#references">2 References 5</a></p>
<p><a href="#dependencies">3 Dependencies 6</a></p>
<p><a href="#swcs">3.1 SWCs 6</a></p>
<p><a href="#global-functionsnon-rte-to-be-provided-to-integration-project">3.2 Global Functions(Non RTE) to be provided to Integration Project 6</a></p>
<p><a href="#configuration-requirements">4 Configuration REQUIREMeNTS 7</a></p>
<p><a href="#build-time-config">4.1 Build Time Config 7</a></p>
<p><a href="#configuration-files-to-be-provided-by-integration-project">4.2 Configuration Files to be provided by Integration Project 7</a></p>
<p><a href="#da-vinci-parameter-configuration-changes">4.3 Da Vinci Parameter Configuration Changes 7</a></p>
<p><a href="#__RefHeading___Toc389222325">4.4 DaVinci Interrupt Configuration Changes 7</a></p>
<p><a href="#manual-configuration-changes">4.5 Manual Configuration Changes 7</a></p>
<p><a href="#integration-dataflow-requirements">5 Integration DATAFLOW REQUIREMENTS 8</a></p>
<p><a href="#required-global-data-inputs">5.1 Required Global Data Inputs 8</a></p>
<p><a href="#required-global-data-outputs">5.2 Required Global Data Outputs 8</a></p>
<p><a href="#specific-include-path-present">5.3 Specific Include Path present 8</a></p>
<p><a href="#runnable-scheduling">6 Runnable Scheduling 9</a></p>
<p><a href="#memory-map-requirements">7 Memory Map REQUIREMENTS 10</a></p>
<p><a href="#mapping">7.1 Mapping 10</a></p>
<p><a href="#usage">7.2 Usage 10</a></p>
<p><a href="#nvm-blocks">7.3 Non RTE NvM Blocks 10</a></p>
<p><a href="#__RefHeading___Toc389222336">7.4 RTE NvM Blocks 10</a></p>
<p><a href="#compiler-settings">8 Compiler Settings 11</a></p>
<p><a href="#preprocessor-macro">8.1 Preprocessor MACRO 11</a></p>
<p><a href="#optimization-settings">8.2 Optimization Settings 11</a></p>
<p><a href="#appendix">9 Appendix 12</a></p>
<h1 id="abbrevations-and-acronyms">Abbrevations And Acronyms</h1>
<table>
<colgroup>
<col style="width: 28%" />
<col style="width: 71%" />
</colgroup>
<tbody>
<tr class="odd">
<td><strong>Abbreviation</strong></td>
<td><strong>Description</strong></td>
</tr>
<tr class="even">
<td></td>
<td></td>
</tr>
<tr class="odd">
<td></td>
<td></td>
</tr>
<tr class="even">
<td></td>
<td></td>
</tr>
</tbody>
</table>
<h1 id="references">References</h1>
<p>This section lists the title &amp; version of all the documents that are referred for development of this document</p>
<table>
<colgroup>
<col style="width: 11%" />
<col style="width: 65%" />
<col style="width: 22%" />
</colgroup>
<tbody>
<tr class="odd">
<td><strong>Sr. No.</strong></td>
<td><strong>Title</strong></td>
<td><strong>Version</strong></td>
</tr>
<tr class="even">
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<h1 id="dependencies">Dependencies</h1>
<p>This component relies on installation of the Renesas MCAL CodeGenerator utilitiy. Currently, this utility is required to be installed on the integrator’s component and this component assumes this utility is installed in the default installation directory. This places the executable in the “C:\Renesas\CodeGenerator\code_generator\MCALGenerator.exe” directory. This component requires version “2.06.03” of the MCAL Code Generator.</p>
<h2 id="swcs">SWCs</h2>
<table>
<colgroup>
<col style="width: 30%" />
<col style="width: 69%" />
</colgroup>
<tbody>
<tr class="odd">
<td><strong>Module</strong></td>
<td><strong>Required Feature</strong></td>
</tr>
<tr class="even">
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p>Note : Referencing the external components should be avoided in most cases. Only in unavoidable circumstance external components should be referred. Developer should track the references.</p>
<h2 id="global-functionsnon-rte-to-be-provided-to-integration-project">Global Functions(Non RTE) to be provided to Integration Project</h2>
<p>API usage and scheduling of BSW components expected to be captured at a project architectural level and is beyond the scope of this document. Third party documentation can be referenced as needed.</p>
<h1 id="configuration-requirements">Configuration REQUIREMeNTS</h1>
<p>Configuration of BSW components expected to be captured at a project architectural level and is beyond the scope of this document. Third party documentation can be referenced as needed.</p>
<h2 id="build-time-config">Build Time Config</h2>
<table style="width:100%;">
<colgroup>
<col style="width: 36%" />
<col style="width: 53%" />
<col style="width: 9%" />
</colgroup>
<tbody>
<tr class="odd">
<td><strong>Modules</strong></td>
<td><strong>Notes</strong></td>
<td></td>
</tr>
<tr class="even">
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<h2 id="configuration-files-to-be-provided-by-integration-project">Configuration Files to be provided by Integration Project</h2>
<p>N/A</p>
<h2 id="da-vinci-parameter-configuration-changes">Da Vinci Parameter Configuration Changes</h2>
<table>
<colgroup>
<col style="width: 39%" />
<col style="width: 47%" />
<col style="width: 12%" />
</colgroup>
<tbody>
<tr class="odd">
<td><strong>Parameter</strong></td>
<td><strong>Notes</strong></td>
<td><strong>SWC</strong></td>
</tr>
<tr class="even">
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<h2 id="davinci-interrupt-configuration-changes">DaVinci Interrupt Configuration Changes</h2>
<table>
<colgroup>
<col style="width: 39%" />
<col style="width: 60%" />
</colgroup>
<tbody>
<tr class="odd">
<td><strong>ISR Name</strong></td>
<td><strong>Notes</strong></td>
</tr>
<tr class="even">
<td></td>
<td></td>
</tr>
</tbody>
</table>
<h2 id="manual-configuration-changes">Manual Configuration Changes</h2>
<table>
<colgroup>
<col style="width: 39%" />
<col style="width: 47%" />
<col style="width: 12%" />
</colgroup>
<tbody>
<tr class="odd">
<td><strong>Constant</strong></td>
<td><strong>Notes</strong></td>
<td><strong>SWC</strong></td>
</tr>
<tr class="even">
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<h1 id="integration-dataflow-requirements">Integration DATAFLOW REQUIREMENTS</h1>
<h2 id="required-global-data-inputs">Required Global Data Inputs</h2>
<h2 id="required-global-data-outputs">Required Global Data Outputs</h2>
<h2 id="specific-include-path-present">Specific Include Path present</h2>
<p>Yes</p>
<h1 id="runnable-scheduling">Runnable Scheduling </h1>
<p>API usage and scheduling of BSW components expected to be captured at a project architectural level and is beyond the scope of this document. Third party documentation can be referenced as needed.</p>
<table style="width:100%;">
<colgroup>
<col style="width: 25%" />
<col style="width: 54%" />
<col style="width: 20%" />
</colgroup>
<tbody>
<tr class="odd">
<td><strong>Init</strong></td>
<td><strong>Scheduling Requirements</strong></td>
<td><strong>Trigger</strong></td>
</tr>
<tr class="even">
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<table style="width:100%;">
<colgroup>
<col style="width: 25%" />
<col style="width: 54%" />
<col style="width: 20%" />
</colgroup>
<tbody>
<tr class="odd">
<td><strong>Runnable</strong></td>
<td><strong>Scheduling Requirements</strong></td>
<td><strong>Trigger</strong></td>
</tr>
<tr class="even">
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p><strong>.</strong></p>
<h1 id="memory-map-requirements">Memory Map REQUIREMENTS</h1>
<h2 id="mapping">Mapping</h2>
<table>
<colgroup>
<col style="width: 45%" />
<col style="width: 26%" />
<col style="width: 28%" />
</colgroup>
<tbody>
<tr class="odd">
<td><strong>Memory Section</strong></td>
<td><strong>Contents</strong></td>
<td><strong>Notes</strong></td>
</tr>
<tr class="even">
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p>* Each …START_SEC… constant is terminated by a …STOP_SEC… constant as specified in the AUTOSAR Memory Mapping requirements.</p>
<h2 id="usage">Usage</h2>
<table>
<colgroup>
<col style="width: 55%" />
<col style="width: 23%" />
<col style="width: 21%" />
</colgroup>
<tbody>
<tr class="odd">
<td><strong>Feature</strong></td>
<td><strong>RAM</strong></td>
<td><strong>ROM</strong></td>
</tr>
<tr class="even">
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<h2 id="nvm-blocks">NvM Blocks</h2>
<h1 id="compiler-settings">Compiler Settings</h1>
<p>The MCAL related files require specific compiler toolchain settings to be used to match what the MCAL was developed and tested to. This is the following:</p>
<p>-c -Osize -g -cpu=rh850g3m -gsize -prepare_dispose -inline_prologue -sda=all -Wundef -no_callt -reserve_r2 --short_enum --prototype_errors --diag_error 193 -dual_debug -large_sda --no_commons -shorten_loads -shorten_moves -Wshadow -nofloatio -ignore_callt_state_in_interrupts -delete</p>
<p>This component’s .gpj file has been adapted to provide these options for the static files of this component. <strong>NOTE: The dynamic, generated files from this component need to be compiled with these options as well, and therefore the integration project will need to be adapted to provide these settings to the generated files in the integration project.</strong></p>
<p>The following snippet can be adapted/added to the a batch file which creates the generate.gpj project for integration project usage:</p>
<blockquote>
<p><em>for %%F in (../generate/<strong><mark>&lt;MCAL_Component&gt;</mark></strong>/*.c) do (</em></p>
<p><em>ECHO ..\generate\<strong><mark>&lt;MCAL_Component&gt;</mark></strong>\%%F &gt;&gt; generate.gpj</em></p>
<p><em>ECHO # MCAL BUILD OPTIONS # &gt;&gt; generate.gpj</em></p>
<p><em>ECHO -c &gt;&gt; generate.gpj</em></p>
<p><em>ECHO -Osize &gt;&gt; generate.gpj</em></p>
<p><em>ECHO -g &gt;&gt; generate.gpj</em></p>
<p><em>ECHO -cpu=rh850g3m &gt;&gt; generate.gpj</em></p>
<p><em>ECHO -gsize &gt;&gt; generate.gpj</em></p>
<p><em>ECHO -prepare_dispose &gt;&gt; generate.gpj</em></p>
<p><em>ECHO -inline_prologue &gt;&gt; generate.gpj</em></p>
<p><em>ECHO -sda=all &gt;&gt; generate.gpj</em></p>
<p><em>ECHO -Wundef &gt;&gt; generate.gpj</em></p>
<p><em>ECHO -no_callt &gt;&gt; generate.gpj</em></p>
<p><em>ECHO -reserve_r2 &gt;&gt; generate.gpj</em></p>
<p><em>ECHO --short_enum &gt;&gt; generate.gpj</em></p>
<p><em>ECHO --prototype_errors &gt;&gt; generate.gpj</em></p>
<p><em>ECHO --diag_error 193 &gt;&gt; generate.gpj</em></p>
<p><em>ECHO -dual_debug &gt;&gt; generate.gpj</em></p>
<p><em>ECHO -large_sda &gt;&gt; generate.gpj</em></p>
<p><em>ECHO --no_commons &gt;&gt; generate.gpj</em></p>
<p><em>ECHO -shorten_loads &gt;&gt; generate.gpj</em></p>
<p><em>ECHO -shorten_moves &gt;&gt; generate.gpj</em></p>
<p><em>ECHO -Wshadow &gt;&gt; generate.gpj</em></p>
<p><em>ECHO -nofloatio &gt;&gt; generate.gpj</em></p>
<p><em>ECHO -ignore_callt_state_in_interrupts &gt;&gt; generate.gpj</em></p>
<p><em>ECHO -delete &gt;&gt; generate.gpj</em></p>
<p><em>)</em></p>
</blockquote>
<h2 id="preprocessor-macro"> Preprocessor MACRO</h2>
<h2 id="optimization-settings">Optimization Settings</h2>
<h1 id="appendix">Appendix</h1>
<p><em>&lt;This section is for appendix&gt;</em></p>
