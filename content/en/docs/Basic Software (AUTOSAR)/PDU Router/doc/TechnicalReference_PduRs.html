---
title: TechnicalReference_PduRs
linkTitle: TechnicalReference_PduRs
weight: 6
---

<!DOCTYPE html><html>
<head>
<title></title>
<style type="text/css">
<!--
.xflip {
    -moz-transform: scaleX(-1);
    -webkit-transform: scaleX(-1);
    -o-transform: scaleX(-1);
    transform: scaleX(-1);
    filter: fliph;
}
.yflip {
    -moz-transform: scaleY(-1);
    -webkit-transform: scaleY(-1);
    -o-transform: scaleY(-1);
    transform: scaleY(-1);
    filter: flipv;
}
.xyflip {
    -moz-transform: scaleX(-1) scaleY(-1);
    -webkit-transform: scaleX(-1) scaleY(-1);
    -o-transform: scaleX(-1) scaleY(-1);
    transform: scaleX(-1) scaleY(-1);
    filter: fliph + flipv;
}
-->
</style>
</head>
<body>
<a name=1></a><img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/PduR/doc/TechnicalReference_PduR-1_1.png"/><br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>&#160;<br/>&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/><b>MICROSAR PDU Router&#160;<br/></b>Technical Reference&#160;<br/>&#160;<br/>DaVinci&#160;Configurator&#160;<br/>Version&#160;3.00.00&#160;<br/>&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>
Authors&#160;<br/>
Erich Schondelmaier,&#160;Gunnar&#160;Meiss,&#160;Sebastian&#160;<br/>Waldvogel,&#160;Florian&#160;Röhm&#160;<br/>
Status&#160;<br/>
Released&#160;<br/>
&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>
&#160;<br/>
&#160;<br/>
<hr/>
<a name=2></a><img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/PduR/doc/TechnicalReference_PduR-2_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;PDU&#160;Router&#160;<br/>
<b>Document&#160;Information&#160;</b><br/>
<b>History&#160;</b><br/>
<b>Author&#160;</b><br/>
<b>Date&#160;</b><br/>
<b>Version&#160;</b><br/>
<b>Remarks&#160;</b><br/>
Erich Schondelmaier&#160;&#160;2012-12-20&#160;&#160;<br/>
1.00.00&#160;<br/>
Initial&#160;version based&#160;on&#160;PduR&#160;Technical&#160;<br/>Reference&#160;&#160;<br/>
Erich Schondelmaier&#160;&#160;2012-07-12&#160;<br/>
2.00.00&#160;<br/>
Adapted&#160;to&#160;AUTOSAR&#160;4.0.3&#160;&#160;<br/>
Erich&#160;Schondelmaier&#160;&#160;2012-10-15&#160;<br/>
2.01.00&#160;<br/>
TP&#160;Gateway&#160;<br/>IF&#160;Gateway&#160;<br/>
Gunnar&#160;Meiss&#160;<br/>
2012-11-21&#160;<br/>
2.02.00&#160;<br/>
AR4-285:&#160;Support&#160;PduRRoutingPathGroups&#160;<br/>
Erich Schondelmaier&#160;&#160;2013-02-07&#160;<br/>
2.02.01&#160;<br/>
Adapted&#160;Tp-&#160;API&#160;description&#160;<br/>
Erich Schondelmaier&#160;&#160;2013-02-15&#160;<br/>
2.02.02&#160;<br/>
Added&#160;some&#160;ASR&#160;deviations&#160;&#160;<br/>ESCAN00064126&#160;<br/>
Erich Schondelmaier&#160;&#160;2013-03-19&#160;<br/>
2.03.00&#160;<br/>
ESCAN00064364&#160;AR4-325:&#160;Post-Build&#160;<br/>Loadable&#160;&#160;<br/>Added&#160;Cancel-&#160;Receive/&#160;Transmit&#160;Support&#160;&#160;<br/>
Erich Schondelmaier&#160;&#160;2014-04-15&#160;<br/>
2.04.00&#160;<br/>
Added&#160;TP&#160;routing&#160;with variable addresses&#160;<br/>(MetaData&#160;Handling)&#160;<br/>Added&#160;Threshold “0”&#160;support&#160;<br/>
Erich Schondelmaier&#160;&#160;2014-04-15&#160;<br/>
2.04.01&#160;<br/>
Support&#160;&#160;the&#160;&#160;StartOfReception&#160;&#160;API&#160;&#160;(with&#160;&#160;the&#160;<br/>PduInfoType),&#160;&#160;<br/>TxConfirmation&#160;&#160;and&#160;&#160;RxIndication&#160;&#160;according&#160;<br/>ASR4.1.2&#160;<br/>
Erich Schondelmaier&#160;&#160;2014-09-01&#160;<br/>
2.05.00&#160;<br/>
Added&#160;SecOC&#160;to&#160;the&#160;Interface&#160;Overview&#160;<br/>Extended&#160;&#160;Tp&#160;&#160;Gateway&#160;&#160;Routing&#160;&#160;behavior&#160;<br/>description&#160;<br/>Updated&#160;Configuration&#160;Variant&#160;<br/>
Sebastian&#160;Waldvogel&#160;&#160;2015-02-23&#160;<br/>
2.06.00&#160;<br/>
FEAT-1057:&#160;&#160;Added&#160;&#160;documentation&#160;&#160;about&#160;<br/>configuration&#160;&#160;of&#160;&#160;range&#160;&#160;routing&#160;&#160;paths&#160;&#160;and&#160;<br/>functional&#160;requests&#160;gateway&#160;<br/>
Sebastian&#160;Waldvogel&#160;&#160;2015-05-11&#160;<br/>
2.06.01&#160;<br/>
FEAT-1057:&#160;Improvements&#160;of&#160;documentation&#160;<br/>
Florian Röhm&#160;<br/>
2015-07-30&#160;<br/>
2.07.00&#160;<br/>
FEAT-109:&#160;&#160;Added&#160;&#160;documentation&#160;&#160;for&#160;&#160;PduR&#160;<br/>switching&#160;feature&#160;and N:1 routing&#160;paths&#160;<br/>
Florian Röhm&#160;<br/>
2016-01-16&#160;<br/>
2.08.00&#160;<br/>
FEAT-1485:&#160;&#160;Added&#160;&#160;documentation&#160;&#160;for&#160;&#160;1:N&#160;<br/>and N:1&#160;transport&#160;protocol&#160;routing&#160;paths&#160;<br/>
Gunnar&#160;Meiss&#160;<br/>
2016-02-25&#160;<br/>
2.08.00&#160;<br/>
FEAT-1631:&#160;&#160;Trigger&#160;&#160;Transmit&#160;&#160;API&#160;&#160;with&#160;<br/>SduLength&#160;In/Out&#160;according&#160;to&#160;ASR4.2.2&#160;<br/>
Erich Schondelmaier&#160;&#160;2016-03-17&#160;<br/>
2.08.00&#160;<br/>
added limitation:&#160;<br/>-&#160;&#160;The&#160;&#160;Polling&#160;&#160;Mode&#160;&#160;cannot&#160;&#160;be&#160;&#160;used&#160;&#160;for&#160;&#160;N:1&#160;<br/>routings.&#160;<br/>-&#160;&#160;Cancel&#160;&#160;Transmit&#160;&#160;for&#160;&#160;N:1&#160;&#160;routing&#160;&#160;paths&#160;&#160;is&#160;<br/>only&#160;&#160;supported&#160;&#160;if&#160;&#160;a&#160;&#160;Tx&#160;&#160;Confirmation&#160;&#160;is&#160;<br/>enabled.&#160;<br/>-&#160;&#160;Removed&#160;&#160;limitation:&#160;&#160;N:1&#160;&#160;interface&#160;&#160;routing&#160;<br/>paths suppport&#160;only&#160;for&#160;lower&#160;layer&#160;CanIf.&#160;&#160;&#160;<br/>
©&#160;2017&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;3.00.00&#160;<br/>
2&#160;<br/>
based&#160;on&#160;template&#160;version&#160;4.9.2&#160;<br/>
<hr/>
<a name=3></a><img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/PduR/doc/TechnicalReference_PduR-3_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;PDU&#160;Router&#160;<br/>
Florian Röhm&#160;<br/>
2016-04-01&#160;<br/>
2.08.01&#160;<br/>
Removed&#160;empty&#160;chapters&#160;<br/>
Erich Schondelmaier,&#160;&#160;2016-08-10&#160;<br/>
3.00.00&#160;<br/>
Shared/Dedicated&#160;Buffer&#160;support&#160;<br/>
Florian Röhm&#160;<br/>
Memory&#160;mapping&#160;extension&#160;<br/>
Sebastian&#160;Waldvogel&#160;&#160;2016-11-24&#160;<br/>
3.00.00&#160;<br/>
Smart&#160;Learning&#160;(Switching)&#160;<br/>
©&#160;2017&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;3.00.00&#160;<br/>
3&#160;<br/>
based&#160;on&#160;template&#160;version&#160;4.9.2&#160;<br/>
<hr/>
<a name=4></a><img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/PduR/doc/TechnicalReference_PduR-4_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/PduR/doc/TechnicalReference_PduR-4_2.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;PDU&#160;Router&#160;<br/>
<b>Reference&#160;Documents&#160;</b><br/>
<b>No.&#160;</b><br/>
<b>Source&#160;</b><br/>
<b>Title&#160;</b><br/>
<b>Version&#160;</b><br/>
[1]&#160;&#160;&#160;AUTOSAR&#160;<br/>
AUTOSAR_SWS_PDURouter.pdf&#160;<br/>
4.0.3&#160;<br/>
[2]&#160;&#160;&#160;AUTOSAR&#160;<br/>
AUTOSAR_SWS_PDURouter.pdf.&#160;<br/>
4.1.1&#160;<br/>
[3]&#160;&#160;&#160;AUTOSAR&#160;<br/>
AUTOSAR_SWS_PDURouter.pdf&#160;<br/>
4.1.2&#160;<br/>
[4]&#160;&#160;&#160;AUTOSAR&#160;<br/>
AUTOSAR_SWS_DevelopmentErrorTracer.pdf&#160;<br/>
3.2.0&#160;<br/>
[5]&#160;&#160;&#160;AUTOSAR&#160;<br/>
AUTOSAR_TR_BSWModuleList.pdf&#160;<br/>
1.6.0&#160;<br/>
[6]&#160;&#160;&#160;AUTOSAR&#160;<br/>
AUTOSAR_SWS_SAEJ1939TransportLayer.pdf&#160;<br/>
1.5.0&#160;<br/>
[7]&#160;&#160;&#160;Vector&#160;<br/>
TechnicalReference_CanIf.pdf&#160;<br/>
6.02.00&#160;<br/>
[8]&#160;&#160;&#160;Vector&#160;<br/>
TechnicalReference_&lt;CAN&#160;Driver&gt;.pdf&#160;<br/>
-&#160;<br/>
[9]&#160;&#160;&#160;AUTOSAR&#160;<br/>
TechnicalReference_CanTp.pdf&#160;<br/>
2.00.00&#160;<br/>
&#160;<br/>
This technical reference&#160;describes the&#160;general use&#160;of&#160;the&#160;PduR&#160;basis software&#160;module.&#160;&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>Caution&#160;<br/></b>We&#160;have configured&#160;the&#160;programs&#160;in&#160;accordance&#160;with your&#160;specifications&#160;in the&#160;<br/>
<b>&#160;&#160;</b>questionnaire.&#160;Whereas&#160;the&#160;programs&#160;do&#160;support&#160;other&#160;configurations&#160;than&#160;the&#160;one&#160;<br/>
specified&#160;in your&#160;questionnaire,&#160;Vector´s&#160;release&#160;of&#160;the&#160;programs&#160;delivered to&#160;your&#160;<br/>company&#160;is&#160;expressly&#160;restricted&#160;to&#160;the&#160;configuration&#160;you&#160;have specified&#160;in&#160;the&#160;<br/>questionnaire.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
&#160;<br/>
©&#160;2017&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;3.00.00&#160;<br/>
4&#160;<br/>
based&#160;on&#160;template&#160;version&#160;4.9.2&#160;<br/>
<hr/>
<a name=5></a><img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/PduR/doc/TechnicalReference_PduR-5_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;PDU&#160;Router&#160;<br/>
<b>Contents&#160;</b><br/>
<a href="TechnicalReference_PduRs.html#10"><b>1</b>&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#10"><b>Component&#160;History&#160;....................................................................................................&#160;10</b>&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#11"><b>2</b>&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#11"><b>Introduction.................................................................................................................&#160;11</b>&#160;<br/></a><a href="TechnicalReference_PduRs.html#12">2.1&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#12">Architecture&#160;Overview&#160;......................................................................................&#160;12&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#14"><b>3</b>&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#14"><b>Functional&#160;Description&#160;...............................................................................................&#160;14</b>&#160;<br/>3.1&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#14">Features&#160;..........................................................................................................&#160;14&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#15">3.2&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#15">Interfaces&#160;to adjacent&#160;modules of&#160;the&#160;PDUR&#160;....................................................&#160;15&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#15">3.3&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#15">Initialization&#160;......................................................................................................&#160;15&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#15">3.4&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#15">States&#160;..............................................................................................................&#160;15&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#15">3.5&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#15">Error&#160;Handling&#160;..................................................................................................&#160;15&#160;<br/>3.5.1&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#15">Development&#160;Error&#160;Reporting&#160;...........................................................&#160;15&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#15">3.6&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#15">Interface&#160;Layer&#160;Gateway&#160;..................................................................................&#160;15&#160;<br/>3.6.1&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#15">Data&#160;Provision&#160;..................................................................................&#160;15&#160;<br/>3.6.1.1&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#15">Direct&#160;data provision&#160;......................................................&#160;15&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#16">3.6.1.2&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#16">Trigger&#160;transmit&#160;data provision&#160;.......................................&#160;16&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#16">3.6.2&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#16">FIFO&#160;Queue&#160;.....................................................................................&#160;16&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#16">3.6.3&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#16">Buffer&#160;Configurations&#160;.......................................................................&#160;16&#160;<br/>3.6.3.1&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#16">No Buffer&#160;.......................................................................&#160;16&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#16">3.6.3.2&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#16">Direct&#160;Data&#160;Provision&#160;FIFO&#160;............................................&#160;16&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#16">3.6.3.3&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#16">Trigger&#160;Transmit&#160;Data&#160;Provision&#160;FIFO&#160;............................&#160;16&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#16">3.6.3.4&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#16">Trigger&#160;Transmit&#160;Data&#160;Provision&#160;Single Buffer&#160;................&#160;16&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#17">3.6.4&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#17">Shared&#160;Tx&#160;Buffer&#160;Pool&#160;support&#160;.........................................................&#160;17&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#17">3.6.5&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#17">Timing&#160;aspects&#160;.................................................................................&#160;17&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#17">3.6.6&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#17">Dynamic&#160;DLC&#160;Routing&#160;......................................................................&#160;17&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#17">3.6.7&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#17">Transport&#160;protocol&#160;low&#160;level&#160;routing&#160;..................................................&#160;17&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#19">3.6.8&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#19">Smart&#160;Learning&#160;(Switching)&#160;..............................................................&#160;19&#160;<br/></a><a href="TechnicalReference_PduRs.html#20">3.6.8.1&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#20">Configuration&#160;.................................................................&#160;20&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#23">3.6.8.2&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#23">Example&#160;.........................................................................&#160;23&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#24">3.6.9&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#24">Queue&#160;overflow&#160;notification&#160;callback&#160;................................................&#160;24&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#26">3.7&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#26">Transport&#160;Protocol&#160;Gateway&#160;.............................................................................&#160;26&#160;<br/>3.7.1&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#26">Multi-Routing&#160;....................................................................................&#160;26&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#26">3.7.2&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#26">TP&#160;Threshold&#160;...................................................................................&#160;26&#160;<br/></a><a href="TechnicalReference_PduRs.html#27">3.7.2.1&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#27">Restrictions&#160;....................................................................&#160;27&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#27">3.7.2.2&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#27">Threshold “0”&#160;.................................................................&#160;27&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#27">3.7.3&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#27">Tx&#160;Buffer&#160;Handling&#160;...........................................................................&#160;27&#160;<br/></a><a href="TechnicalReference_PduRs.html#28">3.7.3.1&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#28">Tx&#160;Buffer&#160;Usage&#160;Types&#160;...................................................&#160;28&#160;<br/>3.7.3.1.1&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#28">Dedicated&#160;Tx&#160;Buffer&#160;...................................&#160;28&#160;</a><br/>
©&#160;2017&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;3.00.00&#160;<br/>
5&#160;<br/>
based&#160;on&#160;template&#160;version&#160;4.9.2&#160;<br/>
<hr/>
<a name=6></a><img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/PduR/doc/TechnicalReference_PduR-6_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;PDU&#160;Router&#160;<br/>
<a href="TechnicalReference_PduRs.html#28">3.7.3.1.2&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#28">Shared&#160;Tx&#160;Buffer&#160;........................................&#160;28&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#29">3.7.3.1.3&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#29">Local&#160;Tx&#160;Buffer&#160;Pool&#160;...................................&#160;29&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#29">3.7.3.1.4&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#29">Global&#160;Tx&#160;Buffer&#160;Pool&#160;.................................&#160;29&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#29">3.7.3.2&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#29">Example Configuration&#160;...................................................&#160;29&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#30">3.7.3.3&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#30">Tx&#160;Buffer&#160;Length&#160;Configuration&#160;......................................&#160;30&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#30">3.7.3.4&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#30">Amount&#160;of&#160;Tx&#160;Buffer&#160;.......................................................&#160;30&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#31">3.7.3.5&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#31">Tx&#160;Buffer&#160;Selection&#160;Algorithm&#160;.........................................&#160;31&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#31">3.7.4&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#31">TP&#160;Queue&#160;........................................................................................&#160;31&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#31">3.7.5&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#31">Error&#160;Handling&#160;..................................................................................&#160;31&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#32">3.7.6&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#32">Meta&#160;Data&#160;Handling&#160;.........................................................................&#160;32&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#33"><b>4</b>&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#33"><b>Integration&#160;...................................................................................................................&#160;33</b>&#160;<br/>4.1&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#33">Scope of&#160;Delivery&#160;.............................................................................................&#160;33&#160;<br/>4.1.1&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#33">Static Files&#160;.......................................................................................&#160;33&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#33">4.1.2&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#33">Dynamic&#160;Files&#160;..................................................................................&#160;33&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#34">4.2&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#34">Critical&#160;Sections&#160;...............................................................................................&#160;34&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#34">4.3&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#34">Memory&#160;Section&#160;...............................................................................................&#160;34&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#34">4.4&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#34">Type&#160;Definitions&#160;...............................................................................................&#160;34&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#35"><b>5</b>&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#35"><b>API&#160;Description&#160;...........................................................................................................&#160;35</b>&#160;<br/>5.1&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#35">Services provided by&#160;PDUR&#160;.............................................................................&#160;35&#160;<br/>5.1.1&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#35">PduR_Init&#160;.........................................................................................&#160;35&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#35">5.1.2&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#35">PduR_InitMemory&#160;............................................................................&#160;35&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#36">5.2&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#36">Services&#160;...........................................................................................................&#160;36&#160;<br/>5.2.1&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#36">PduR_GetVersionInfo&#160;......................................................................&#160;36&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#36">5.2.2&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#36">PduR_GetConfigurationId&#160;................................................................&#160;36&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#36">5.2.3&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#36">PduR_EnableRouting&#160;.......................................................................&#160;36&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#37">5.2.4&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#37">PduR_DisableRouting&#160;......................................................................&#160;37&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#38">5.3&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#38">Communication&#160;Interface&#160;.................................................................................&#160;38&#160;<br/>5.3.1&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#38">PduR_&lt;GenericUp&gt;Transmit&#160;...........................................................&#160;38&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#38">5.3.2&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#38">PduR_&lt;GenericLo&gt;RxIndication&#160;......................................................&#160;38&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#39">5.3.3&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#39">PduR_&lt;GenericLo&gt;TriggerTransmit&#160;.................................................&#160;39&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#40">5.3.4&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#40">PduR_&lt;GenericLo&gt;TxConfirmation&#160;.................................................&#160;40&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#41">5.4&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#41">Transport&#160;Protocol&#160;...........................................................................................&#160;41&#160;<br/>5.4.1&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#41">PduR_&lt;GenericUpTp&gt;ChangeParameter&#160;........................................&#160;41&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#41">5.4.2&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#41">PduR_&lt;GenericUpTp&gt;CancelReceive&#160;.............................................&#160;41&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#42">5.4.3&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#42">PduR_&lt;GenericUpTp&gt;CancelTransmit&#160;............................................&#160;42&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#43">5.4.4&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#43">PduR_&lt;GenericLoTp&gt;StartOfReception&#160;..........................................&#160;43&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#43">5.4.5&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#43">PduR_&lt;GenericLoTp&gt;CopyRxData&#160;.................................................&#160;43&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#44">5.4.6&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#44">PduR_&lt;GenericLoTp&gt;CopyTxData&#160;..................................................&#160;44&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#45">5.4.7&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#45">PduR_&lt;GenericLo&gt;TpTxConfirmation&#160;.............................................&#160;45&#160;</a><br/>
©&#160;2017&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;3.00.00&#160;<br/>
6&#160;<br/>
based&#160;on&#160;template&#160;version&#160;4.9.2&#160;<br/>
<hr/>
<a name=7></a><img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/PduR/doc/TechnicalReference_PduR-7_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;PDU&#160;Router&#160;<br/>
<a href="TechnicalReference_PduRs.html#46">5.4.8&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#46">PduR_&lt;GenericLo&gt;TpRxIndication&#160;..................................................&#160;46&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#47">5.4.9&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#47">PduR_&lt;GenericUpTp&gt;Transmit&#160;.......................................................&#160;47&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#48">5.5&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#48">Service Ports&#160;...................................................................................................&#160;48&#160;<br/>5.5.1&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#48">Complex&#160;Device Driver&#160;Interaction&#160;...................................................&#160;48&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#49"><b>6</b>&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#49"><b>Configuration&#160;..............................................................................................................&#160;49</b>&#160;<br/>6.1&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#49">Use Case Configuration:&#160;Communication interface range&#160;gateway&#160;..................&#160;49&#160;<br/></a><a href="TechnicalReference_PduRs.html#50">6.1.1&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#50">Step-by-step&#160;configuration&#160;...............................................................&#160;50&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#54">6.1.2&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#54">Optional&#160;configuration&#160;variants&#160;/&#160;options&#160;...........................................&#160;54&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#56">6.2&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#56">Use Case Configuration:&#160;Functional&#160;requests&#160;gateway&#160;routing&#160;........................&#160;56&#160;<br/></a><a href="TechnicalReference_PduRs.html#57">6.2.1&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#57">Step-by-step&#160;configuration&#160;...............................................................&#160;57&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#63">6.3&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#63">Use Case Configuration:&#160;N:1&#160;routing path&#160;........................................................&#160;63&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#65"><b>7</b>&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#65"><b>AUTOSAR&#160;Standard&#160;Compliance...............................................................................&#160;65</b>&#160;<br/>7.1&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#65">Deviations&#160;........................................................................................................&#160;65&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#66">7.2&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#66">Limitations........................................................................................................&#160;66&#160;<br/>7.2.1&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#66">General&#160;............................................................................................&#160;66&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#67"><b>8</b>&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#67"><b>Glossary&#160;and&#160;Abbreviations&#160;......................................................................................&#160;67</b>&#160;<br/>8.1&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#67">Glossary&#160;..........................................................................................................&#160;67&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#68">8.2&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#68">Abbreviations&#160;...................................................................................................&#160;68&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#70"><b>9</b>&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#70"><b>Contact&#160;........................................................................................................................&#160;70</b>&#160;</a><br/>
&#160;<br/>
©&#160;2017&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;3.00.00&#160;<br/>
7&#160;<br/>
based&#160;on&#160;template&#160;version&#160;4.9.2&#160;<br/>
<hr/>
<a name=8></a><img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/PduR/doc/TechnicalReference_PduR-8_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;PDU&#160;Router&#160;<br/>
<b>Illustrations&#160;<br/></b><a href="TechnicalReference_PduRs.html#12">Figure&#160;2-1&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#12">AUTOSAR&#160;4.1&#160;Architecture&#160;Overview&#160;.......................................................&#160;12&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#13">Figure&#160;2-2&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#13">Interfaces&#160;to adjacent&#160;modules of&#160;the&#160;PDUR&#160;............................................&#160;13&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#19">Figure&#160;3-1&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#19">Example routing&#160;path configurations:&#160;Every&#160;ECU&#160;transmits&#160;to&#160;every&#160;other&#160;<br/>ECU&#160;(via N:M&#160;routing&#160;paths)&#160;or&#160;ECU0 can&#160;exclusively&#160;broadcast&#160;to&#160;all&#160;<br/>other&#160;ECUs.&#160;Other&#160;ECUs&#160;can&#160;only&#160;reach&#160;ECU0&#160;........................................&#160;19&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#20">Figure&#160;3-2&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#20">Network&#160;specific&#160;assignment&#160;of&#160;PduRRouting&#160;path sources&#160;and&#160;<br/>destinations&#160;to a&#160;PduRConnection&#160;............................................................&#160;20&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#21">Figure&#160;3-3&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#21">Example Extended CAN&#160;ID&#160;layout&#160;............................................................&#160;21&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#23">Figure&#160;3-4&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#23">Example switching&#160;network&#160;topology&#160;........................................................&#160;23&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#23">Figure&#160;3-5&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#23">Example Standard CAN&#160;ID&#160;layout&#160;.............................................................&#160;23&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#23">Figure&#160;3-6&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#23">Example switching&#160;EcuC&#160;configuration&#160;-&#160;PduRConnection&#160;.......................&#160;23&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#24">Figure&#160;3-7&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#24">Example switching&#160;EcuC&#160;configuration&#160;-&#160;<br/>PduRSaTaFromMetaDataCalculationStrategy&#160;..........................................&#160;24&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#25">Figure&#160;3-8 Overflow&#160;notification callback&#160;configuration&#160;.........................................................&#160;25&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#27">Figure&#160;3-9&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#27">Configured&#160;Tp Buffer&#160;with possible&#160;Threshold&#160;ranges&#160;...............................&#160;27&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#29">Figure&#160;10&#160;Buffer&#160;pool&#160;configuration&#160;......................................................................................&#160;29&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#29">Figure&#160;11 Shared&#160;buffer&#160;pool&#160;................................................................................................&#160;29&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#49">Figure&#160;6-1&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#49">Meta&#160;data routing&#160;with CanIf&#160;.....................................................................&#160;49&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#50">Figure&#160;6-2&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#50">CanIf&#160;/&#160;PduR&#160;range&#160;routing&#160;example overview&#160;..........................................&#160;50&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#56">Figure&#160;6-3&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#56">Example functional&#160;requests&#160;gateway&#160;network&#160;architecture&#160;......................&#160;56&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#56">Figure&#160;6-4&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#56">Functional&#160;request&#160;gateway&#160;architecture&#160;...................................................&#160;56&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#63">Figure&#160;6-5:&#160;example N:1&#160;routing&#160;path configuration&#160;..............................................................&#160;63&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#64">Figure&#160;6-6&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#64">EcuC&#160;configuration&#160;of&#160;(mixed)&#160;N:1 /&#160;1:N&#160;routing&#160;paths&#160;..............................&#160;64&#160;</a><br/>
<b>&#160;</b><br/>
<b>Tables&#160;<br/></b><a href="TechnicalReference_PduRs.html#10">Table&#160;1-1&#160;&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#10">Component&#160;history....................................................................................&#160;10&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#14">Table&#160;3-1&#160;&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#14">Supported&#160;AUTOSAR&#160;standard conform&#160;features&#160;.....................................&#160;14&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#15">Table&#160;3-2&#160;&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#15">Not&#160;supported&#160;AUTOSAR&#160;standard conform&#160;features&#160;...............................&#160;15&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#15">Table&#160;3-3&#160;&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#15">Features&#160;provided beyond the&#160;AUTOSAR&#160;standard&#160;..................................&#160;15&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#19">Table&#160;3-4&#160;&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#19">Example FIB&#160;content&#160;after&#160;reception of&#160;Pdus&#160;from&#160;source&#160;0x00&#160;and 0x02&#160;19&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#25">Table&#160;3-5 How&#160;to&#160;get&#160;the&#160;associated&#160;gateway&#160;routing&#160;path&#160;...................................................&#160;25&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#33">Table&#160;4-1&#160;&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#33">Static&#160;files&#160;.................................................................................................&#160;33&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#34">Table&#160;4-2&#160;&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#34">Generated&#160;files&#160;.........................................................................................&#160;34&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#34">Table&#160;4-3&#160;&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#34">Type&#160;definitions&#160;.........................................................................................&#160;34&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#35">Table&#160;5-1&#160;&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#35">PduR_Init&#160;..................................................................................................&#160;35&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#36">Table&#160;5-2&#160;&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#36">PduR_InitMemory&#160;.....................................................................................&#160;36&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#36">Table&#160;5-3&#160;&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#36">PduR_GetVersionInfo&#160;...............................................................................&#160;36&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#36">Table&#160;5-4&#160;&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#36">PduR_GetConfigurationId&#160;.........................................................................&#160;36&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#37">Table&#160;5-5&#160;&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#37">PduR_EnableRouting&#160;...............................................................................&#160;37&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#37">Table&#160;5-6&#160;&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#37">PduR_DisableRouting&#160;..............................................................................&#160;37&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#38">Table&#160;5-7&#160;&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#38">PduR_&lt;GenericUp&gt;Transmit&#160;....................................................................&#160;38&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#39">Table&#160;5-8&#160;&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#39">PduR_&lt;GenericLo&gt;RxIndication...............................................................&#160;39&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#39">Table&#160;5-9&#160;&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#39">PduR_&lt;GenericLo&gt;TriggerTransmit&#160;.........................................................&#160;39&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#40">Table&#160;5-10&#160;&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#40">PduR_&lt;GenericLo&gt;TxConfirmation&#160;..........................................................&#160;40&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#41">Table&#160;5-11&#160;&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#41">PduR_&lt;GenericUpTp&gt;ChangeParameter&#160;................................................&#160;41&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#42">Table&#160;5-12&#160;&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#42">PduR_&lt;GenericUpTp&gt;CancelReceive......................................................&#160;42&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#42">Table&#160;5-13&#160;&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#42">PduR_&lt;GenericUpTp&gt;CancelTransmit&#160;.....................................................&#160;42&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#43">Table&#160;5-14&#160;&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#43">PduR_&lt;GenericLoTp&gt;StartOfReception&#160;...................................................&#160;43&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#44">Table&#160;5-15&#160;&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#44">PduR_&lt;GenericLoTp&gt;CopyRxData&#160;..........................................................&#160;44&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#45">Table&#160;5-16&#160;&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#45">PduR_&lt;GenericLoTp&gt;CopyTxData&#160;..........................................................&#160;45&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#46">Table&#160;5-17&#160;&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#46">PduR_&lt;GenericLo&gt;TpTxConfirmation&#160;......................................................&#160;46&#160;</a><br/>
©&#160;2017&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;3.00.00&#160;<br/>
8&#160;<br/>
based&#160;on&#160;template&#160;version&#160;4.9.2&#160;<br/>
<hr/>
<a name=9></a><img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/PduR/doc/TechnicalReference_PduR-9_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;PDU&#160;Router&#160;<br/>
<a href="TechnicalReference_PduRs.html#46">Table&#160;5-18&#160;&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#46">PduR_&lt;GenericLo&gt;TpRxIndication&#160;..........................................................&#160;46&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#47">Table&#160;5-19&#160;&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#47">PduR_&lt;GenericUpTp&gt;Transmit&#160;................................................................&#160;47&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#50">Table&#160;6-1&#160;&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#50">Example range&#160;routings&#160;............................................................................&#160;50&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#57">Table&#160;6-2&#160;&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#57">Example functional&#160;diagnostic&#160;request&#160;routing&#160;..........................................&#160;57&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#68">Table&#160;8-1&#160;&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#68">Glossary&#160;...................................................................................................&#160;68&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#69">Table&#160;8-2&#160;&#160;</a><br/>
<a href="TechnicalReference_PduRs.html#69">Abbreviations&#160;............................................................................................&#160;69&#160;</a><br/>
&#160;<br/>&#160;<br/>
©&#160;2017&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;3.00.00&#160;<br/>
9&#160;<br/>
based&#160;on&#160;template&#160;version&#160;4.9.2&#160;<br/>
<hr/>
<a name=10></a><img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/PduR/doc/TechnicalReference_PduR-10_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;PDU&#160;Router&#160;<br/>
<b>1&#160;&#160;Component&#160;History&#160;</b><br/>
The&#160;&#160;component&#160;&#160;history&#160;&#160;gives&#160;&#160;an&#160;&#160;overview&#160;&#160;over&#160;&#160;the&#160;&#160;important&#160;&#160;milestones&#160;&#160;that&#160;&#160;are&#160;<br/>supported&#160;in&#160;the&#160;different&#160;versions of&#160;the&#160;component.&#160;&#160;<br/>
<b>Component&#160;Version&#160;&#160;New&#160;Features&#160;<br/></b>1.00&#160;<br/>
<b>&#160;&#160;</b>MICROSAR 4&#160;Base&#160;&#160;<br/>
2.00&#160;<br/>
<b>&#160;&#160;</b>AUTOSAR 4.0.3&#160;<br/>
2.01&#160;<br/>
<b>&#160;&#160;</b>TP&#160;Gateway&#160;<br/>
<b>&#160;&#160;</b>IF&#160;Gateway&#160;<br/>
2.02&#160;<br/>
<b>&#160;&#160;</b>Routing&#160;Path&#160;Groups&#160;<br/>
2.03&#160;<br/>
<b>&#160;&#160;</b>Post-Build&#160;Loadable&#160;<br/>
5.00&#160;<br/>
<b>&#160;&#160;</b>Changed&#160;&#160;StartOfReception,&#160;TpRxIndication&#160;and&#160;<br/>
TpTxConfirmation&#160;APIs according&#160;to&#160;AUTOSAR 4.1.2&#160;<br/>
<b>&#160;&#160;</b>Added&#160;TP&#160;routing&#160;with&#160;variable&#160;addresses&#160;<br/>
<b>&#160;&#160;</b>Meta-Data&#160;support&#160;<br/>
6.00&#160;<br/>
<b>&#160;&#160;</b>Post-Build&#160;Selectable&#160;<br/>
7.00&#160;<br/>
<b>&#160;&#160;</b>CAN-FD&#160;<br/>
8.00&#160;<br/>
<b>&#160;&#160;</b>PduR Switching&#160;<br/>
<b>&#160;&#160;</b>N:1&#160;Interface&#160;routing&#160;path&#160;support&#160;<br/>
9.00&#160;<br/>
<b>&#160;&#160;</b>1:N/N:1&#160;transport protocol routing&#160;path&#160;support&#160;<br/>
Table&#160;1-1&#160;&#160;&#160;Component&#160;history&#160;<br/>
&#160;<br/>
©&#160;2017&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;3.00.00&#160;<br/>
10&#160;<br/>
based&#160;on&#160;template&#160;version&#160;4.9.2&#160;<br/>
<hr/>
<a name=11></a><img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/PduR/doc/TechnicalReference_PduR-11_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;PDU&#160;Router&#160;<br/>
<b>2&#160;&#160;Introduction&#160;</b><br/>
This&#160;&#160;document&#160;&#160;describes&#160;&#160;the&#160;&#160;functionality,&#160;API&#160;&#160;and&#160;&#160;configuration&#160;&#160;of&#160;&#160;the&#160;AUTOSAR&#160;&#160;BSW&#160;<br/>module&#160;PDUR&#160;as specified&#160;in<a href="TechnicalReference_PduRs.html#4">&#160;[1].&#160;</a>&#160;<br/>
&#160;<br/>
<b>Supported&#160;AUTOSAR&#160;R<a href="TechnicalReference_PduRs.html#11">elease*:</a></b><b>&#160;</b><br/>
4&#160;<br/>
<b>Supported&#160;Configuration&#160;Variants:&#160;</b><br/>
PRE-COMPILE&#160;[SELECTABLE]&#160;&#160;<br/>POST-BUILD-LOADABLE&#160;[SELECTABLE]&#160;<br/>
<b>Vendor&#160;ID:&#160;</b><br/>
PDUR_VENDOR_ID&#160;<br/>
30&#160;decimal&#160;<br/>(=&#160;Vector-Informatik,&#160;<br/>according&#160;to&#160;HIS)&#160;<br/>
<b>Module&#160;ID:&#160;</b><br/>
PDUR_MODULE_ID &#160;&#160;<br/>
51&#160;decimal&#160;<br/>(according&#160;to ref.&#160;[5])&#160;<br/>
*&#160;For the&#160;precise&#160;AUTOSAR Release&#160;4.x&#160;please see the&#160;release specific&#160;documentation.&#160;&#160;<br/>&#160;<br/>&#160;<br/>The&#160;&#160;main&#160;&#160;task&#160;&#160;of&#160;&#160;the&#160;&#160;PDU&#160;&#160;Router&#160;&#160;module&#160;&#160;is&#160;&#160;to&#160;&#160;abstract&#160;&#160;from&#160;&#160;the&#160;&#160;type&#160;&#160;of&#160;&#160;bus&#160;&#160;<br/>access (Interface&#160;layer and&#160;TP&#160;layer)&#160;and&#160;from&#160;the&#160;bus type&#160;itself.&#160;&#160;<br/>Since&#160;the&#160;PDU&#160;Router&#160;module&#160;has&#160;to&#160;route&#160;Rx&#160;and&#160;Tx&#160;PDUs&#160;to&#160;and&#160;from&#160;the&#160;&#160;upper-&#160;and&#160;&#160;<br/>lower-&#160;&#160;&#160;&#160;layers&#160;&#160;and&#160;&#160;any&#160;&#160;software&#160;&#160;&#160;component&#160;&#160;uses&#160;&#160;its&#160;&#160;own&#160;&#160;handle&#160;&#160;space,&#160;&#160;multiple&#160;&#160;<br/>routing&#160;tables&#160;&#160;are&#160;&#160;required.&#160;&#160;The&#160;&#160;PDU&#160;&#160;Router&#160;&#160;uses&#160;&#160;the&#160;&#160;input&#160;&#160;handle&#160;&#160;as&#160;&#160;an&#160;&#160;index&#160;&#160;to&#160;&#160;<br/>the&#160;&#160;related&#160;routing&#160;table.&#160;<br/>
©&#160;2017&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;3.00.00&#160;<br/>
11&#160;<br/>
based&#160;on&#160;template&#160;version&#160;4.9.2&#160;<br/>
<hr/>
<a name=12></a><img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/PduR/doc/TechnicalReference_PduR-12_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/PduR/doc/TechnicalReference_PduR-12_2.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;PDU&#160;Router&#160;<br/>
<b>2.1&#160;</b><br/>
<b>Architecture&#160;Overview&#160;</b><br/>
<a href="TechnicalReference_PduRs.html#12">&#160;Figure&#160;2-1&#160;</a>shows where the&#160;PDUR&#160;is located&#160;in&#160;the&#160;AUTOSAR architecture.&#160;<br/>
&#160;<br/>
Figure&#160;2-1&#160;&#160;AUTOSAR&#160;4.1&#160;Architecture&#160;Overview&#160;&#160;&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
©&#160;2017&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;3.00.00&#160;<br/>
12&#160;<br/>
based&#160;on&#160;template&#160;version&#160;4.9.2&#160;<br/>
<hr/>
<a name=13></a><img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/PduR/doc/TechnicalReference_PduR-13_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;PDU&#160;Router&#160;<br/>
<a href="TechnicalReference_PduRs.html#13">Figure&#160;&#160;2-2&#160;&#160;</a>shows&#160;the&#160;interfaces&#160;to&#160;adjacent&#160;modules&#160;of&#160;the&#160;&#160;PDUR.&#160;&#160;These&#160;interfaces&#160;are&#160;<br/>described&#160;in&#160;chapte<a href="TechnicalReference_PduRs.html#35">r&#160;5.&#160;</a>&#160;<br/>
<b>&#160;class&#160;Architecture</b><br/>
<b>CanTp</b><br/>
<b>FrArTp</b><br/>
<b>DoIp</b><br/>
<b>J1939Tp</b><br/>
<b>FrTp</b><br/>
<b>CanNm</b><br/>
<b>J1939Dcm</b><br/>
<b>Det</b><br/>
<b>&lt;UpTp&gt;</b><br/>
<b>IpduM</b><br/>
<b>Bsw&#160;M</b><br/>
<b>J1939Rm</b><br/>
<b>&lt;LoTp&gt;</b><br/>
<b>PduR</b><br/>
<b>LdCom</b><br/>
<b>FrNm</b><br/>
<b>&lt;LoIf&gt;</b><br/>
<b>Dcm</b><br/>
<b>CanIf</b><br/>
<b>SoAd</b><br/>
<b>J1939Nm</b><br/>
<b>&lt;UpIf&gt;</b><br/>
<b>Com</b><br/>
<b>LinIf</b><br/>
<b>FrIf</b><br/>
<b>SecOC</b><br/>
<b>CddPduRUpperLayerContribution</b><br/>
<b>CddPduRLow&#160;erLayerContribution</b><br/>
&#160;<br/>
&#160;<br/>
Figure&#160;2-2&#160;&#160;Interfaces&#160;to&#160;adjacent&#160;modules&#160;of&#160;the&#160;PDUR&#160;<br/>
&#160;<br/>Applications&#160;do&#160;not&#160;access&#160;the&#160;services&#160;of&#160;the&#160;BSW&#160;modules&#160;directly.&#160;They&#160;use&#160;the&#160;service&#160;<br/>ports&#160;provided&#160;by&#160;the&#160;BSW&#160;modules&#160;via&#160;the&#160;RTE.&#160;The&#160;service&#160;ports&#160;provided&#160;by&#160;the&#160;PDUR&#160;<br/>are listed&#160;in&#160;chapte<a href="TechnicalReference_PduRs.html#47">r&#160;0&#160;</a>and&#160;are defined&#160;in<a href="TechnicalReference_PduRs.html#4">&#160;[1].</a>&#160;<br/>
©&#160;2017&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;3.00.00&#160;<br/>
13&#160;<br/>
based&#160;on&#160;template&#160;version&#160;4.9.2&#160;<br/>
<hr/>
<a name=14></a><img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/PduR/doc/TechnicalReference_PduR-14_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;PDU&#160;Router&#160;<br/>
<b>3&#160;&#160;Functional&#160;Description&#160;</b><br/>
<b>3.1&#160;</b><br/>
<b>Features&#160;</b><br/>
The&#160;features&#160;listed&#160;in&#160;the&#160;following&#160;tables&#160;cover&#160;the&#160;complete&#160;functionality&#160;specified&#160;for&#160;the&#160;<br/>PDUR.&#160;<br/>The&#160;AUTOSAR&#160;&#160;standard&#160;&#160;functionality&#160;&#160;is&#160;&#160;specified&#160;&#160;in<a href="TechnicalReference_PduRs.html#4">&#160;&#160;[1],</a>&#160;&#160;the&#160;&#160;corresponding&#160;&#160;features&#160;&#160;are&#160;<br/>listed&#160;in&#160;the&#160;tables&#160;<br/><b>&#160;&#160;</b><a href="TechnicalReference_PduRs.html#14">Table&#160;3-1&#160;&#160;&#160;Supported&#160;AUTOSAR&#160;standard conform&#160;features&#160;</a>&#160;<br/>
<b>&#160;&#160;</b><a href="TechnicalReference_PduRs.html#15">Table&#160;3-2&#160;&#160;&#160;Not&#160;supported&#160;AUTOSAR standard conform&#160;features&#160;</a><br/>
For further information&#160;of&#160;not&#160;supported&#160;features see&#160;also&#160;chapte<a href="TechnicalReference_PduRs.html#62">r&#160;0.</a>&#160;<br/>Vector&#160;Informatik provides further&#160;PDUR&#160;functionality&#160;beyond&#160;the&#160;AUTOSAR&#160;standard.&#160;The&#160;<br/>corresponding&#160;features&#160;are&#160;listed&#160;in&#160;the&#160;table&#160;<br/><b>&#160;&#160;</b><a href="TechnicalReference_PduRs.html#15">Table&#160;3-3&#160;&#160;&#160;Features&#160;provided&#160;beyond&#160;the&#160;AUTOSAR standard&#160;</a><br/>
&#160;<br/>
The&#160;following&#160;features&#160;specified&#160;<a href="TechnicalReference_PduRs.html#4">in&#160;[1]&#160;</a>are&#160;supported:&#160;<br/>
<b>Supported&#160;AUTOSAR&#160;Standard&#160;Conform&#160;Features&#160;<br/></b>Pre compile&#160;and Post&#160;build&#160;time&#160;configuration&#160;variant&#160;<br/>I-PDU&#160;transmission&#160;and&#160;reception&#160;<br/>Cancel-Receive/Transmit&#160;support&#160;<br/>Change&#160;Parameter&#160;support&#160;<br/>1:1&#160;routing&#160;between upper-&#160;and lower-layer&#160;communication interface&#160;modules&#160;<br/>1:1&#160;routing&#160;between upper-&#160;and lower-layer&#160;transport&#160;protocol&#160;modules&#160;<br/>1:1&#160;Interface&#160;Gateway&#160;Routing&#160;<br/>1:N Interface&#160;Gateway&#160;Routing&#160;<br/>1:1&#160;Transport&#160;protocol&#160;Gateway&#160;Routing&#160;<br/>1:N&#160;Transport&#160;protocol&#160;Gateway&#160;Routing&#160;(single and&#160;multiframe&#160;Tp&#160;messages)&#160;<br/>Complex&#160;device driver&#160;(&#160;CDD&#160;)&#160;support&#160;<br/>Routing&#160;Path&#160;Groups&#160;<br/>Debugging&#160;support&#160;(optional&#160;feature)&#160;<br/>
Table&#160;3-1&#160;&#160;&#160;Supported&#160;AUTOSAR&#160;standard&#160;conform&#160;features&#160;<br/>
The&#160;following&#160;features&#160;specified&#160;<a href="TechnicalReference_PduRs.html#4">in&#160;[1]&#160;</a>are&#160;not&#160;supported:&#160;<br/>
<b>Not&#160;Supported&#160;AUTOSAR&#160;Standard&#160;Conform&#160;Features&#160;<br/></b>Link&#160;time&#160;configuration&#160;&#160;<br/>1:N&#160;fan-out&#160;from&#160;the&#160;same upper&#160;layer&#160;PDU&#160;(IF/&#160;Tp)&#160;<br/>Zero cost&#160;operation&#160;<br/>Minimum&#160;Routing&#160;(Reduced&#160;state)&#160;<br/>
©&#160;2017&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;3.00.00&#160;<br/>
14&#160;<br/>
based&#160;on&#160;template&#160;version&#160;4.9.2&#160;<br/>
<hr/>
<a name=15></a><img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/PduR/doc/TechnicalReference_PduR-15_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;PDU&#160;Router&#160;<br/>
Table&#160;3-2&#160;&#160;&#160;Not&#160;supported&#160;AUTOSAR&#160;standard&#160;conform&#160;features&#160;<br/>
The&#160;following&#160;features&#160;are provided&#160;beyond&#160;the&#160;AUTOSAR standard:&#160;<br/>
<b>Features&#160;Provided Beyond The&#160;AUTOSAR&#160;Standard&#160;<br/></b>N:1&#160;Interface&#160;routing&#160;path capability&#160;<br/>PduR&#160;Switching:&#160;Smart&#160;learning&#160;of&#160;routing&#160;path destinations depending on&#160;received&#160;Pdus&#160;<br/>1:N&#160;and&#160;N:1&#160;transport&#160;protocol&#160;single-&#160;and&#160;multiframe&#160;routing&#160;path&#160;capability&#160;<br/>
Table&#160;3-3&#160;&#160;&#160;Features&#160;provided&#160;beyond&#160;the&#160;AUTOSAR&#160;standard&#160;<br/>
<b>3.2&#160;</b><br/>
<b>Interfaces&#160;to adjacent modules&#160;of the&#160;PDUR&#160;</b><br/>
The&#160;&#160;PDU&#160;&#160;Router&#160;&#160;provides&#160;&#160;generic&#160;&#160;communication&#160;&#160;interfaces&#160;&#160;and&#160;transport&#160;protocol&#160;APIs&#160;<br/>for any&#160;lower and&#160;upper layer module.&#160;&#160;<br/>
<b>3.3&#160;</b><br/>
<b>Initialization&#160;</b><br/>
Before&#160;&#160;the&#160;&#160;PduR&#160;&#160;can&#160;&#160;be&#160;&#160;used&#160;&#160;it&#160;&#160;has&#160;&#160;to&#160;&#160;be&#160;&#160;initialized&#160;&#160;by&#160;&#160;PduR_Init()&#160;&#160;which&#160;&#160;performs&#160;&#160;the&#160;<br/>basic&#160;initialization.&#160;Initialization&#160;is&#160;normally&#160;driven&#160;by&#160;the&#160;Communication&#160;Manager.&#160;&#160;If&#160;this&#160;<br/>software&#160;&#160;component&#160;&#160;is&#160;&#160;not&#160;&#160;available&#160;&#160;a&#160;&#160;similar&#160;&#160;component&#160;&#160;has&#160;&#160;to&#160;&#160;be&#160;&#160;provided&#160;&#160;by&#160;&#160;the&#160;<br/>integrator.&#160;<br/>
<b>3.4&#160;</b><br/>
<b>States&#160;</b><br/>
The&#160;&#160;PduR&#160;&#160;is&#160;&#160;initially&#160;&#160;not&#160;&#160;activated.&#160;&#160;Basic&#160;&#160;RAM&#160;&#160;arrays&#160;&#160;are&#160;&#160;initialized&#160;&#160;with&#160;&#160;the&#160;&#160;call&#160;&#160;of&#160;<br/>PduR_InitMemory&#160;or&#160;with&#160;the&#160;startup&#160;code&#160;of&#160;your&#160;ECU.&#160;If&#160;PduR_Init()&#160;is&#160;called&#160;with&#160;valid&#160;<br/>parameters, the&#160;PduR&#160;is in&#160;the&#160;state&#160;“PduR_IsInitialized”&#160;and&#160;the&#160;communication&#160;can&#160;start.&#160;<br/>
<b>3.5&#160;</b><br/>
<b>Error&#160;Handling&#160;</b><br/>
<b>3.5.1&#160;</b><br/>
<b>Development&#160;Error&#160;Reporting&#160;</b><br/>
By&#160;&#160;default,&#160;&#160;development&#160;&#160;errors&#160;&#160;are&#160;&#160;reported&#160;&#160;to&#160;&#160;the&#160;&#160;DET&#160;&#160;using&#160;&#160;the&#160;&#160;service&#160;<br/>Det_ReportError()&#160;&#160;as&#160;&#160;specified&#160;&#160;in&#160;&#160;[4],&#160;&#160;if&#160;&#160;development&#160;&#160;error&#160;&#160;reporting&#160;&#160;is&#160;&#160;enabled&#160;&#160;(i.e.&#160;<br/>pre-compile&#160;parameter&#160;PDUR_DEV_ERROR_DETECT==STD_ON).&#160;<br/>
If&#160;&#160;another&#160;&#160;module&#160;&#160;is&#160;&#160;used&#160;&#160;for&#160;&#160;development&#160;&#160;error&#160;&#160;reporting,&#160;&#160;the&#160;&#160;function&#160;&#160;prototype&#160;&#160;for&#160;<br/>reporting&#160;the&#160;error&#160;can&#160;be&#160;configured&#160;by&#160;the&#160;integrator,&#160;but&#160;must&#160;have&#160;the&#160;same&#160;signature&#160;<br/>as the&#160;service&#160;Det_ReportError().&#160;<br/>
The&#160;reported&#160;PDUR&#160;ID is&#160;51.&#160;<br/>
<b>3.6&#160;</b><br/>
<b>Interface&#160;Layer Gateway&#160;</b><br/>
<b>3.6.1&#160;</b><br/>
<b>Data&#160;Provision&#160;</b><br/>
<b>3.6.1.1&#160;</b><br/>
<b>Direct data&#160;provision&#160;</b><br/>
For&#160;&#160;Direct&#160;&#160;Data&#160;&#160;Provision&#160;&#160;routing&#160;&#160;paths&#160;&#160;the&#160;&#160;data&#160;&#160;will&#160;&#160;be&#160;&#160;copied&#160;&#160;<b>by&#160;&#160;the&#160;&#160;PduR</b>&#160;&#160;to&#160;&#160;the&#160;<br/>destination&#160;module&#160;in&#160;the&#160;transmit&#160;API&#160;call.&#160;If&#160;a&#160;FIFO&#160;queue&#160;is&#160;configured,&#160;the&#160;data&#160;might&#160;<br/>be&#160;queued&#160;and&#160;will then&#160;be&#160;transmitted&#160;in&#160;the&#160;Tx&#160;Confirmation&#160;context.&#160;<br/>
©&#160;2017&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;3.00.00&#160;<br/>
15&#160;<br/>
based&#160;on&#160;template&#160;version&#160;4.9.2&#160;<br/>
<hr/>
<a name=16></a><img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/PduR/doc/TechnicalReference_PduR-16_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/PduR/doc/TechnicalReference_PduR-16_2.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;PDU&#160;Router&#160;<br/>
<b>3.6.1.2&#160;</b><br/>
<b>Trigger transmit data&#160;provision&#160;</b><br/>
For&#160;&#160;Trigger&#160;&#160;Transmit&#160;&#160;Data&#160;&#160;Provision&#160;&#160;routing&#160;&#160;paths&#160;&#160;the&#160;&#160;data&#160;&#160;will&#160;&#160;be&#160;&#160;copied&#160;&#160;<b>by&#160;&#160;the&#160;<br/>destination&#160;module</b>&#160;in&#160;the&#160;trigger&#160;transmit&#160;API&#160;call.&#160;This&#160;is&#160;useful&#160;if&#160;the&#160;destination&#160;module&#160;<br/>always&#160;wants&#160;to&#160;fetch&#160;the&#160;latest&#160;data&#160;available&#160;(single&#160;buffer configuration) or it&#160;has specific&#160;<br/>timing&#160;requirements&#160;when&#160;it&#160;needs&#160;to&#160;provide&#160;the&#160;data.&#160;<br/>
<b>3.6.2&#160;</b><br/>
<b>FIFO&#160;Queue&#160;</b><br/>
A&#160;FIFO&#160;is&#160;used&#160;if&#160;loss&#160;of&#160;I-PDU&#160;instances&#160;is&#160;critical.&#160;In&#160;case&#160;of&#160;several&#160;parallel&#160;transmitting&#160;<br/>FIFO&#160;queues,&#160;the&#160;order&#160;of&#160;transmission&#160;depends&#160;upon&#160;the&#160;bus&#160;access&#160;of&#160;the&#160;lower&#160;layer&#160;<br/>and&#160;not&#160;on&#160;the&#160;relative&#160;order&#160;of&#160;I-PDU&#160;reception.&#160;One&#160;FIFO&#160;queue&#160;therefore&#160;only&#160;cares&#160;for&#160;<br/>a&#160;FIFO&#160;based&#160;sorting&#160;of&#160;the&#160;instances&#160;of&#160;its&#160;own&#160;queued&#160;I-PDUs.&#160;&#160;<br/>The&#160;queue&#160;depth&#160;can&#160;be&#160;configured&#160;for each&#160;routing&#160;path&#160;independently.&#160;<br/>If&#160;the&#160;transmission&#160;of&#160;an&#160;I-PDU&#160;failed&#160;(negative&#160;return&#160;value&#160;of&#160;the&#160;interface&#160;layer&#160;transmit&#160;<br/>request),&#160;&#160;the&#160;&#160;PDU&#160;&#160;Router&#160;&#160;removes&#160;&#160;the&#160;&#160;I-PDUs&#160;&#160;instance&#160;&#160;from&#160;&#160;the&#160;&#160;queue&#160;&#160;and&#160;&#160;retries&#160;&#160;the&#160;<br/>transmission&#160;with&#160;the&#160;next&#160;instance&#160;–&#160;until&#160;the&#160;queue&#160;is&#160;empty&#160;or&#160;the&#160;transmission&#160;request&#160;<br/>is accepted.&#160;<br/>In&#160;case&#160;of&#160;a&#160;buffer&#160;overrun,&#160;all&#160;queued&#160;I-PDU&#160;instances&#160;of&#160;the&#160;affected&#160;queue&#160;are&#160;removed&#160;<br/>and&#160;the&#160;newly&#160;received&#160;I-PDU&#160;is transmitted.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>EcuC&#160;structural&#160;changes&#160;with&#160;PduR&#160;version&#160;9.00.00&#160;<br/></b>The&#160;PduRTxBufferDepth&#160;has&#160;been&#160;removed&#160;and&#160;was replaced by&#160;the&#160;<br/>
&#160;&#160;PduRDestPduQueueDepth&#160;parameter.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>3.6.3&#160;</b><br/>
<b>Buffer&#160;Configurations&#160;</b><br/>
<b>3.6.3.1&#160;</b><br/>
<b>No Buffer&#160;</b><br/>
No&#160;buffering&#160;will be&#160;used&#160;if&#160;the&#160;PduRDestPduQueueDepth&#160;is not&#160;configured.&#160;<br/>
<b>3.6.3.2&#160;</b><br/>
<b>Direct Data&#160;Provision&#160;FIFO&#160;</b><br/>
A&#160;&#160;FIFO&#160;&#160;queue&#160;&#160;will&#160;&#160;be&#160;&#160;used&#160;&#160;if&#160;&#160;the&#160;&#160;data&#160;&#160;provision&#160;&#160;is&#160;&#160;set&#160;&#160;to&#160;&#160;direct&#160;&#160;transmission&#160;&#160;and&#160;&#160;the&#160;<br/>PduRDestPduQueueDepth&#160;is larger than&#160;zero.&#160;<br/>
<b>3.6.3.3&#160;</b><br/>
<b>Trigger Transmit Data Provision FIFO&#160;</b><br/>
A&#160;&#160;FIFO&#160;&#160;will&#160;&#160;be&#160;&#160;used&#160;&#160;if&#160;&#160;the&#160;&#160;data&#160;&#160;provision&#160;&#160;is&#160;&#160;set&#160;&#160;to&#160;&#160;trigger&#160;&#160;transmit&#160;&#160;and&#160;&#160;the&#160;<br/>PduRDestPduQueueDepth&#160;is larger than&#160;one.&#160;<br/>
<b>3.6.3.4&#160;</b><br/>
<b>Trigger Transmit Data Provision Single&#160;Buffer&#160;</b><br/>
A&#160;&#160;single&#160;&#160;buffer&#160;&#160;will&#160;&#160;be&#160;&#160;used&#160;&#160;if&#160;&#160;the&#160;&#160;data&#160;&#160;provision&#160;&#160;is&#160;&#160;set&#160;&#160;to&#160;&#160;trigger&#160;&#160;transmit&#160;&#160;and&#160;&#160;the&#160;<br/>PduRDestPduQueueDepth&#160;is one.&#160;&#160;<br/>Last&#160;&#160;is&#160;&#160;best&#160;&#160;semantics&#160;&#160;apply.&#160;&#160;Values&#160;&#160;in&#160;&#160;the&#160;&#160;buffer&#160;&#160;will&#160;&#160;be&#160;&#160;overwritten&#160;&#160;so&#160;&#160;that&#160;&#160;a&#160;&#160;Trigger&#160;<br/>Transmit&#160;call&#160;always&#160;gets&#160;the&#160;latest&#160;data&#160;from&#160;the&#160;buffer.&#160;It&#160;is&#160;necessary&#160;to&#160;specify&#160;default&#160;<br/>values&#160;for&#160;the&#160;buffer,&#160;as&#160;the&#160;Trigger&#160;Transmit&#160;API&#160;can&#160;be&#160;called&#160;before&#160;any&#160;new&#160;data&#160;was&#160;<br/>written&#160;to&#160;the&#160;buffer.&#160;<br/>
©&#160;2017&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;3.00.00&#160;<br/>
16&#160;<br/>
based&#160;on&#160;template&#160;version&#160;4.9.2&#160;<br/>
<hr/>
<a name=17></a><img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/PduR/doc/TechnicalReference_PduR-17_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/PduR/doc/TechnicalReference_PduR-17_2.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;PDU&#160;Router&#160;<br/>
<b>3.6.4&#160;</b><br/>
<b>Shared Tx&#160;Buffer&#160;Pool&#160;support&#160;</b><br/>
The&#160;&#160;Interface&#160;&#160;Layer&#160;&#160;Gateway&#160;&#160;supports&#160;&#160;shared&#160;&#160;Tx&#160;&#160;Buffer.&#160;&#160;Tx&#160;&#160;Buffer&#160;&#160;can&#160;&#160;be&#160;&#160;assigned&#160;&#160;to&#160;<br/>multiple&#160;routing&#160;paths&#160;at&#160;once.&#160;This&#160;is&#160;useful&#160;for&#160;routing&#160;paths&#160;which&#160;are&#160;not&#160;active&#160;at&#160;the&#160;<br/>same&#160;time.&#160;Thus,&#160;RAM&#160;consumption&#160;can&#160;be&#160;reduced.&#160;<br/>
<b>3.6.5&#160;</b><br/>
<b>Timing aspects&#160;</b><br/>
The&#160;&#160;PDU&#160;&#160;Router&#160;&#160;triggers&#160;&#160;the&#160;&#160;transmission&#160;&#160;of&#160;&#160;I-PDU&#160;&#160;instances&#160;&#160;to&#160;&#160;be&#160;&#160;routed&#160;&#160;as&#160;&#160;soon&#160;&#160;as&#160;<br/>possible.&#160;If&#160;the&#160;queue&#160;is empty,&#160;a&#160;reception&#160;will&#160;directly&#160;cause&#160;a&#160;transmission&#160;request&#160;to&#160;the&#160;<br/>interface&#160;layer.&#160;&#160;If&#160;the&#160;queue&#160;is&#160;occupied,&#160;the&#160;I-PDU&#160;instance&#160;will&#160;&#160;be&#160;added&#160;to&#160;the&#160;queue.&#160;<br/>Queued&#160;&#160;I-PDU&#160;&#160;instances&#160;&#160;are&#160;&#160;transmitted&#160;&#160;within&#160;&#160;the&#160;&#160;Tx&#160;&#160;confirmation&#160;&#160;of&#160;&#160;the&#160;&#160;preceding&#160;<br/>instance.&#160;&#160;This&#160;&#160;queuing&#160;behavior&#160;can&#160;cause&#160;bursts&#160;on&#160;the&#160;destination&#160;channel&#160;(especially&#160;<br/>CAN)&#160;&#160;if&#160;&#160;several&#160;&#160;queue&#160;&#160;instances&#160;&#160;are&#160;&#160;queued&#160;&#160;and&#160;&#160;if&#160;&#160;the&#160;&#160;driver&#160;&#160;layer&#160;&#160;does&#160;&#160;not&#160;&#160;free&#160;&#160;the&#160;<br/>hardware queue.&#160;<br/>The&#160;&#160;PDU&#160;&#160;Router&#160;&#160;does&#160;&#160;not&#160;&#160;provide&#160;&#160;a&#160;&#160;mechanism&#160;&#160;to&#160;&#160;implement&#160;&#160;a&#160;&#160;rate&#160;&#160;conversion&#160;&#160;(e.g.&#160;<br/>change&#160;the&#160;cycle&#160;time&#160;from&#160;the&#160;source&#160;to&#160;the&#160;destination&#160;channel).&#160;A&#160;rate&#160;conversion&#160;can&#160;<br/>be&#160;&#160;implemented&#160;&#160;(at&#160;&#160;extra&#160;&#160;runtime&#160;&#160;costs)&#160;&#160;by&#160;&#160;signal&#160;&#160;routing&#160;&#160;paths&#160;&#160;using&#160;&#160;the&#160;&#160;COM&#160;&#160;signal&#160;<br/>gateway.&#160;<br/>
<b>3.6.6&#160;</b><br/>
<b>Dynamic&#160;DLC&#160;Routing&#160;</b><br/>
With&#160;PduR version&#160;9.00.00&#160;and&#160;later there&#160;is&#160;no&#160;restriction&#160;for the&#160;dynamic length&#160;routing&#160;<br/>for gateway&#160;routing&#160;paths.&#160;&#160;All&#160;lengths&#160;between&#160;0&#160;and&#160;the&#160;configured&#160;PDU&#160;length&#160;can&#160;be&#160;<br/>routed.&#160;The&#160;length&#160;can&#160;be&#160;adapted&#160;dynamically&#160;during&#160;runtime.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Caution&#160;<br/></b>A&#160;Pdu&#160;with a&#160;DLC&#160;larger&#160;than&#160;the&#160;configured&#160;Pdu&#160;length&#160;will&#160;be&#160;truncated&#160;to&#160;the&#160;length&#160;<br/>
<b>&#160;&#160;</b>of&#160;the&#160;smallest&#160;available buffer&#160;of&#160;this&#160;routing&#160;path.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>3.6.7&#160;</b><br/>
<b>Transport protocol&#160;low&#160;level&#160;routing&#160;</b><br/>
If&#160;the&#160;TP&#160;segments&#160;(N-PDUs)&#160;on&#160;the&#160;source&#160;and&#160;the&#160;destination&#160;network&#160;are&#160;identical,&#160;it&#160;is&#160;<br/>possible&#160;to&#160;route&#160;TP&#160;I-PDUs&#160;using&#160;the&#160;interface&#160;layer&#160;gateway&#160;(“low-level”&#160;routing).&#160;If&#160;low-<br/>level&#160;&#160;routing&#160;&#160;is&#160;&#160;used,&#160;&#160;the&#160;&#160;(former)&#160;&#160;N-PDU&#160;&#160;is&#160;&#160;no&#160;&#160;longer&#160;&#160;accessible&#160;&#160;to&#160;&#160;the&#160;&#160;TP&#160;&#160;layer&#160;&#160;and&#160;<br/>therefore seen&#160;as an&#160;I-PDU&#160;by&#160;the&#160;PDU&#160;Router module.&#160;<br/>The&#160;advantage&#160;of&#160;low-level&#160;routing&#160;is&#160;that&#160;it&#160;is&#160;executed&#160;in&#160;the&#160;context&#160;of&#160;the&#160;interface&#160;layer&#160;<br/>RxIndication&#160;and&#160;therefore introduces&#160;a&#160;minimal routing&#160;latency.&#160;&#160;<br/>Low-level&#160;routing&#160;has,&#160;however,&#160;several&#160;drawbacks&#160;which&#160;might&#160;cause&#160;that&#160;a&#160;high-level TP&#160;<br/>routing&#160;is more&#160;adequate:&#160;<br/><b>&#160;&#160;</b>TP&#160;protocol conversion&#160;is not&#160;possible&#160;as the&#160;frame-layout&#160;and&#160;the&#160;flow-control&#160;<br/>
handling&#160;must&#160;be&#160;the&#160;same&#160;on&#160;the&#160;source&#160;and&#160;the&#160;destination&#160;network.&#160;<br/>
<b>&#160;&#160;</b>No&#160;forwarding&#160;of&#160;routed&#160;TP&#160;I-PDUs to&#160;the&#160;local DCM&#160;is possible&#160;as it&#160;may&#160;be&#160;required&#160;<br/>
for&#160;functional requests.&#160;<br/>
<b>&#160;&#160;</b>Eventual loss&#160;of&#160;TP&#160;parameters, such&#160;as&#160;the&#160;STmin&#160;timing&#160;and&#160;the&#160;block&#160;size,&#160;due&#160;to&#160;<br/>
bursts on&#160;the&#160;destination&#160;bus.&#160;Bursts are&#160;a&#160;result of&#160;queued&#160;I-PDUs which&#160;were&#160;<br/>transmitted&#160;in&#160;the&#160;TxConfirmation&#160;of&#160;the&#160;previous I-PDU.&#160;&#160;<br/>
©&#160;2017&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;3.00.00&#160;<br/>
17&#160;<br/>
based&#160;on&#160;template&#160;version&#160;4.9.2&#160;<br/>
<hr/>
<a name=18></a><img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/PduR/doc/TechnicalReference_PduR-18_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;PDU&#160;Router&#160;<br/>
<b>&#160;&#160;</b>A&#160;buffer&#160;overrun&#160;in&#160;the&#160;FiFo&#160;queue&#160;causes&#160;the&#160;queue&#160;to&#160;be&#160;flushed&#160;and&#160;therefore&#160;<br/>
corrupts&#160;the&#160;TP&#160;communication.&#160;The&#160;TP&#160;layer gateway&#160;can&#160;avoid&#160;buffer overflows if&#160;the&#160;<br/>receiving&#160;TP&#160;connection&#160;supports&#160;a&#160;dynamic&#160;block&#160;size&#160;adaptation.&#160;<br/>
©&#160;2017&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;3.00.00&#160;<br/>
18&#160;<br/>
based&#160;on&#160;template&#160;version&#160;4.9.2&#160;<br/>
<hr/>
<a name=19></a><img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/PduR/doc/TechnicalReference_PduR-19_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;PDU&#160;Router&#160;<br/>
<b>3.6.8&#160;</b><br/>
<b>Smart Learning (Switching)&#160;</b><br/>
The&#160;&#160;PduR&#160;&#160;routing&#160;&#160;path&#160;&#160;relations&#160;&#160;are&#160;&#160;statically&#160;&#160;configured&#160;&#160;and&#160;&#160;cannot&#160;&#160;be&#160;&#160;modified&#160;&#160;during&#160;<br/>runtime.&#160;&#160;In&#160;&#160;case&#160;&#160;ECUs&#160;&#160;will&#160;&#160;be&#160;&#160;attached&#160;&#160;to&#160;&#160;different&#160;&#160;networks&#160;&#160;during&#160;&#160;assembly&#160;&#160;or&#160;&#160;a&#160;&#160;huge&#160;<br/>amount&#160;&#160;of&#160;&#160;possible&#160;&#160;routing&#160;&#160;relations&#160;&#160;will&#160;&#160;be&#160;&#160;required,&#160;&#160;the&#160;&#160;dynamic&#160;&#160;learning&#160;&#160;of&#160;&#160;routing&#160;<br/>relations&#160;can&#160;be&#160;used.&#160;<br/>The&#160;switching&#160;functionality&#160;is&#160;based&#160;on&#160;a&#160;dynamic&#160;RAM&#160;table,&#160;the&#160;forwarding&#160;information&#160;<br/>base&#160;(FIB)&#160;inside&#160;the&#160;PduR.&#160;This&#160;RAM&#160;table&#160;stores&#160;the&#160;location&#160;(network)&#160;of&#160;the&#160;different&#160;<br/>ECUs&#160;and&#160;will&#160;be&#160;used&#160;to&#160;direct&#160;the&#160;routings&#160;to&#160;the&#160;correct&#160;destination.&#160;The&#160;identification&#160;of&#160;<br/>the&#160;communication&#160;partners&#160;is&#160;done&#160;by&#160;a&#160;source-&#160;and&#160;target&#160;address&#160;which&#160;is&#160;determined&#160;<br/>based&#160;&#160;on&#160;&#160;the&#160;&#160;PDU&#160;&#160;meta&#160;&#160;data.&#160;&#160;The&#160;&#160;FIB&#160;&#160;is&#160;&#160;updated&#160;&#160;with&#160;&#160;the&#160;&#160;related&#160;&#160;location&#160;&#160;(called&#160;<br/>connection)&#160;on&#160;reception&#160;of&#160;every&#160;participating&#160;PDU.&#160;&#160;<br/>
<b>Source&#160;address&#160;&#160;Learned destination&#160;location/connection&#160;<br/></b>0x00&#160;<br/>
Connection&#160;2&#160;<br/>
0x01&#160;<br/>
&lt;not&#160;yet&#160;learned&gt;&#160;<br/>
0x02&#160;<br/>
Connection&#160;0&#160;<br/>
…&#160;<br/>
…&#160;<br/>
Table&#160;3-4&#160;&#160;&#160;Example&#160;FIB&#160;content&#160;after&#160;reception&#160;of&#160;Pdus&#160;from&#160;source&#160;0x00&#160;and&#160;0x02&#160;<br/>
On&#160;&#160;reception&#160;&#160;of&#160;&#160;every&#160;&#160;PDU&#160;&#160;a&#160;&#160;lookup&#160;&#160;in&#160;&#160;the&#160;&#160;FIB&#160;&#160;is&#160;&#160;done&#160;&#160;to&#160;&#160;check&#160;&#160;whether&#160;&#160;the&#160;<br/>location/connection&#160;&#160;of&#160;&#160;the&#160;&#160;target&#160;&#160;address&#160;&#160;is&#160;&#160;already&#160;&#160;known.&#160;&#160;If&#160;&#160;the&#160;&#160;target&#160;&#160;address&#160;<br/>destination&#160;&#160;(FIB&#160;&#160;source&#160;&#160;address)&#160;&#160;is&#160;&#160;not&#160;&#160;yet&#160;&#160;known,&#160;&#160;the&#160;&#160;PDU&#160;&#160;will&#160;&#160;be&#160;&#160;broadcasted&#160;&#160;to&#160;&#160;all&#160;<br/>destinations&#160;&#160;of&#160;&#160;the&#160;&#160;respective&#160;&#160;routing&#160;&#160;path.&#160;&#160;In&#160;&#160;case&#160;&#160;the&#160;&#160;target&#160;&#160;address&#160;&#160;destination&#160;&#160;was&#160;<br/>already&#160;learned&#160;by&#160;the&#160;gateway,&#160;the&#160;PDU&#160;will&#160;be&#160;routed&#160;to&#160;the&#160;learned&#160;destination&#160;instead&#160;<br/>of&#160;the&#160;broadcasting.&#160;<br/>From&#160;the&#160;technical&#160;point&#160;of&#160;view&#160;the&#160;switching&#160;functionality&#160;is&#160;an&#160;add-on&#160;for&#160;the&#160;static&#160;PduR&#160;<br/>routing&#160;path&#160;relations.&#160;The&#160;standard&#160;PduR&#160;routing&#160;paths&#160;are&#160;used&#160;to&#160;describe&#160;all&#160;required&#160;<br/>routing&#160;relations&#160;which&#160;are&#160;necessary&#160;if&#160;no&#160;dynamic&#160;learning&#160;is&#160;available.&#160;This&#160;means&#160;that&#160;<br/>the&#160;routing&#160;paths must&#160;be&#160;configured&#160;in&#160;a&#160;way&#160;that&#160;the&#160;PDUs are broadcasted&#160;to&#160;all&#160;desired&#160;<br/>networks&#160;which&#160;have&#160;possible&#160;destination&#160;ECUs&#160;connected.&#160;This&#160;is&#160;typically&#160;a&#160;1:N&#160;routing&#160;<br/>path&#160;&#160;which&#160;&#160;performs&#160;&#160;a&#160;&#160;broadcasting&#160;&#160;of&#160;&#160;the&#160;&#160;PDU.&#160;&#160;The&#160;&#160;switching&#160;&#160;add-on&#160;&#160;suppresses&#160;&#160;the&#160;<br/>routing&#160;to&#160;the&#160;individual&#160;destinations&#160;based&#160;on&#160;the&#160;FIB&#160;information.&#160;In&#160;case&#160;the&#160;destination&#160;<br/>of&#160;a&#160;single&#160;PDU&#160;/&#160;target&#160;address&#160;is not&#160;yet&#160;known,&#160;the&#160;PDU&#160;will be&#160;routed&#160;to&#160;all&#160;destinations&#160;<br/>of&#160;&#160;the&#160;&#160;1:N&#160;&#160;routing&#160;&#160;path.&#160;&#160;In&#160;&#160;case&#160;&#160;the&#160;&#160;destination&#160;&#160;is&#160;&#160;already&#160;&#160;learned,&#160;&#160;the&#160;&#160;routing&#160;&#160;to&#160;&#160;all&#160;<br/>destinations&#160;except&#160;the&#160;learned&#160;one&#160;is&#160;suppressed.&#160;<br/>
Gateway&#160;ECU<br/>
Gateway&#160;ECU<br/>
ECU0<br/>
ECU1<br/>
ECU2<br/>
ECU0<br/>
ECU1<br/>
ECU2<br/>
CAN0<br/>
CAN1<br/>
CAN2<br/>
&#160; &#160;&#160;<br/>
CAN0<br/>
CAN1<br/>
CAN2<br/>
&#160;<br/>
Figure&#160;3-1&#160;&#160;Example&#160;routing&#160;path&#160;configurations:&#160;Every&#160;ECU&#160;transmits&#160;to&#160;every&#160;other&#160;ECU&#160;(via&#160;N:M&#160;routing&#160;paths)&#160;<br/>
or&#160;ECU0&#160;can&#160;exclusively&#160;broadcast&#160;to&#160;all&#160;other&#160;ECUs.&#160;Other&#160;ECUs&#160;can&#160;only&#160;reach&#160;ECU0&#160;<br/>
©&#160;2017&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;3.00.00&#160;<br/>
19&#160;<br/>
based&#160;on&#160;template&#160;version&#160;4.9.2&#160;<br/>
<hr/>
<a name=20></a><img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/PduR/doc/TechnicalReference_PduR-20_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/PduR/doc/TechnicalReference_PduR-20_2.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;PDU&#160;Router&#160;<br/>
An&#160;&#160;important&#160;&#160;concept&#160;&#160;for&#160;&#160;the&#160;&#160;smart&#160;&#160;learning&#160;&#160;functionality&#160;&#160;is&#160;&#160;the&#160;&#160;usage&#160;&#160;of&#160;&#160;communication&#160;<br/>interface&#160;&#160;range&#160;&#160;routing&#160;&#160;paths&#160;&#160;where&#160;&#160;multiple&#160;&#160;PDUs&#160;&#160;can&#160;&#160;be&#160;&#160;routed&#160;&#160;with&#160;&#160;a&#160;&#160;single&#160;&#160;routing&#160;<br/>path.&#160;For&#160;the&#160;examples&#160;this&#160;means&#160;that&#160;only&#160;three&#160;N:M&#160;or&#160;1:N/N:1&#160;routing&#160;paths&#160;have&#160;to&#160;be&#160;<br/>configured&#160;&#160;between&#160;&#160;the&#160;&#160;networks.&#160;&#160;The&#160;&#160;range&#160;&#160;filters&#160;&#160;of&#160;&#160;the&#160;&#160;Rx&#160;&#160;CAN&#160;&#160;range&#160;&#160;Pdus&#160;&#160;can&#160;&#160;be&#160;<br/>used&#160;to&#160;define&#160;the&#160;concrete&#160;CAN&#160;ID&#160;range&#160;to&#160;be&#160;routed&#160;via&#160;the&#160;routing&#160;paths.&#160;For&#160;further&#160;<br/>information&#160;see&#160;chapte<a href="TechnicalReference_PduRs.html#49">r&#160;6.1.</a>&#160;<br/>The&#160;memorization&#160;of&#160;the&#160;source&#160;/&#160;target&#160;address&#160;locations/networks&#160;is&#160;done&#160;on&#160;the&#160;basis of&#160;<br/>the&#160;actual&#160;extracted&#160;source&#160;/&#160;and&#160;target&#160;addresses&#160;which&#160;are&#160;based&#160;on&#160;the&#160;CAN&#160;ID&#160;of&#160;the&#160;<br/>routed&#160;range&#160;PDUs.&#160;&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Caution&#160;<br/></b>The&#160;PduR&#160;switching&#160;feature&#160;is&#160;only&#160;supported&#160;for&#160;MetaData&#160;Pdus.&#160;Therefore&#160;the&#160;<br/>
<b>&#160;&#160;</b>referenced&#160;routing&#160;paths&#160;in a&#160;PduR&#160;Connection&#160;must&#160;be&#160;MetaData&#160;routing&#160;paths.&#160;<br/>
Currently&#160;only&#160;the&#160;CanIf&#160;supports&#160;the&#160;MetaData&#160;feature.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
&#160;<br/>
The&#160;&#160;switching&#160;&#160;functionality&#160;&#160;is&#160;&#160;automatically&#160;&#160;enabled&#160;&#160;for&#160;&#160;all&#160;&#160;PDUs&#160;&#160;associated&#160;&#160;to&#160;&#160;a&#160;<br/>PduRDataPlane&#160;(see&#160;chapte<a href="TechnicalReference_PduRs.html#20">r&#160;3.6.8.1).</a>&#160;&#160;<br/>
All&#160;entries&#160;of&#160;the&#160;FIB&#160;will&#160;be&#160;set&#160;to&#160;‘not&#160;yet&#160;learned’&#160;during&#160;initialization&#160;of&#160;the&#160;PduR.&#160;This&#160;is&#160;<br/>the&#160;&#160;only&#160;&#160;way&#160;&#160;to&#160;&#160;completely&#160;&#160;‘unlearn’&#160;&#160;the&#160;&#160;FIB&#160;&#160;table.&#160;A&#160;&#160;relearning&#160;&#160;is&#160;&#160;possible&#160;&#160;by&#160;&#160;receiving&#160;<br/>messages&#160;with&#160;the&#160;corresponding&#160;source&#160;address&#160;on&#160;some&#160;other&#160;channel.&#160;The&#160;PduR&#160;will&#160;<br/>then&#160;update&#160;the&#160;connection/location&#160;of&#160;this&#160;address.&#160;<br/>&#160;&#160;<br/>
<b>3.6.8.1&#160;</b><br/>
<b>Configuration&#160;</b><br/>
The&#160;&#160;configuration&#160;&#160;and&#160;&#160;activation&#160;&#160;of&#160;&#160;the&#160;&#160;switching&#160;&#160;functionality&#160;&#160;is&#160;&#160;done&#160;&#160;within&#160;&#160;the&#160;&#160;EcuC&#160;<br/>container&#160;&#160;/MICROSAR/PduR/PduRRoutingTables/PduRDataPlaneTable.&#160;&#160;By&#160;&#160;adding&#160;&#160;a&#160;&#160;new &#160;<br/>PduRDataPlane&#160;an&#160;independent&#160;FIB&#160;RAM&#160;table&#160;will&#160;be&#160;instantiated.&#160;Therefore&#160;it&#160;is&#160;possible&#160;<br/>to&#160;configure&#160;multiple&#160;different&#160;independent&#160;smart&#160;learning&#160;/&#160;switching&#160;behaviors&#160;in&#160;a&#160;single&#160;<br/>gateway.&#160;<br/>
Within&#160;a&#160;PduRDataPlane&#160;the&#160;PduRDataPlane/PduRConnection&#160;containers&#160;are&#160;used&#160;to&#160;assign&#160;<br/>the&#160;&#160;static&#160;&#160;PduR&#160;&#160;routing&#160;&#160;path&#160;&#160;sources&#160;&#160;and&#160;&#160;destinations&#160;&#160;to&#160;&#160;a&#160;&#160;network&#160;&#160;(location).&#160;&#160;A&#160;<br/>PduRConnection&#160;represents&#160;a&#160;single&#160;network.&#160;&#160;<br/>
Gateway&#160;ECU<br/>
Connection_CAN0<br/>
Connection_CAN1<br/>
Connection_CAN1<br/>
ECU0<br/>
ECU1<br/>
ECU2<br/>
CAN0<br/>
CAN1<br/>
CAN2<br/>
&#160;<br/>
Figure&#160;3-2&#160;&#160;Network&#160;specific&#160;assignment&#160;of&#160;PduRRouting&#160;path&#160;sources&#160;and&#160;destinations&#160;to&#160;a&#160;PduRConnection&#160;<br/>
©&#160;2017&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;3.00.00&#160;<br/>
20&#160;<br/>
based&#160;on&#160;template&#160;version&#160;4.9.2&#160;<br/>
<hr/>
<a name=21></a><img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/PduR/doc/TechnicalReference_PduR-21_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;PDU&#160;Router&#160;<br/>
Reference&#160;all&#160;related&#160;PduRRoutingPath/PduRSrcPdu&#160;and&#160;PduRRoutingPath/PduRDestPdu&#160;of&#160;<br/>a&#160;single&#160;network&#160;to&#160;the&#160;PduRConnection&#160;by&#160;the&#160;references&#160;PduRConnection/PduRSrcPduRef&#160;<br/>and&#160;PduRConnection/PduRDestPduRef.&#160;<br/>
&#160;<br/>
The&#160;<br/>
behavior&#160;<br/>
of&#160;<br/>
the&#160;<br/>
switching&#160;<br/>
logic&#160;<br/>
itself&#160;<br/>
is&#160;<br/>
configured&#160;<br/>
in&#160;<br/>
the&#160;<br/>
PduRDataPlane/PduRSwitchingStrategy/PduRSaTaSwitchingStrategy&#160;<br/>
container.&#160;<br/>
The&#160;<br/>
currently&#160;available&#160;strategy&#160;is based&#160;on&#160;source-&#160;and&#160;target&#160;addresses as described&#160;above.&#160;<br/>
Within&#160;the&#160;PduRSaTaSwitchingStrategy&#160;different&#160;strategies&#160;are&#160;supported&#160;to&#160;determine&#160;the&#160;<br/>source-&#160;and&#160;target&#160;address&#160;of&#160;the&#160;PDUs:&#160;<br/><b>&#160;&#160;PduRLinearTaToSaCalculationStrategy&#160;</b><br/>
The&#160;target&#160;address&#160;is the&#160;CAN&#160;ID (contained&#160;in&#160;the&#160;Pdu&#160;meta&#160;data).&#160;The&#160;source&#160;<br/>address&#160;is calculated&#160;by&#160;masking&#160;the&#160;target&#160;address&#160;and&#160;adding&#160;a&#160;linear&#160;offset.&#160;&#160;<br/>
For&#160;PDUs referenced&#160;by&#160;PduRAddOffsetSrcPduRef:&#160;<br/>&#160; &#160;&#160;source address = (target address + offset) &amp; mask&#160;<br/>
For PDUs referenced&#160;by&#160;PduRSubtractOffsetSrcPduRef:&#160;<br/>&#160; &#160;&#160;source address = (target address&#160;-&#160;offset) &amp; mask&#160;<br/>
<b>&#160;&#160;PduRSaTaFromMetaDataCalculationStrategy&#160;</b><br/>
The&#160;source&#160;and&#160;target&#160;address&#160;is&#160;directly&#160;read&#160;from&#160;the&#160;CAN ID contained&#160;in&#160;the&#160;meta&#160;<br/>data.&#160;The&#160;bit access will occur on&#160;the&#160;logical CAN ID extracted&#160;from&#160;the&#160;meta&#160;data.&#160;&#160;<br/>
The&#160;source&#160;address&#160;bit&#160;position&#160;is defined&#160;by&#160;the&#160;PduRSaStartBitPosition&#160;and&#160;<br/>PduRSaEndBitPosition&#160;parameters.&#160;The&#160;target&#160;address&#160;bit&#160;position&#160;is&#160;defined&#160;by&#160;the&#160;<br/>PduRTaStartBitPosition&#160;and&#160;PduRTaEndBitPosition&#160;parameters.&#160;<br/>
Example&#160;bit position&#160;configuration&#160;of&#160;the&#160;CAN ID layout&#160;shown&#160;in<a href="TechnicalReference_PduRs.html#21">&#160;Figure&#160;3-3:</a>&#160;<br/>
PduRSaStartBitPosition:&#160;0&#160;<br/>PduRSaEndBitPosition: &#160;&#160;9&#160;<br/>PduRTaStartBitPosition:&#160;10&#160;<br/>PduRTaEndBitPosition: &#160; 19&#160;<br/>
Message&#160;ID&#160;(29&#160;bit)<br/>
&lt;Reserved&gt;<br/>
Target&#160;Address<br/>
Source&#160;Address<br/>
9bit<br/>
10bit<br/>
10bit<br/>
&#160;<br/>
&#160;<br/>
Figure&#160;3-3&#160;&#160;Example&#160;Extended&#160;CAN&#160;ID&#160;layout&#160;<br/>
&#160;<br/>
©&#160;2017&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;3.00.00&#160;<br/>
21&#160;<br/>
based&#160;on&#160;template&#160;version&#160;4.9.2&#160;<br/>
<hr/>
<a name=22></a><img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/PduR/doc/TechnicalReference_PduR-22_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/PduR/doc/TechnicalReference_PduR-22_2.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;PDU&#160;Router&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>EcuC&#160;structural&#160;changes&#160;with&#160;PduR&#160;version&#160;9.00.00&#160;&#160;<br/></b>&#160;<br/>
&#160;&#160;<b>PduRConnection</b>&#160;<br/>
In&#160;the&#160;previous&#160;versions the&#160;PduRConnection/PduRSrcPduRef&#160;and&#160;<br/>PduRConnection/PduRDestPduRef&#160;parameters&#160;were&#160;used to&#160;separate between&#160;<br/>request&#160;and&#160;response&#160;routing paths.&#160;A&#160;separation&#160;between request&#160;and&#160;response&#160;<br/>routing&#160;paths&#160;does not&#160;exist&#160;anymore.&#160;Instead&#160;the references&#160;are&#160;now&#160;just&#160;used&#160;for&#160;<br/>network&#160;to&#160;PduRSrcPdu&#160;/&#160;PduRDestPdu&#160;mapping.&#160;<br/>An automated&#160;migration&#160;of&#160;the&#160;PduRConnection&#160;references is&#160;not&#160;possible.&#160;Please&#160;<br/>add missing&#160;references&#160;manually.&#160;<br/>
&#160;<br/><b>PduRLinearMappingStrategy&#160;<br/></b>In&#160;the&#160;previous&#160;versions the&#160;mapping&#160;between request&#160;and&#160;response PDUs&#160;was&#160;<br/>configured&#160;in&#160;the&#160;<br/>PduRDataPlane/PduRDataPlaneMappingStrategy/PduRLinearMappingStrategy&#160;<br/>container.&#160;This&#160;container&#160;will&#160;be&#160;automatically&#160;migrated&#160;to&#160;the&#160;new&#160;location&#160;<br/>PduRDataPlane/PduRSwitchingStrategy/PduRSaTaSwitchingStrategy/PduRSaTa<br/>CalculationStrategy/PduRLinearTaToSaCalculationStrategy.&#160;As&#160;described&#160;<br/>above the&#160;separation between request&#160;and&#160;response&#160;routing&#160;paths by&#160;the&#160;<br/>PduRConnection/PduRSrcPduRef&#160;and&#160;PduRConnection/PduRDestPduRef&#160;does&#160;not&#160;<br/>exist&#160;anymore.&#160;Rather&#160;the new&#160;references&#160;<br/>PduRLinearTaToSaCalculationStrategy/PduRAddOffsetSrcPduRef&#160;and&#160;<br/>PduRLinearTaToSaCalculationStrategy/PduRSubtractOffsetSrcPduRef&#160;were&#160;<br/>introduced.&#160;PduRAddOffsetSrcPduRef&#160;must&#160;reference all&#160;PduRSrcPdus&#160;where&#160;the&#160;<br/>offset&#160;shall&#160;be&#160;added&#160;to&#160;the&#160;target&#160;address&#160;to determine&#160;the&#160;related&#160;source&#160;address.&#160;<br/>PDUs&#160;where the&#160;offset&#160;shall&#160;be&#160;subtracted&#160;must&#160;be&#160;referenced&#160;with the&#160;<br/>PduRSubtractOffsetSrcPduRef&#160;references.&#160;<br/>The&#160;AddOffset-&#160;and&#160;SubtractOffsetSrcPduRef&#160;references&#160;are&#160;automatically&#160;<br/>migrated.&#160;Former&#160;PduRSrcPdu&#160;referenced&#160;by&#160;PduRConnection/PduRDestPduRef&#160;are&#160;<br/>migrated&#160;to&#160;PduRAddOffsetSrcPduRef.&#160;Former&#160;PduRSrcPdu&#160;referenced&#160;by&#160;<br/>PduRConnection/PduRSrcPduRef&#160;are&#160;migrated&#160;to&#160;PduRSubtractOffsetSrcPduRef.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
&#160;<br/>
©&#160;2017&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;3.00.00&#160;<br/>
22&#160;<br/>
based&#160;on&#160;template&#160;version&#160;4.9.2&#160;<br/>
<hr/>
<a name=23></a><img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/PduR/doc/TechnicalReference_PduR-23_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/PduR/doc/TechnicalReference_PduR-23_2.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;PDU&#160;Router&#160;<br/>
<b>3.6.8.2&#160;</b><br/>
<b>Example&#160;</b><br/>
Network&#160;topology&#160;is&#160;as&#160;shown&#160;<a href="TechnicalReference_PduRs.html#23">in&#160;Figure&#160;3-4.&#160;</a>The&#160;CAN&#160;ID&#160;layout&#160;is&#160;as&#160;shown&#160;<a href="TechnicalReference_PduRs.html#23">in&#160;Figure&#160;3-5.&#160;<br/></a>Strategy&#160;&#160;PduRSaTaFromMetaDataCalculationStrategy&#160;&#160;used&#160;&#160;(see&#160;&#160;chapte<a href="TechnicalReference_PduRs.html#20">r&#160;&#160;3.6.8.1).&#160;&#160;</a>Routing&#160;<br/>path&#160;configuration&#160;as shown&#160;in<a href="TechnicalReference_PduRs.html#19">&#160;Figure&#160;3-1&#160;</a>(every&#160;ECU&#160;can&#160;broadcast&#160;to&#160;the&#160;other ECUs).&#160;&#160;<br/>
Gateway&#160;ECU<br/>
FIB<br/>
ECU0<br/>
Routing&#160;&#160;logic<br/>
ECU1<br/>
address&#160;=&#160;0x4<br/>
address&#160;=&#160;0x2<br/>
ECU2<br/>
address&#160;=&#160;0x3<br/>
CAN&#160;0<br/>
CAN&#160;1<br/>
CAN&#160;2<br/>
<b>&#160;</b><br/>
Figure&#160;3-4&#160;&#160;Example&#160;switching&#160;network&#160;topology&#160;<br/>
Message&#160;ID&#160;(11&#160;bit)<br/>
&lt;Reserved&gt;<br/>
Target&#160;Address<br/>
Source&#160;Address<br/>
3bit<br/>
4bit<br/>
4bit<br/>
&#160;<br/>
Figure&#160;3-5&#160;&#160;Example&#160;Standard&#160;CAN&#160;ID&#160;layout&#160;<br/>
&#160;<br/>
Figure&#160;3-6&#160;&#160;Example&#160;switching&#160;EcuC&#160;configuration&#160;-&#160;PduRConnection&#160;<br/>
&#160;<br/>
©&#160;2017&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;3.00.00&#160;<br/>
23&#160;<br/>
based&#160;on&#160;template&#160;version&#160;4.9.2&#160;<br/>
<hr/>
<a name=24></a><img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/PduR/doc/TechnicalReference_PduR-24_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/PduR/doc/TechnicalReference_PduR-24_2.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;PDU&#160;Router&#160;<br/>
&#160;<br/>
Figure&#160;3-7&#160;&#160;Example&#160;switching&#160;EcuC&#160;configuration&#160;-&#160;PduRSaTaFromMetaDataCalculationStrategy&#160;<br/>
Example&#160;communication&#160;sequence&#160;and&#160;FIB&#160;contents:&#160;<br/>
&#160;<br/>
1.&#160;ECU0&#160;transmits&#160;the&#160;range&#160;Pdu&#160;with&#160;CAN&#160;ID&#160;<b>0x034</b>.&#160;<br/>
<b>Source&#160;Address&#160;&#160;Learned&#160;location&#160;</b><br/>
This&#160;&#160;means&#160;&#160;ECU0&#160;&#160;uses&#160;&#160;its&#160;&#160;address&#160;&#160;as&#160;&#160;source&#160;<br/>
…&#160;<br/>
…&#160;<br/>
address&#160;(0x4),&#160;and&#160;addresses&#160;ECU2&#160;with&#160;the&#160;target&#160;<br/>
0x02<br/>
address&#160;&#160;0x3.&#160;&#160;The&#160;&#160;PDU&#160;&#160;will&#160;&#160;be&#160;&#160;broadcasted&#160;&#160;to&#160;<br/>
&#160;<br/>
&lt;not&#160;yet&#160;learned&gt;&#160;<br/>
CAN1&#160;and&#160;CAN2&#160;and&#160;the&#160;location&#160;of&#160;ECO0&#160;address&#160;&#160;0x03&#160;<br/>
&lt;not&#160;yet&#160;learned&gt;&#160;<br/>
is updated&#160;in&#160;the&#160;FIB.<br/>
<b>0x04&#160;</b><br/>
<b>Connection_CAN0&#160;</b><br/>
&#160;<br/>
…&#160;<br/>
…&#160;<br/>
&#160;<br/>
2.&#160;ECU2&#160;&#160;responds&#160;&#160;to&#160;&#160;the&#160;&#160;initial&#160;&#160;PDU&#160;&#160;of&#160;&#160;ECU0&#160;&#160;with&#160;&#160;a&#160;<br/>
<b>Source&#160;Address&#160;&#160;Learned&#160;location&#160;</b><br/>
PDU&#160;&#160;with&#160;&#160;CAN&#160;&#160;ID&#160;&#160;<b>0x043</b>.&#160;&#160;The&#160;&#160;PDU&#160;&#160;will&#160;&#160;only&#160;&#160;be&#160;<br/>
…&#160;<br/>
…&#160;<br/>
routed&#160;&#160;to&#160;&#160;CAN0&#160;&#160;because&#160;&#160;the&#160;&#160;location&#160;&#160;of&#160;&#160;the&#160;&#160;target&#160;<br/>
0x02&#160;<br/>
&lt;not&#160;yet&#160;learned&gt;&#160;<br/>
address&#160;(0x4)&#160;was&#160;already&#160;learned&#160;by&#160;the&#160;first&#160;PDU&#160;<br/>
<b>0x03</b><br/>
of&#160;&#160;ECU0.&#160;&#160;Additionally&#160;&#160;the&#160;&#160;location&#160;&#160;of&#160;&#160;ECU2&#160;&#160;is&#160;<br/>
<b>&#160;</b><br/>
<b>Connection_CAN2&#160;</b><br/>
updated&#160;in&#160;the&#160;FIB.<br/>
0x04&#160;<br/>
Connection_CAN0&#160;<br/>
&#160;<br/>
…&#160;<br/>
…&#160;<br/>
&#160;<br/>
3.&#160;Finally&#160;ECU1&#160;transmits&#160;a&#160;PDU&#160;with&#160;CAN&#160;ID&#160;<b>0x032</b>.&#160;<br/>
<b>Source&#160;Address&#160;&#160;Learned&#160;location&#160;</b><br/>
The&#160;PDU&#160;will&#160;only&#160;be&#160;routed&#160;to&#160;CAN2&#160;because&#160;the&#160;<br/>
…&#160;<br/>
…&#160;<br/>
location&#160;&#160;of&#160;&#160;the&#160;&#160;target&#160;&#160;address&#160;&#160;(0x3)&#160;&#160;was&#160;&#160;already&#160;<br/>
<b>0x02&#160;</b><br/>
<b>Connection_CAN1&#160;</b><br/>
learned.&#160;The&#160;FIB&#160;gets&#160;updated&#160;with&#160;the&#160;location&#160;of&#160;<br/>ECU1.<br/>
0x03&#160;<br/>
Connection_CAN2&#160;<br/>
&#160;<br/>
0x04&#160;<br/>
Connection_CAN0&#160;<br/>
…&#160;<br/>
…&#160;<br/>
&#160;<br/>
<b>3.6.9&#160;</b><br/>
<b>Queue&#160;overflow&#160;notification callback&#160;</b><br/>
The&#160;&#160;PDU&#160;&#160;Router&#160;&#160;supports&#160;&#160;a&#160;&#160;Queue&#160;&#160;overflow&#160;&#160;notification&#160;&#160;callback.&#160;&#160;In&#160;&#160;case&#160;&#160;of&#160;&#160;a&#160;<br/>communication&#160;interface&#160;routing&#160;with&#160;unfavorable&#160;&#160;FIFO&#160;&#160;configuration&#160;or&#160;if&#160;the&#160;destination&#160;<br/>bus&#160;&#160;is&#160;&#160;not&#160;&#160;available&#160;&#160;(e.g.&#160;&#160;bus&#160;&#160;off)&#160;&#160;a&#160;&#160;buffer&#160;&#160;overflow&#160;&#160;can&#160;&#160;occur.&#160;&#160;In&#160;&#160;this&#160;&#160;case&#160;&#160;the&#160;&#160;FIFO&#160;&#160;is&#160;<br/>flushed.&#160;&#160;<br/>Additionally&#160;&#160;a&#160;&#160;callback&#160;&#160;could&#160;&#160;be&#160;&#160;configured&#160;&#160;to&#160;&#160;capture&#160;&#160;this&#160;&#160;event&#160;&#160;and&#160;&#160;perform&#160;&#160;error&#160;<br/>handling.&#160;See<a href="TechnicalReference_PduRs.html#25">&#160;Figure&#160;3-8&#160;Overflow&#160;notification&#160;callback configuration.</a>&#160;<br/>
©&#160;2017&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;3.00.00&#160;<br/>
24&#160;<br/>
based&#160;on&#160;template&#160;version&#160;4.9.2&#160;<br/>
<hr/>
<a name=25></a><img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/PduR/doc/TechnicalReference_PduR-25_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/PduR/doc/TechnicalReference_PduR-25_2.png"/><br/>
<img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/PduR/doc/TechnicalReference_PduR-25_3.png"/><br/>
<img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/PduR/doc/TechnicalReference_PduR-25_4.png"/><br/>
<img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/PduR/doc/TechnicalReference_PduR-25_5.png"/><br/>
<img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/PduR/doc/TechnicalReference_PduR-25_6.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;PDU&#160;Router&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Enable&#160;Feature&#160;overflow&#160;notification&#160;callback&#160;</b><br/>
&#160;&#160;<b>&gt;&#160;</b><br/>
PduR_QueueOverflowNotification&#160;activates /&#160;deactivates&#160;a&#160;PduR&#160;<br/>communication&#160;interface&#160;TxBuffer overflow&#160;notification.&#160;<br/>
<b>&gt;&#160;&#160;</b>Set&#160;an&#160;individual error notification&#160;module&#160;name&#160;by&#160;using&#160;<br/>
PduR_ErrorNotificationModuleName&#160;parameter.&#160;This parameter is optional&#160;<br/>and&#160;can&#160;be&#160;left&#160;empty.&#160;‘ErrorNotification’&#160;is used&#160;as&#160;default&#160;value.&#160;<br/>
<b>&#160;</b><br/>
If&#160;the&#160;feature&#160;is&#160;enabled&#160;two additional&#160;source&#160;files&#160;are&#160;generated&#160;to&#160;the&#160;Gendata&#160;folder.&#160;<br/>A&#160;&lt;ErrorNotification&gt;_Cbk.h&#160;file&#160;and a&#160;_&lt;ErrorNotification&gt;_Cbk.c&#160;template&#160;file.&#160;The&#160;<br/>template&#160;contains&#160;the&#160;error&#160;notification&#160;function&#160;which must&#160;be&#160;implemented.&#160;<br/>
<b>&gt;&#160;&#160;</b>Implement&#160;the&#160;error notification&#160;function&#160;and&#160;remove&#160;the&#160;template&#160;<br/>
underscore.&#160;<br/>
Figure&#160;3-8&#160;Overflow&#160;notification&#160;callback&#160;configuration&#160;<br/>
During&#160;runtime&#160;the&#160;error notification&#160;is called&#160;by&#160;the&#160;PDU&#160;Router&#160;in&#160;case&#160;of&#160;a&#160;FIFO&#160;<br/>overflow.&#160;The&#160;lower layer interface&#160;handle&#160;is passed&#160;to&#160;the&#160;notification&#160;callback.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>How&#160;to&#160;get&#160;the&#160;associated&#160;gateway&#160;routing&#160;path&#160;<br/></b>&#160;&#160;<br/>
&#160;<br/>
<b>&gt;&#160;&#160;</b>Open&#160;the&#160;Find&#160;view&#160;and&#160;enter the&#160;destination&#160;PDU&#160;name&#160;with&#160;the&#160;<br/>
associated&#160;handle.&#160;Syntax:&#160;value&#160;==&#160;destination&#160;PDU&#160;name&#160;<br/>
<b>&gt;&#160;&#160;</b>Right&#160;click on&#160;the&#160;PDU&#160;Router&#160;destination&#160;container in&#160;the&#160;result&#160;view&#160;and&#160;<br/>
open&#160;the&#160;reference&#160;using&#160;the&#160;“Show&#160;referenced&#160;item&#160;in”&#160;dialog.&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
Table&#160;3-5&#160;How&#160;to&#160;get&#160;the&#160;associated&#160;gateway&#160;routing&#160;path&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Caution&#160;<br/></b>The&#160;error&#160;notification&#160;function&#160;is&#160;called&#160;in&#160;the&#160;interrupt&#160;context!&#160;Please&#160;keep the&#160;error&#160;<br/>
<b>&#160;&#160;</b>handling&#160;short.&#160;&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
©&#160;2017&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;3.00.00&#160;<br/>
25&#160;<br/>
based&#160;on&#160;template&#160;version&#160;4.9.2&#160;<br/>
<hr/>
<a name=26></a><img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/PduR/doc/TechnicalReference_PduR-26_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/PduR/doc/TechnicalReference_PduR-26_2.png"/><br/>
<img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/PduR/doc/TechnicalReference_PduR-26_3.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;PDU&#160;Router&#160;<br/>
<b>3.7&#160;</b><br/>
<b>Transport Protocol Gateway&#160;</b><br/>
The&#160;TP&#160;layer gateway&#160;allows high-level routing&#160;of&#160;TP&#160;I-PDUs.&#160;&#160;<br/>In&#160;order&#160;to&#160;reduce&#160;runtime&#160;and&#160;memory&#160;consumption,&#160;the&#160;gateway&#160;supports&#160;the&#160;so&#160;called&#160;<br/>routing&#160;on-the-fly&#160;(for&#160;1:1,&#160;1:N&#160;and&#160;N:1&#160;single&#160;and&#160;multiframe&#160;routing&#160;paths).&#160;Depending&#160;on&#160;<br/>the&#160;&#160;“Threshold”&#160;&#160;configuration&#160;&#160;of&#160;&#160;each&#160;&#160;routing&#160;&#160;path,&#160;&#160;the&#160;&#160;gateway&#160;&#160;starts&#160;&#160;with&#160;&#160;the&#160;<br/>transmission&#160;on&#160;the&#160;destination&#160;network&#160;before&#160;the&#160;reception&#160;has&#160;completed&#160;on&#160;the&#160;source&#160;<br/>network.&#160;&#160;<br/>Since&#160;AUTOSAR 4&#160;the&#160;PduR copies&#160;the&#160;data&#160;within&#160;the&#160;PduR_&lt;LoTp&gt;_CopyRxData()&#160;call.&#160;<br/>So&#160;&#160;the&#160;&#160;PduR&#160;&#160;module&#160;&#160;always&#160;&#160;knows&#160;&#160;how&#160;&#160;much&#160;&#160;buffer&#160;&#160;is&#160;&#160;still&#160;&#160;available&#160;&#160;and&#160;&#160;provides&#160;&#160;the&#160;<br/>complete&#160;size&#160;to&#160;the&#160;Tp&#160;module.&#160;The&#160;PduR&#160;is&#160;not&#160;limited&#160;to&#160;linear&#160;buffer&#160;boundaries&#160;like&#160;in&#160;<br/>AUTOSAR 3,&#160;so&#160;the&#160;PduR data&#160;rate&#160;is very&#160;efficient.&#160;&#160;<br/>The&#160;&#160;Tp&#160;&#160;module&#160;&#160;will&#160;&#160;never&#160;&#160;get&#160;&#160;more&#160;&#160;buffer&#160;&#160;within&#160;&#160;one&#160;&#160;PduR_&lt;LoTp&gt;_CopyRxData()&#160;&#160;call&#160;<br/>than&#160;the&#160;PduR provides&#160;to&#160;the&#160;Tp&#160;module.&#160;Therefore the&#160;Tp&#160;modules&#160;should&#160;not&#160;try&#160;to&#160;copy&#160;<br/>more&#160;data&#160;than&#160;the&#160;provided&#160;buffer length.&#160;<br/>
<b>3.7.1&#160;</b><br/>
<b>Multi-Routing&#160;</b><br/>
The&#160;&#160;PduR&#160;&#160;supports&#160;&#160;N:1&#160;&#160;and&#160;&#160;1:N&#160;&#160;routing&#160;paths&#160;&#160;for&#160;&#160;both&#160;&#160;single-&#160;&#160;and&#160;multiframes.&#160;&#160;Each&#160;&#160;of&#160;<br/>these&#160;routing&#160;paths&#160;will&#160;only&#160;occupy&#160;a&#160;single&#160;Tx&#160;Buffer&#160;at&#160;runtime&#160;(if&#160;no&#160;FIFO&#160;behavior&#160;is&#160;<br/>required).&#160;For details on&#160;the&#160;queuing&#160;behavior&#160;refer to&#160;chapte<a href="TechnicalReference_PduRs.html#31">r&#160;3.7.4.</a>&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Note&#160;<br/></b>1:N&#160;gateway&#160;routing&#160;paths&#160;which involve&#160;an&#160;upper&#160;layer&#160;destination&#160;must&#160;be configured&#160;<br/>
&#160;&#160;as a&#160;store&#160;and&#160;forward&#160;routing path.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
&#160;<br/>
<b>3.7.2&#160;</b><br/>
<b>TP&#160;Threshold&#160;</b><br/>
The&#160;Threshold&#160;value&#160;is&#160;used&#160;to…&#160;<br/><b>&#160;&#160;</b>…&#160;define&#160;the&#160;fill level&#160;of&#160;the&#160;buffer&#160;where the&#160;transmission&#160;is triggered&#160;on&#160;the&#160;<br/>
destination&#160;bus.&#160;<b>&#160;</b><br/>
<b>&#160;&#160;</b>…&#160;exclude&#160;buffers&#160;from&#160;the&#160;selection&#160;during&#160;runtime.&#160;This could&#160;be&#160;helpful to&#160;ensure&#160;<br/>
that&#160;small&#160;buffers which&#160;are configured&#160;for single&#160;frames&#160;are not&#160;taken&#160;into&#160;account&#160;for&#160;<br/>long&#160;multi&#160;messages.&#160;If&#160;the&#160;Threshold&#160;is larger than&#160;the&#160;buffer size&#160;it&#160;is ensured&#160;that&#160;<br/>the&#160;PduR will not&#160;use&#160;this buffer to&#160;perform&#160;the&#160;routing.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Note&#160;<br/></b>Small&#160;buffers&#160;can&#160;also be excluded&#160;from&#160;the&#160;selection at&#160;runtime&#160;using&#160;the&#160;<br/>
&#160;&#160;dedicated/shared&#160;Tx&#160;Buffer&#160;pool&#160;support.&#160;All&#160;suitable buffers&#160;can&#160;be&#160;assigned&#160;to&#160;the&#160;<br/>
respective routing&#160;paths.&#160;Only&#160;these&#160;assigned buffers&#160;will&#160;be&#160;used at&#160;runtime.&#160;The&#160;<br/>assigned&#160;buffers&#160;can&#160;also be&#160;shared&#160;between multiple other&#160;routing&#160;paths.&#160;<br/>See&#160;chapter<a href="TechnicalReference_PduRs.html#27">&#160;3.7.3&#160;</a>for&#160;details.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
©&#160;2017&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;3.00.00&#160;<br/>
26&#160;<br/>
based&#160;on&#160;template&#160;version&#160;4.9.2&#160;<br/>
<hr/>
<a name=27></a><img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/PduR/doc/TechnicalReference_PduR-27_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/PduR/doc/TechnicalReference_PduR-27_2.png"/><br/>
Section&#160;1&#160;<br/>
Section&#160;2&#160;<br/>
MetaData&#160;FF&#160;<br/>
CFs&#160;<br/>
CF&#160;size-&#160;1&#160;<br/>
&#160;&#160;&#160;<br/>
&#160;&#160;&#160;<br/>
Technical&#160;Reference&#160;MICROSAR&#160;PDU&#160;Router&#160;<br/>
<b>3.7.2.1&#160;</b><br/>
<b>Restrictions&#160;</b><br/>
The&#160;setting&#160;of&#160;the&#160;TP&#160;Threshold&#160;is&#160;restricted&#160;for&#160;CanTp,&#160;LinTp&#160;and&#160;FrArTp&#160;routing&#160;paths.&#160;<br/>Threshold&#160;values&#160;in&#160;the&#160;shaded&#160;sections&#160;o<a href="TechnicalReference_PduRs.html#27">f&#160;Figure&#160;3-9&#160;</a>are&#160;not&#160;allowed&#160;to&#160;be&#160;configured&#160;for&#160;<br/>these&#160;kind&#160;of&#160;gateway&#160;routings.&#160;&#160;<br/>Each&#160;PduR_&lt;LoTp&gt;_CopyRxData()&#160;call&#160;requires&#160;that&#160;a&#160;complete&#160;consecutive&#160;frame&#160;(CF)&#160;<br/>will&#160;be&#160;copied&#160;to&#160;the&#160;buffer.&#160;If&#160;not&#160;enough&#160;buffer&#160;is&#160;available&#160;the&#160;Tp&#160;tries&#160;again&#160;to&#160;get&#160;more&#160;<br/>buffer.&#160;&#160;But&#160;&#160;the&#160;&#160;PduR&#160;still&#160;&#160;cannot&#160;&#160;dequeue&#160;&#160;data&#160;&#160;because&#160;&#160;the&#160;&#160;threshold&#160;&#160;is&#160;&#160;not&#160;&#160;reached.&#160;&#160;In&#160;<br/>this&#160;situation&#160;there&#160;will&#160;never&#160;be&#160;enough&#160;buffer&#160;space&#160;and&#160;the&#160;routing&#160;will&#160;be&#160;aborted&#160;with&#160;a&#160;<br/>timeout.&#160;&#160;<br/>The&#160;DaVinci&#160;Configurator&#160;validates&#160;this&#160;and&#160;provides&#160;appropriate&#160;Solving-Actions&#160;to&#160;set&#160;a&#160;<br/>suitable&#160;Threshold.&#160;The&#160;recommended&#160;values are adapted&#160;to&#160;the&#160;boundaries.&#160;&#160;<br/>If&#160;just&#160;the&#160;largest&#160;buffer&#160;of<a href="TechnicalReference_PduRs.html#27">&#160;Figure&#160;3-9&#160;</a>should&#160;be&#160;used&#160;for&#160;a&#160;routing&#160;the&#160;Threshold&#160;must&#160;be&#160;<br/>set&#160;to&#160;Section&#160;2.&#160;If&#160;the&#160;routing&#160;should&#160;have&#160;both&#160;buffer&#160;options&#160;the&#160;Threshold&#160;level&#160;must&#160;be&#160;<br/>set&#160;somewhere in&#160;Section&#160;1.&#160;&#160;<br/>
&#160;<br/>
Figure&#160;3-9&#160;&#160;Configured&#160;Tp&#160;Buffer&#160;with&#160;possible&#160;Threshold&#160;ranges&#160;<br/>
&#160;<br/>
<b>3.7.2.2&#160;</b><br/>
<b>Threshold “0”&#160;</b><br/>
Since&#160;&#160;ASR&#160;&#160;4.1.2&#160;&#160;the&#160;&#160;PduR&#160;&#160;module&#160;&#160;supports&#160;&#160;a&#160;&#160;Threshold&#160;&#160;of&#160;&#160;“0”.&#160;&#160;This&#160;&#160;means&#160;&#160;that&#160;&#160;the&#160;<br/>transmission&#160;&#160;will&#160;&#160;be&#160;&#160;triggered&#160;&#160;immediately.&#160;&#160;The&#160;&#160;first&#160;&#160;frame&#160;&#160;of&#160;&#160;some&#160;&#160;Transport&#160;&#160;Protocol&#160;<br/>modules&#160;(J1939Tp&#160;and&#160;FrTp)&#160;does&#160;not&#160;contain&#160;data&#160;but&#160;it&#160;is&#160;required&#160;that&#160;the&#160;transmission&#160;<br/>will&#160;&#160;be&#160;&#160;triggered&#160;&#160;nevertheless.&#160;&#160;For&#160;&#160;further&#160;&#160;details&#160;&#160;refer&#160;&#160;for&#160;&#160;example&#160;&#160;the&#160;&#160;J1939Tp&#160;<br/>specification<a href="TechnicalReference_PduRs.html#4">&#160;[6].</a>&#160;<br/>
<b>3.7.3&#160;</b><br/>
<b>Tx&#160;Buffer&#160;Handling&#160;</b><br/>
Diagnostic&#160;communication&#160;usually&#160;does&#160;not&#160;take&#160;place&#160;within&#160;all&#160;ECUs&#160;at&#160;the&#160;same&#160;time.&#160;<br/>Therefore&#160;a&#160;TP&#160;routing&#160;path&#160;typically&#160;has&#160;no&#160;dedicated&#160;assigned&#160;buffer.&#160;In&#160;order&#160;to&#160;reduce&#160;<br/>the&#160;amount&#160;of&#160;RAM&#160;required&#160;for&#160;queues,&#160;the&#160;Tx&#160;buffers&#160;are&#160;assigned&#160;dynamically&#160;to&#160;active&#160;<br/>TP&#160;routing&#160;paths&#160;and&#160;can&#160;be&#160;reused&#160;in&#160;different&#160;routing&#160;paths automatically.&#160;&#160;<br/>
©&#160;2017&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;3.00.00&#160;<br/>
27&#160;<br/>
based&#160;on&#160;template&#160;version&#160;4.9.2&#160;<br/>
<hr/>
<a name=28></a><img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/PduR/doc/TechnicalReference_PduR-28_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/PduR/doc/TechnicalReference_PduR-28_2.png"/><br/>
<img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/PduR/doc/TechnicalReference_PduR-28_3.png"/><br/>
<img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/PduR/doc/TechnicalReference_PduR-28_4.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;PDU&#160;Router&#160;<br/>
If&#160;a&#160;buffer&#160;is&#160;assigned&#160;to&#160;a&#160;routing&#160;path&#160;during&#160;runtime,&#160;this&#160;buffer&#160;is&#160;exclusively&#160;reserved&#160;<br/>for&#160;this&#160;routing.&#160;If&#160;all&#160;available&#160;buffers&#160;are&#160;occupied,&#160;no&#160;further&#160;routing&#160;is&#160;possible&#160;and&#160;the&#160;<br/>PduR&#160;&#160;signalizes&#160;&#160;the&#160;&#160;state&#160;&#160;“BUFREQ_E_NOT_OK”&#160;&#160;towards&#160;&#160;the&#160;&#160;TP&#160;&#160;module.&#160;&#160;It&#160;&#160;will&#160;&#160;then&#160;<br/>create&#160;an&#160;appropriate&#160;flow-control&#160;frame&#160;depending&#160;on&#160;its&#160;capabilities.&#160;<br/>The&#160;PduR&#160;supports&#160;a&#160;ring&#160;buffer&#160;mechanism.&#160;Due&#160;to&#160;the&#160;AUTOSAR&#160;4&#160;architecture&#160;long&#160;TP&#160;<br/>messages&#160;&#160;can&#160;&#160;now&#160;&#160;be&#160;&#160;routed&#160;&#160;through&#160;&#160;a&#160;&#160;small&#160;&#160;PduRTxBuffer,&#160;&#160;especially&#160;&#160;if&#160;&#160;the&#160;&#160;source&#160;<br/>and&#160;destination&#160;bus have&#160;the&#160;same&#160;data&#160;rate.&#160;<br/>
The&#160;PduRTxBuffer&#160;will&#160;be&#160;released&#160;during&#160;initialization&#160;of&#160;the&#160;PduR&#160;module&#160;and&#160;after&#160;a&#160;<br/>routing&#160;has&#160;terminated&#160;either&#160;successfully&#160;or&#160;with&#160;an&#160;error.&#160;They&#160;can&#160;then&#160;be&#160;allocated&#160;by&#160;<br/>other&#160;PduRDestPdus&#160;again.&#160;<br/>
The&#160;PduR supports&#160;multiple&#160;Tx&#160;Buffer&#160;assignment&#160;strategies&#160;to&#160;support different&#160;usecases.&#160;<br/>
<b>3.7.3.1&#160;</b><br/>
<b>Tx&#160;Buffer&#160;Usage&#160;Types&#160;</b><br/>
A&#160;PduRTxBuffer can&#160;either be&#160;referenced&#160;by&#160;zero,&#160;one&#160;or multiple&#160;PduRDestPdus.&#160;&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Note&#160;<br/></b>If&#160;a PduRDestPdu&#160;references&#160;at&#160;least&#160;one PduRTxBuffer,&#160;it&#160;has&#160;only&#160;access&#160;to&#160;this&#160;pool&#160;<br/>
&#160;&#160;of&#160;buffers&#160;and&#160;cannot&#160;use the&#160;global&#160;Tx&#160;Buffer&#160;pool&#160;of&#160;unassigned&#160;PduRTxBuffers.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>3.7.3.1.1&#160;</b><br/>
<b>Dedicated Tx&#160;Buffer&#160;</b><br/>
If&#160;a&#160;PduRTxBuffer&#160;is&#160;referenced&#160;by&#160;only<b>&#160;one</b>&#160;PduRDestPdu,&#160;it&#160;is&#160;called&#160;a&#160;dedicated&#160;Tx&#160;<br/>Buffer.&#160;The&#160;buffer can&#160;only&#160;be&#160;used&#160;by&#160;this&#160;PduRDestPdu.&#160;<br/>
Dedicated&#160;&#160;Tx&#160;&#160;Buffers&#160;&#160;accelerate&#160;&#160;the&#160;&#160;buffer&#160;&#160;search&#160;&#160;algorithm&#160;&#160;as&#160;&#160;the&#160;&#160;amount&#160;&#160;of&#160;&#160;available&#160;<br/>PduRTxBuffer is more&#160;limited&#160;compared&#160;to&#160;a&#160;global&#160;Tx&#160;Buffer Pool&#160;use&#160;case.&#160;<br/>Dedicated&#160;&#160;Tx&#160;&#160;Buffer&#160;&#160;can&#160;&#160;be&#160;&#160;used&#160;&#160;to&#160;&#160;ensure&#160;&#160;the&#160;&#160;availability&#160;&#160;of&#160;&#160;suitable&#160;&#160;Tx&#160;&#160;Buffers&#160;&#160;and&#160;<br/>optimize&#160;the&#160;buffer&#160;for&#160;certain&#160;bus architectures.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Expert&#160;Knowledge&#160;<br/></b>Routing&#160;of&#160;a&#160;functional&#160;request&#160;is&#160;a&#160;typical&#160;use&#160;case&#160;for&#160;a&#160;dedicated&#160;buffer.&#160;For&#160;a&#160;short&#160;<br/>
&#160;&#160;diagnostic&#160;request&#160;it&#160;is&#160;required&#160;to&#160;avoid searching&#160;for&#160;a&#160;buffer&#160;in&#160;the&#160;global&#160;Tx&#160;buffer&#160;<br/>
pool.&#160;If&#160;a&#160;dedicated&#160;buffer&#160;is&#160;assigned&#160;to&#160;the&#160;PduRDestPdu,&#160;this&#160;buffer&#160;will&#160;be&#160;used&#160;<br/>during&#160;runtime.&#160;&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Note&#160;<br/></b>Dedicated&#160;Tx&#160;Buffers&#160;raise the&#160;RAM&#160;consumption.&#160;Every&#160;Tx&#160;Buffer&#160;allocates its&#160;needed&#160;<br/>
&#160;&#160;memory&#160;in RAM.&#160;This&#160;memory&#160;will&#160;not&#160;be&#160;shared&#160;with any&#160;other&#160;routing&#160;path.&#160;&#160;<br/>
<b>3.7.3.1.2&#160;</b><br/>
<b>Shared&#160;Tx&#160;Buffer&#160;</b><br/>
If&#160;&#160;a&#160;&#160;PduRTxBuffer&#160;&#160;is&#160;&#160;referenced&#160;&#160;by&#160;&#160;<b>multiple</b>&#160;&#160;PduRDestPdus,&#160;&#160;it&#160;&#160;is&#160;&#160;a&#160;&#160;shared&#160;&#160;Tx&#160;&#160;buffer&#160;<br/>which&#160;can&#160;be&#160;used&#160;by&#160;all&#160;corresponding&#160;PduRDestPdus.&#160;&#160;<br/>
If&#160;&#160;the&#160;&#160;Tx&#160;&#160;buffer&#160;&#160;is&#160;&#160;currently&#160;&#160;used&#160;&#160;by&#160;&#160;a&#160;&#160;PduRDestPdu,&#160;&#160;it&#160;&#160;can’t&#160;&#160;be&#160;&#160;used&#160;&#160;by&#160;&#160;any&#160;&#160;other&#160;<br/>PduRDestPdu&#160;until the&#160;processing&#160;of&#160;the&#160;active&#160;routing&#160;path&#160;is&#160;finished.&#160;&#160;<br/>
©&#160;2017&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;3.00.00&#160;<br/>
28&#160;<br/>
based&#160;on&#160;template&#160;version&#160;4.9.2&#160;<br/>
<hr/>
<a name=29></a><img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/PduR/doc/TechnicalReference_PduR-29_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/PduR/doc/TechnicalReference_PduR-29_2.png"/><br/>
<img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/PduR/doc/TechnicalReference_PduR-29_3.png"/><br/>
<img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/PduR/doc/TechnicalReference_PduR-29_4.png"/><br/>
<img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/PduR/doc/TechnicalReference_PduR-29_5.png"/><br/>
<img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/PduR/doc/TechnicalReference_PduR-29_6.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;PDU&#160;Router&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Expert&#160;Knowledge&#160;<br/></b>A&#160;buffer&#160;pool&#160;configuration&#160;avoids that&#160;a non-suitable buffer&#160;is&#160;used&#160;for&#160;a&#160;routing during&#160;<br/>
&#160;&#160;runtime.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
It&#160;is also&#160;possible&#160;to&#160;share&#160;Tx&#160;Buffers between&#160;communication&#160;interface&#160;and&#160;transport&#160;<br/>protocol routings.&#160;Keep&#160;in&#160;mind&#160;that&#160;an&#160;allocated&#160;buffer is locked&#160;until the&#160;routing&#160;is&#160;<br/>finished.&#160;&#160;<br/>
<b>3.7.3.1.3&#160;</b><br/>
<b>Local&#160;Tx&#160;Buffer&#160;Pool&#160;</b><br/>
If&#160;&#160;one&#160;&#160;PduRDestPdu&#160;&#160;references&#160;&#160;more&#160;&#160;than&#160;&#160;one&#160;&#160;PduRTxBuffer,&#160;&#160;it&#160;&#160;is&#160;&#160;called&#160;&#160;a&#160;&#160;local&#160;&#160;Tx&#160;<br/>Buffer&#160;&#160;Pool.&#160;&#160;These&#160;&#160;can&#160;&#160;either&#160;&#160;be&#160;&#160;dedicated&#160;&#160;PduRTxBuffer&#160;&#160;or&#160;&#160;they&#160;&#160;can&#160;&#160;be&#160;&#160;shared&#160;&#160;with&#160;<br/>other&#160;PduRDestPdus.&#160;A&#160;mix&#160;of&#160;dedicated&#160;and&#160;shared&#160;PduRTxBuffers&#160;is supported.&#160;<br/>
The&#160;corresponding&#160;routing&#160;path&#160;can&#160;only&#160;request&#160;the&#160;referenced&#160;PduRTxBuffers.&#160;<br/>
<b>3.7.3.1.4&#160;</b><br/>
<b>Global&#160;Tx&#160;Buffer&#160;Pool&#160;</b><br/>
A&#160;PduRTxBuffer&#160;which&#160;is&#160;not&#160;referenced&#160;by&#160;any&#160;PduRDestPdu&#160;is&#160;part&#160;of&#160;the&#160;global&#160;Tx&#160;<br/>Buffer&#160;&#160;pool.&#160;&#160;It&#160;&#160;can&#160;&#160;be&#160;&#160;used&#160;&#160;by&#160;&#160;any&#160;&#160;PduRDestPdu&#160;&#160;which&#160;&#160;has&#160;&#160;not&#160;&#160;referenced&#160;&#160;any&#160;<br/>PduRTxBuffer.&#160;<br/>
<b>3.7.3.2&#160;</b><br/>
<b>Example&#160;Configuration&#160;</b><br/>
In&#160;the&#160;example&#160;shown&#160;in<a href="TechnicalReference_PduRs.html#29">&#160;Figure&#160;10&#160;</a>the&#160;buffer&#160;3&#160;belongs&#160;to&#160;the&#160;global&#160;Tx&#160;Buffer&#160;Pool&#160;and&#160;<br/>Buffer&#160;1&#160;and&#160;2&#160;are&#160;dedicated&#160;Tx&#160;Buffers of&#160;Routing&#160;1&#160;(local&#160;Tx&#160;Buffer&#160;Pool).&#160;Routing&#160;2&#160;does&#160;<br/>not&#160;have&#160;a&#160;buffer reference.&#160;This&#160;routing&#160;will&#160;use&#160;buffer&#160;3&#160;from&#160;the&#160;global&#160;Tx&#160;Buffer&#160;Pool.&#160;<br/>
&#160;<br/>
&#160;<br/>
Figure&#160;10&#160;Buffer&#160;pool&#160;configuration&#160;<br/>
&#160;<br/>
<a href="TechnicalReference_PduRs.html#29">Figure&#160;&#160;11&#160;&#160;</a>shows&#160;&#160;a&#160;&#160;shared&#160;&#160;buffer&#160;&#160;pool&#160;&#160;configuration.&#160;&#160;Buffer&#160;&#160;1&#160;&#160;and&#160;&#160;2&#160;&#160;are&#160;&#160;shared&#160;&#160;between&#160;<br/>Routing&#160;1&#160;and&#160;2.&#160;<br/>
&#160;<br/>
&#160;<br/>
Figure&#160;11&#160;Shared&#160;buffer&#160;pool&#160;<br/>
©&#160;2017&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;3.00.00&#160;<br/>
29&#160;<br/>
based&#160;on&#160;template&#160;version&#160;4.9.2&#160;<br/>
<hr/>
<a name=30></a><img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/PduR/doc/TechnicalReference_PduR-30_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/PduR/doc/TechnicalReference_PduR-30_2.png"/><br/>
<img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/PduR/doc/TechnicalReference_PduR-30_3.png"/><br/>
<img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/PduR/doc/TechnicalReference_PduR-30_4.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;PDU&#160;Router&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Caution&#160;<br/></b>If&#160;Routing&#160;1&#160;uses&#160;Buffer&#160;1 and Buffer&#160;2,&#160;Routing&#160;2&#160;will&#160;not&#160;get&#160;a buffer&#160;until&#160;Buffers&#160;are&#160;<br/>
<b>&#160;&#160;</b>released.&#160;Use&#160;shared&#160;buffer&#160;pool&#160;configurations&#160;carefully.&#160;&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
&#160;<br/>
<b>3.7.3.3&#160;</b><br/>
<b>Tx&#160;Buffer&#160;Length&#160;Configuration&#160;</b><br/>
The&#160;&#160;length&#160;&#160;of&#160;&#160;each&#160;&#160;buffer&#160;&#160;element&#160;&#160;is&#160;&#160;configured&#160;&#160;individually&#160;&#160;and&#160;&#160;therefore&#160;&#160;allows&#160;&#160;fine&#160;<br/>adaptations&#160;&#160;according&#160;&#160;to&#160;&#160;the&#160;&#160;use&#160;&#160;case.&#160;&#160;First&#160;&#160;of&#160;&#160;all,&#160;&#160;the&#160;&#160;length&#160;&#160;of&#160;&#160;the&#160;&#160;configured&#160;&#160;buffer&#160;<br/>depends&#160;on&#160;the&#160;Threshold&#160;of&#160;the&#160;configured&#160;routing&#160;paths.&#160;If&#160;the&#160;gateway&#160;assigns&#160;a&#160;buffer&#160;<br/>element&#160;to&#160;a&#160;routing&#160;path&#160;it&#160;is required&#160;that&#160;the&#160;buffer has&#160;at&#160;least&#160;the&#160;size&#160;of&#160;the&#160;Threshold.&#160;<br/>Increase&#160;the&#160;PduRTxBuffer&#160;length&#160;to&#160;adapt&#160;a&#160;high&#160;bus load&#160;on&#160;the&#160;reception&#160;side&#160;to&#160;a&#160;lower&#160;<br/>bandwidth&#160;on&#160;the&#160;transmit side.&#160;<br/>Due&#160;to&#160;the&#160;ring-buffer&#160;mechanism&#160;it&#160;is&#160;not&#160;required&#160;that&#160;a&#160;buffer&#160;element&#160;with&#160;the&#160;size&#160;of&#160;<br/>the&#160;largest&#160;expected&#160;TP&#160;I-PDU&#160;is&#160;configured.&#160;A&#160;buffer&#160;smaller&#160;than&#160;the&#160;routed&#160;I-PDU&#160;can&#160;<br/>result&#160;&#160;in&#160;&#160;wait-frames&#160;&#160;or&#160;&#160;a&#160;&#160;buffer-overflow&#160;&#160;if&#160;&#160;the&#160;&#160;destination&#160;&#160;connection&#160;&#160;is&#160;&#160;slower&#160;&#160;than&#160;&#160;the&#160;<br/>source&#160;connection.&#160;A&#160;buffer&#160;overflow&#160;can&#160;be&#160;avoided&#160;if&#160;the&#160;receiving&#160;TP&#160;connection&#160;allows&#160;<br/>dynamic&#160;adaptation&#160;of&#160;the&#160;block&#160;size&#160;(BS)&#160;(e.g.&#160;CanTp&#160;connection&#160;with&#160;BS&#160;greater&#160;0).&#160;If&#160;a&#160;<br/>BS&#160;of&#160;0&#160;is&#160;used&#160;by&#160;some&#160;of&#160;the&#160;source&#160;TP&#160;connections,&#160;the&#160;configured&#160;buffer&#160;length&#160;should&#160;<br/>be&#160;dimensioned&#160;in&#160;a&#160;way&#160;that&#160;buffer&#160;overflows are avoided.&#160;&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Note&#160;<br/></b>It&#160;might&#160;make&#160;sense&#160;to&#160;configure&#160;a&#160;small&#160;Tp&#160;buffer&#160;(e.g.&#160;7&#160;bytes)&#160;to&#160;allow&#160;single&#160;<br/>
&#160;&#160;frame&#160;routings&#160;without&#160;occupying&#160;a&#160;larger&#160;and&#160;therefore more&#160;“expensive”&#160;buffer&#160;<br/>
for&#160;&#160;this&#160;&#160;task.&#160;&#160;This&#160;&#160;is&#160;&#160;applicable&#160;&#160;for&#160;&#160;both&#160;&#160;local&#160;&#160;and&#160;&#160;global&#160;&#160;Tx&#160;&#160;Buffer&#160;&#160;Pool&#160;<br/>configuration.&#160;Dedicated&#160;assigned&#160;TxBuffer can&#160;be&#160;used&#160;to&#160;avoid&#160;this&#160;problem.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Note&#160;<br/></b>If&#160;Meta&#160;Data&#160;Support&#160;is&#160;enabled&#160;please&#160;consider&#160;that&#160;the&#160;MetaDataLength&#160;must&#160;be&#160;<br/>
&#160;&#160;copied&#160;to&#160;the&#160;Tp&#160;Buffer&#160;additionally.&#160;The&#160;MetaDataLength&#160;should&#160;be&#160;taken&#160;into&#160;account&#160;<br/>
during&#160;the&#160;Tp&#160;buffer&#160;configuration.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
&#160;<br/>
<b>3.7.3.4&#160;</b><br/>
<b>Amount&#160;of&#160;Tx&#160;Buffer&#160;</b><br/>
The&#160;Tp&#160;gateway&#160;requires at&#160;least&#160;one&#160;buffer element&#160;to&#160;allow&#160;the&#160;routing&#160;of&#160;Tp&#160;I-PDUs.&#160;&#160;<br/>The&#160;number&#160;of&#160;buffer&#160;elements&#160;that&#160;have&#160;to&#160;be&#160;configured&#160;depends&#160;on&#160;the&#160;number&#160;of&#160;TP&#160;I-<br/>PDUs that&#160;shall&#160;be&#160;routed&#160;at&#160;the&#160;same&#160;time.&#160;&#160;<br/>For&#160;each&#160;1:N&#160;and&#160;N:1&#160;routing&#160;path&#160;only&#160;one&#160;buffer&#160;element&#160;is&#160;&#160;occupied&#160;at&#160;runtime.&#160;More&#160;<br/>than&#160;one&#160;buffer&#160;element&#160;will be&#160;occupied&#160;if&#160;a&#160;FIFO&#160;behavior is desired.&#160;<br/>As&#160;&#160;the&#160;&#160;buffer&#160;&#160;elements&#160;&#160;are&#160;&#160;not&#160;&#160;assigned&#160;&#160;to&#160;&#160;a&#160;&#160;routing&#160;&#160;path&#160;&#160;statically,&#160;&#160;the&#160;&#160;number&#160;&#160;of&#160;<br/>configured&#160;buffer elements&#160;can&#160;be&#160;smaller than&#160;the&#160;number&#160;of&#160;routing&#160;paths.&#160;&#160;<br/>
©&#160;2017&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;3.00.00&#160;<br/>
30&#160;<br/>
based&#160;on&#160;template&#160;version&#160;4.9.2&#160;<br/>
<hr/>
<a name=31></a><img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/PduR/doc/TechnicalReference_PduR-31_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;PDU&#160;Router&#160;<br/>
<b>3.7.3.5&#160;</b><br/>
<b>Tx&#160;Buffer&#160;Selection&#160;Algorithm&#160;</b><br/>
The&#160;PduR&#160;uses the&#160;following&#160;rules&#160;to&#160;choose&#160;one&#160;of&#160;the&#160;configured&#160;Tx&#160;buffers:&#160;<br/><b>&#160;&#160;</b>If&#160;the&#160;size&#160;of&#160;the&#160;incoming&#160;I-PDU&#160;is smaller than&#160;the&#160;configured&#160;TP&#160;Threshold&#160;the&#160;<br/>
smallest&#160;available&#160;buffer is used&#160;that&#160;can&#160;hold&#160;the&#160;entire&#160;I-PDU.&#160;<br/>
<b>&#160;&#160;</b>If&#160;the&#160;size&#160;of&#160;the&#160;incoming&#160;I-PDU&#160;is larger than&#160;the&#160;configured&#160;TP&#160;Threshold&#160;it&#160;uses&#160;the&#160;<br/>
smallest&#160;Tx&#160;buffer which&#160;can&#160;hold&#160;the&#160;entire&#160;I-PDU.&#160;If&#160;such&#160;a&#160;buffer is not&#160;availabe&#160;it&#160;<br/>will&#160;use&#160;the&#160;largest&#160;available&#160;buffer which&#160;has&#160;a&#160;size&#160;larger than&#160;the&#160;TpThreshold.&#160;&#160;<br/>
<b>&#160;&#160;</b>If&#160;all&#160;buffer&#160;are&#160;occupied,&#160;the&#160;buffer request&#160;is&#160;rejected&#160;and&#160;the&#160;TP&#160;I-PDU&#160;is not&#160;routed.&#160;<br/>
<b>3.7.4&#160;</b><br/>
<b>TP&#160;Queue&#160;</b><br/>
Every&#160;&#160;destination&#160;&#160;PDU&#160;&#160;can&#160;&#160;be&#160;&#160;configured&#160;&#160;to&#160;&#160;use&#160;&#160;a&#160;&#160;queue&#160;&#160;to&#160;&#160;buffer&#160;&#160;the&#160;TP&#160;&#160;I-PDUs.&#160;&#160;The&#160;<br/>amount&#160;&#160;of&#160;&#160;I-PDUs&#160;&#160;which&#160;&#160;will&#160;&#160;be&#160;&#160;buffered&#160;&#160;can&#160;&#160;be&#160;&#160;configured&#160;&#160;with&#160;&#160;the&#160;&#160;Dest&#160;&#160;PDU&#160;&#160;Queue&#160;<br/>Depth&#160;parameter.&#160;&#160;<br/>The&#160;&#160;Queue&#160;&#160;supports&#160;&#160;FIFO&#160;&#160;behavior.&#160;&#160;This&#160;&#160;means&#160;&#160;that&#160;&#160;the&#160;&#160;first&#160;&#160;started&#160;&#160;source&#160;&#160;TP&#160;<br/>connection&#160;is&#160;transmitted&#160;to&#160;the&#160;destination&#160;first.&#160;<br/>TP&#160;Queues&#160;are supported&#160;for the&#160;following&#160;routing&#160;paths:&#160;<br/><b>&#160;&#160;</b>1:1&#160;routing&#160;path&#160;<br/>
<b>&#160;&#160;</b>1:N routing&#160;path&#160;(Queue&#160;Depth&#160;must&#160;be&#160;equal&#160;for all destinations)&#160;<br/>
<b>&#160;&#160;</b>N:1&#160;routing&#160;path&#160;(Queue&#160;Depth&#160;must&#160;be&#160;equal&#160;for all DestPdus&#160;which&#160;reference&#160;the&#160;<br/>
one&#160;common&#160;destination&#160;global&#160;PDU)&#160;<br/>
Multiple&#160;I-PDUs&#160;from&#160;different&#160;source&#160;connections&#160;can&#160;be&#160;received&#160;at&#160;once&#160;on&#160;N:1&#160;routing&#160;<br/>paths,&#160;as&#160;long&#160;as&#160;the&#160;TP&#160;Queue&#160;is&#160;not&#160;full.&#160;For&#160;routing&#160;paths&#160;with&#160;only&#160;one&#160;possible&#160;source&#160;<br/>Tp&#160;connection&#160;(1:1,&#160;1:N),&#160;only&#160;one&#160;I-PDU&#160;can&#160;be&#160;received&#160;at&#160;once.&#160;If&#160;the&#160;transmission&#160;on&#160;<br/>the&#160;&#160;destination&#160;&#160;side&#160;&#160;is&#160;&#160;delayed,&#160;&#160;multiple&#160;&#160;I-PDU&#160;&#160;instances&#160;&#160;which&#160;&#160;were&#160;&#160;received&#160;&#160;on&#160;&#160;the&#160;<br/>source&#160;Tp&#160;connection&#160;are stored&#160;in&#160;the&#160;queue.&#160;<br/>The&#160;&#160;default&#160;&#160;value&#160;&#160;for&#160;&#160;the&#160;&#160;Dest&#160;&#160;Pdu&#160;&#160;Queue&#160;&#160;Depth&#160;&#160;is&#160;&#160;2.&#160;&#160;This&#160;&#160;corresponds&#160;&#160;to&#160;&#160;the&#160;&#160;back-to-<br/>back routing&#160;behavior.&#160;After one&#160;TP&#160;I-PDU&#160;was received&#160;successfully it&#160;is transmitted&#160;to&#160;the&#160;<br/>destination&#160;&#160;and&#160;&#160;another&#160;&#160;instance&#160;&#160;of&#160;&#160;the&#160;&#160;I-PDU&#160;&#160;can&#160;&#160;be&#160;&#160;received&#160;&#160;on&#160;&#160;the&#160;&#160;same&#160;&#160;TP&#160;<br/>connection.&#160;Basically&#160;every&#160;queue&#160;with&#160;a&#160;depth&#160;greater&#160;than&#160;one&#160;can&#160;store&#160;multiple&#160;TP&#160;I-<br/>PDUs.&#160;&#160;<br/>A&#160;&#160;TP&#160;&#160;queue&#160;&#160;does&#160;&#160;not&#160;&#160;reserve&#160;&#160;the&#160;&#160;actual&#160;&#160;memory&#160;&#160;location&#160;&#160;for&#160;&#160;the&#160;&#160;Pdu.&#160;&#160;This&#160;&#160;is&#160;&#160;done&#160;<br/>dynamically&#160;&#160;at&#160;&#160;runtime.&#160;&#160;TP&#160;&#160;buffer&#160;&#160;will&#160;&#160;be&#160;&#160;assigned&#160;&#160;to&#160;&#160;the&#160;&#160;queue,&#160;&#160;if&#160;&#160;it&#160;&#160;requests&#160;&#160;to&#160;&#160;store&#160;&#160;a&#160;<br/>new&#160;I-PDU.&#160;In&#160;case&#160;there&#160;are&#160;no&#160;suitable&#160;TP&#160;buffer&#160;available,&#160;the&#160;StartOfReception&#160;call&#160;will&#160;<br/>be&#160;rejected.&#160;<br/>
<b>3.7.5&#160;</b><br/>
<b>Error&#160;Handling&#160;</b><br/>
If&#160;one&#160;of&#160;the&#160;source&#160;or&#160;destination&#160;TP&#160;components&#160;that&#160;are&#160;involved&#160;in&#160;a&#160;TP&#160;data&#160;transfer&#160;<br/>stops&#160;&#160;its&#160;&#160;transmission&#160;&#160;or&#160;&#160;reception&#160;&#160;due&#160;&#160;to&#160;&#160;an&#160;&#160;error&#160;&#160;(e.g.&#160;&#160;a&#160;&#160;timeout&#160;&#160;has&#160;&#160;occurred),&#160;&#160;the&#160;<br/>corresponding&#160;&#160;TP-routing&#160;&#160;relation&#160;&#160;and&#160;&#160;buffer-element&#160;&#160;will&#160;&#160;be&#160;&#160;released.&#160;&#160;The&#160;&#160;next&#160;&#160;buffer&#160;<br/>request&#160;on&#160;the&#160;not&#160;yet&#160;aborted&#160;Tp&#160;connection&#160;will&#160;return&#160;&#34;BUFREQ_E_NOT_OK&#34;&#160;and&#160;will&#160;<br/>release&#160;the&#160;Tp&#160;connection.&#160;<br/>&#160;<br/>
©&#160;2017&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;3.00.00&#160;<br/>
31&#160;<br/>
based&#160;on&#160;template&#160;version&#160;4.9.2&#160;<br/>
<hr/>
<a name=32></a><img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/PduR/doc/TechnicalReference_PduR-32_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/PduR/doc/TechnicalReference_PduR-32_2.png"/><br/>
<img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/PduR/doc/TechnicalReference_PduR-32_3.png"/><br/>
<img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/PduR/doc/TechnicalReference_PduR-32_4.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;PDU&#160;Router&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Info&#160;<br/></b>There is no&#160;AUTOSAR&#160;mechanism&#160;which notifies the&#160;other&#160;TP&#160;component&#160;side&#160;of&#160;an&#160;<br/>
&#160;&#160;error&#160;during the&#160;reception or&#160;transmission.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
&#160;<br/>
<b>3.7.6&#160;</b><br/>
<b>Meta Data Handling&#160;</b><br/>
Since&#160;&#160;ASR&#160;&#160;4.1.2&#160;&#160;the&#160;&#160;StartOfReception()&#160;&#160;API&#160;&#160;was&#160;&#160;extended&#160;&#160;by&#160;&#160;the&#160;&#160;“PduInfoPtr”.&#160;&#160;This&#160;<br/>parameter can&#160;be&#160;used&#160;to&#160;transmit Meta&#160;Data.&#160;<br/>In&#160;case&#160;of&#160;a&#160;gateway&#160;routing&#160;the&#160;payload&#160;provided&#160;in&#160;the&#160;“PduInfoPtr”&#160;will be&#160;ignored&#160;by&#160;the&#160;<br/>PduR.&#160;&#160;Just&#160;&#160;Meta&#160;&#160;Data&#160;&#160;are&#160;&#160;buffered&#160;&#160;and&#160;&#160;transmitted&#160;&#160;via&#160;&#160;the&#160;&#160;&lt;LL&gt;_Transmit&#160;&#160;function.&#160;&#160;In&#160;<br/>case&#160;of&#160;forwarding&#160;to&#160;an&#160;upper&#160;layer&#160;module&#160;(e.g.&#160;&#160;DCM&#160;&#160;or&#160;CDD&#160;)&#160;the&#160;payload&#160;and&#160;Meta&#160;<br/>Data&#160;&#160;will&#160;&#160;be&#160;&#160;forwarded&#160;&#160;and&#160;&#160;the&#160;&#160;upper&#160;&#160;layer&#160;&#160;must&#160;&#160;extract&#160;&#160;the&#160;&#160;Meta&#160;&#160;Data&#160;&#160;according&#160;&#160;the&#160;<br/>configured&#160;Meta&#160;Data&#160;length.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Caution&#160;<br/></b>The&#160;length&#160;of&#160;the&#160;“PduInfoPtr”&#160;does&#160;not&#160;contain&#160;the “MetaDataLength”&#160;information.&#160;The&#160;<br/>
<b>&#160;&#160;</b>length&#160;parameter&#160;represents&#160;the&#160;I-PDU&#160;total&#160;length.&#160;Each&#160;module&#160;must&#160;copy&#160;the&#160;<br/>
MetaData&#160;from&#160;the&#160;”PduInfoPtr”&#160;according&#160;the&#160;configured&#160;“MetaDataLength”.&#160;Do&#160;<b>not&#160;<br/>use</b>&#160;the&#160;length&#160;of&#160;the&#160;“PduInfoPtr”&#160;to copy&#160;“MetaData”&#160;from&#160;the&#160;“PduInfoPtr”.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Caution&#160;<br/></b>The&#160;lower&#160;layer&#160;module&#160;must&#160;provide&#160;the&#160;complete&#160;payload in&#160;the&#160;CopyRxData()&#160;<br/>
<b>&#160;&#160;</b>function&#160;&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
&#160;<br/>
©&#160;2017&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;3.00.00&#160;<br/>
32&#160;<br/>
based&#160;on&#160;template&#160;version&#160;4.9.2&#160;<br/>
<hr/>
<a name=33></a><img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/PduR/doc/TechnicalReference_PduR-33_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;PDU&#160;Router&#160;<br/>
<b>4&#160;&#160;Integration&#160;</b><br/>
This&#160;chapter&#160;gives&#160;necessary&#160;information&#160;for&#160;the&#160;integration&#160;of&#160;the&#160;MICROSAR&#160;PDUR&#160;into&#160;<br/>an&#160;application&#160;environment&#160;of&#160;an&#160;ECU.&#160;<br/>
<b>4.1&#160;</b><br/>
<b>Scope&#160;of&#160;Delivery&#160;</b><br/>
The&#160;delivery&#160;of&#160;the&#160;PDUR&#160;contains&#160;the&#160;files&#160;which&#160;are&#160;described&#160;in&#160;the&#160;chapte<a href="TechnicalReference_PduRs.html#33">rs&#160;4.1.1&#160;</a>and&#160;<br/><a href="TechnicalReference_PduRs.html#33">4.1.2:</a>&#160;<br/>
<b>4.1.1&#160;</b><br/>
<b>Static&#160;Files&#160;</b><br/>
<b>File&#160;</b><br/>
<b>Source&#160;Code&#160;&#160;Description&#160;</b><br/>
<b>Name&#160;&#160;Delivery&#160;<br/></b>PduR.c&#160;<br/>
&#160;<br/>
This&#160;is&#160;the&#160;source&#160;file of&#160;the&#160;PDUR&#160;<br/>
PduR.h&#160;<br/>
&#160;<br/>
This&#160;is&#160;the&#160;header&#160;file of&#160;PDUR&#160;<br/>
Table&#160;4-1&#160;&#160;&#160;Static&#160;files&#160;<br/>
<b>4.1.2&#160;</b><br/>
<b>Dynamic&#160;Files&#160;</b><br/>
The&#160;dynamic&#160;files are&#160;generated&#160;by&#160;the&#160;configuration&#160;tool&#160;DaVinci Configurator.&#160;<br/>
<b>File&#160;Name&#160;</b><br/>
<b>Description&#160;</b><br/>
PduR_Cfg.h&#160;&#160;&#160;<br/>
This&#160;file contains:&#160;<br/>&#160;global&#160;constant&#160;macros&#160;<br/>&#160;global&#160;function&#160;macros&#160;<br/>&#160;global&#160;data&#160;types&#160;and&#160;structures&#160;<br/>&#160;global&#160;data&#160;prototypes&#160;<br/>&#160;global&#160;function&#160;prototypes&#160;<br/>of&#160;CONFIG-CLASS&#160;PRE-COMPILE&#160;data.&#160;<br/>
PduR_Lcfg.h&#160;<br/>
This&#160;file contains:&#160;<br/>&#160;global&#160;constant&#160;macros&#160;<br/>&#160;global&#160;function&#160;macros&#160;<br/>&#160;global&#160;data&#160;types&#160;and&#160;structures&#160;<br/>&#160;global&#160;data&#160;prototypes&#160;<br/>&#160;global&#160;function&#160;prototypes&#160;<br/>of&#160;CONFIG-CLASS&#160;LINK&#160;data.&#160;<br/>
PduR_Lcfg.c&#160;<br/>
This&#160;file contains:&#160;<br/>&#160;local&#160;constant&#160;macros&#160;<br/>&#160;local&#160;function&#160;macros&#160;<br/>&#160;local&#160;data&#160;types&#160;and structures&#160;<br/>&#160;local&#160;data prototypes&#160;<br/>&#160;local&#160;data&#160;<br/>&#160;global&#160;data&#160;<br/>of&#160;CONFIG-CLASS&#160;LINK&#160;and PRE-COMPILE&#160;data.&#160;<br/>
PduR_PBcfg.h&#160;<br/>
This&#160;file contains:&#160;<br/>
©&#160;2017&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;3.00.00&#160;<br/>
33&#160;<br/>
based&#160;on&#160;template&#160;version&#160;4.9.2&#160;<br/>
<hr/>
<a name=34></a><img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/PduR/doc/TechnicalReference_PduR-34_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;PDU&#160;Router&#160;<br/>
<b>File&#160;Name&#160;</b><br/>
<b>Description&#160;<br/></b>&#160;global&#160;constant&#160;macros&#160;<br/>&#160;global&#160;function&#160;macros&#160;<br/>&#160;global&#160;data&#160;types&#160;and&#160;structures&#160;<br/>&#160;global&#160;data&#160;prototypes&#160;<br/>&#160;global&#160;function&#160;prototypes&#160;<br/>of&#160;CONFIG-CLASS&#160;POST-BUILD&#160;data.&#160;<br/>
PduR_PBcfg.c&#160;<br/>
This&#160;file contains:&#160;<br/>&#160;local&#160;constant&#160;macros&#160;<br/>&#160;local&#160;function&#160;macros&#160;<br/>&#160;local&#160;data&#160;types&#160;and structures&#160;<br/>&#160;local&#160;data prototypes&#160;<br/>&#160;local&#160;data&#160;<br/>&#160;global&#160;data&#160;<br/>of&#160;CONFIG-CLASS&#160;POST-BUILD&#160;data.&#160;<br/>
PduR_Types.h&#160;&#160;This&#160;file&#160;contains&#160;types and&#160;defines&#160;for the&#160;PduR.&#160;<br/>PduR_&lt;Up&gt;.h&#160;&#160;&#160;&#160;This is the&#160;interface&#160;header of&#160;the&#160;PduR to&#160;an&#160;Upper Layer Module.&#160;&#160;<br/>PduR_&lt;Lo&gt;.h&#160;<br/>
This is the&#160;interface&#160;header of&#160;the&#160;PduR to&#160;a&#160;Lower Layer Module&#160;<br/>
Table&#160;4-2&#160;&#160;&#160;Generated&#160;files&#160;<br/>
<b>4.2&#160;</b><br/>
<b>Critical&#160;Sections&#160;</b><br/>
The&#160;critical section&#160;PDUR_EXCLUSIVE_AREA_0&#160;has to&#160;lock global&#160;interrupts&#160;to&#160;protect&#160;<br/>common&#160;critical sections.&#160;<br/>
<b>4.3&#160;</b><br/>
<b>Memory&#160;Section&#160;&#160;</b><br/>
With&#160;PDUR_START_SEC_BUFFER_VAR_NOINIT_8BIT&#160;and&#160;&#160;&#160;<br/>PDUR_STOP_SEC_BUFFER_VAR_NOINIT_8BIT&#160;large&#160;Tx&#160;buffer&#160;can&#160;be&#160;mapped&#160;into&#160;an&#160;<br/>own&#160;memory&#160;section.&#160;<br/>
<b>4.4&#160;</b><br/>
<b>Type&#160;Definitions&#160;</b><br/>
The&#160;types defined&#160;by&#160;the&#160;PDUR&#160;are&#160;described&#160;in&#160;this chapter.&#160;<br/>
<b>Type&#160;Name&#160;</b><br/>
<b>C-Type&#160;&#160;Description&#160;</b><br/>
<b>Value&#160;Range&#160;</b><br/>
PduR_RoutingPathGroupIdType&#160;&#160;uint16&#160;<br/>
Identification&#160;of&#160;the&#160;routing&#160;path&#160;<br/>
unsigned int&#160;<br/>
group.&#160;Routing&#160;path&#160;groups are&#160;<br/>defined in&#160;the&#160;&#160;<br/>PDU&#160;router&#160;configuration.&#160;<br/>
Table&#160;4-3&#160;&#160;&#160;Type&#160;definitions&#160;<br/>
©&#160;2017&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;3.00.00&#160;<br/>
34&#160;<br/>
based&#160;on&#160;template&#160;version&#160;4.9.2&#160;<br/>
<hr/>
<a name=35></a><img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/PduR/doc/TechnicalReference_PduR-35_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/PduR/doc/TechnicalReference_PduR-35_2.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;PDU&#160;Router&#160;<br/>
<b>5&#160;&#160;API&#160;Description&#160;</b><br/>
<b>5.1&#160;</b><br/>
<b>Services&#160;provided by&#160;PDUR&#160;</b><br/>
<b>5.1.1&#160;</b><br/>
<b>PduR_Init&#160;</b><br/>
<b>Prototype&#160;<br/></b>void&#160;<b>PduR_Init&#160;</b>(const PduR_PBConfigType* ConfigPtr)&#160;<br/>
<b>Parameter&#160;</b><br/>
ConfigPtr&#160;<br/>
&gt;&#160;&#160;NULL_PTR in the&#160;PDUR_CONFIGURATION_VARIANT_PRECOMPILE&#160;<br/>
&gt;&#160;&#160;Pointer&#160;to the&#160;PduR&#160;configuration&#160;data in the&#160;<br/>
PDUR_CONFIGURATION_VARIANT_POSTBUILD_LOADABLE&#160;and&#160;<br/>PDUR_CONFIGURATION_VARIANT_POSTBUILD_SELECTABLE&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
void&#160;<br/>
none&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
This&#160;function&#160;initializes&#160;the&#160;PDU Router and&#160;performs&#160;configuration&#160;consistency&#160;checks. If&#160;the initialization&#160;<br/>is&#160;performed&#160;successfully&#160;the&#160;PDU Router&#160;is&#160;in&#160;the&#160;state&#160;PduR_IsInitialized&#160;else&#160;not&#160;PduR_IsInitialized.&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
The&#160;function&#160;is&#160;used&#160;by&#160;the&#160;Ecu State&#160;Manager&#160;<br/>
<b>Caution</b>&#160;<br/>PduR_Init shall&#160;not pre-empt&#160;any&#160;PDU Router function.&#160;&#160;<br/>
&#160;<br/>
Call&#160;Context&#160;<br/>
The&#160;function&#160;must be called&#160;on&#160;task&#160;level.&#160;To avoid problems&#160;calling the PDU Router module uninitialized&#160;it&#160;<br/>is&#160;important that&#160;the&#160;PDU&#160;Router module&#160;is&#160;initialized before interfaced&#160;modules.&#160;<br/>
Table&#160;5-1&#160;&#160;&#160;PduR_Init&#160;<br/>
<b>5.1.2&#160;</b><br/>
<b>PduR_InitMemory&#160;</b><br/>
<b>Prototype&#160;<br/></b>void&#160;<b>PduR_InitMemory&#160;</b>(void)&#160;<br/>
<b>Parameter&#160;</b><br/>
void&#160;<br/>
none&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
void&#160;<br/>
none&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
The&#160;function&#160;initializes&#160;variables,&#160;which cannot&#160;be&#160;initialized&#160;with&#160;the&#160;startup&#160;code.&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
The&#160;function&#160;is&#160;called&#160;by&#160;the application.&#160;<br/>Call&#160;Context&#160;<br/>
©&#160;2017&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;3.00.00&#160;<br/>
35&#160;<br/>
based&#160;on&#160;template&#160;version&#160;4.9.2&#160;<br/>
<hr/>
<a name=36></a><img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/PduR/doc/TechnicalReference_PduR-36_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;PDU&#160;Router&#160;<br/>
The&#160;function&#160;must be called&#160;on&#160;task&#160;level.&#160;<br/>
Table&#160;5-2&#160;&#160;&#160;PduR_InitMemory&#160;<br/>
<b>5.2&#160;</b><br/>
<b>Services&#160;</b><br/>
<b>5.2.1&#160;</b><br/>
<b>PduR_GetVersionInfo&#160;</b><br/>
<b>Prototype&#160;<br/></b>void&#160;<b>PduR_GetVersionInfo&#160;</b>(Std_VersionInfoType* versioninfo)&#160;<br/>
<b>Parameter&#160;</b><br/>
versioninfo&#160;<br/>
Pointer&#160;to&#160;where to store the version&#160;information&#160;of&#160;the&#160;PDU Router.&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
void&#160;<br/>
none&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
Returns&#160;the&#160;version information of&#160;the&#160;PDU&#160;Router.&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
The&#160;function&#160;is&#160;called&#160;by&#160;the application.&#160;<br/>Call&#160;Context&#160;<br/>
The&#160;function&#160;can&#160;be&#160;called&#160;on&#160;interrupt and task&#160;level.&#160;<br/>
Table&#160;5-3&#160;&#160;&#160;PduR_GetVersionInfo&#160;<br/>
<b>5.2.2&#160;</b><br/>
<b>PduR_GetConfigurationId&#160;</b><br/>
<b>Prototype&#160;<br/></b>uint32&#160;<b>PduR_GetConfigurationId&#160;</b>(void)&#160;<br/>
<b>Parameter&#160;</b><br/>
void&#160;<br/>
none&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
uint32&#160;<br/>
uint32&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
Provides&#160;the&#160;unique identifier of&#160;the&#160;PDU Router&#160;configuration.&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
The&#160;function&#160;is&#160;called&#160;by&#160;the application.&#160;<br/>Call&#160;Context&#160;<br/>
The&#160;function&#160;can&#160;be&#160;called&#160;on&#160;interrupt and task&#160;level.&#160;<br/>
Table&#160;5-4&#160;&#160;&#160;PduR_GetConfigurationId&#160;<br/>
<b>5.2.3&#160;</b><br/>
<b>PduR_EnableRouting&#160;</b><br/>
<b>Prototype&#160;<br/></b>void&#160;<b>PduR_EnableRouting&#160;</b>(PduR_RoutingPathGroupIdType id)&#160;<br/>
©&#160;2017&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;3.00.00&#160;<br/>
36&#160;<br/>
based&#160;on&#160;template&#160;version&#160;4.9.2&#160;<br/>
<hr/>
<a name=37></a><img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/PduR/doc/TechnicalReference_PduR-37_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;PDU&#160;Router&#160;<br/>
<b>Parameter&#160;</b><br/>
id&#160;<br/>
Identification&#160;of&#160;the routing&#160;path&#160;group.&#160;Routing&#160;path&#160;groups&#160;are&#160;defined&#160;in the&#160;<br/>PDU router&#160;configuration.&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
void&#160;<br/>
none&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
This&#160;function&#160;enables&#160;a&#160;routing&#160;path group. If&#160;the routing path group&#160;does&#160;not&#160;exist or&#160;is&#160;already&#160;enabled,&#160;<br/>the&#160;function&#160;returns&#160;with no&#160;action.&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
The&#160;function&#160;is&#160;called&#160;by&#160;the BSW&#160;Mode&#160;Manager.&#160;<br/>Call&#160;Context&#160;<br/>
The&#160;function&#160;can&#160;be&#160;called&#160;on&#160;interrupt and task&#160;level&#160;and&#160;has&#160;not to&#160;be&#160;interrupted by&#160;other&#160;<br/>PduR_EnableRouting or&#160;PduR_DisableRouting&#160;calls&#160;for the&#160;same id.&#160;<br/>
Table&#160;5-5&#160;&#160;&#160;PduR_EnableRouting&#160;<br/>
<b>5.2.4&#160;</b><br/>
<b>PduR_DisableRouting&#160;</b><br/>
<b>Prototype&#160;<br/></b>void&#160;<b>PduR_DisableRouting&#160;</b>(PduR_RoutingPathGroupIdType id)&#160;<br/>
<b>Parameter&#160;</b><br/>
id&#160;<br/>
Identification&#160;of&#160;the routing&#160;path&#160;group.&#160;Routing&#160;path&#160;groups&#160;are&#160;defined&#160;in the&#160;<br/>PDU router&#160;configuration.&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
void&#160;<br/>
none&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
This&#160;function&#160;disables&#160;a&#160;routing&#160;path group. If&#160;the routing path group&#160;does&#160;not&#160;exist or&#160;is&#160;already&#160;disabled,&#160;<br/>the&#160;function&#160;returns&#160;with no&#160;action.&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
The&#160;function&#160;is&#160;called&#160;by&#160;the BSW&#160;Mode&#160;Manager.&#160;<br/>Call&#160;Context&#160;<br/>
The&#160;function&#160;can&#160;be&#160;called&#160;on&#160;interrupt and task&#160;level&#160;and&#160;has&#160;not to&#160;be&#160;interrupted by&#160;other&#160;<br/>PduR_EnableRouting or&#160;PduR_DisableRouting&#160;calls&#160;for the&#160;same id.&#160;<br/>
Table&#160;5-6&#160;&#160;&#160;PduR_DisableRouting&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
©&#160;2017&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;3.00.00&#160;<br/>
37&#160;<br/>
based&#160;on&#160;template&#160;version&#160;4.9.2&#160;<br/>
<hr/>
<a name=38></a><img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/PduR/doc/TechnicalReference_PduR-38_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;PDU&#160;Router&#160;<br/>
<b>5.3&#160;</b><br/>
<b>Communication Interface&#160;&#160;</b><br/>
<b>5.3.1&#160;</b><br/>
<b>PduR_&lt;GenericUp&gt;Transmit&#160;</b><br/>
<b>Prototype&#160;<br/></b>Std_ReturnType&#160;<b>PduR_&lt;GenericUp&gt;Transmit&#160;</b>(PduIdType id, PduInfoType*&#160;<br/>info)&#160;<br/>
<b>Parameter&#160;</b><br/>
id&#160;<br/>
ID of&#160;the&#160;&lt;GenericUp&gt;&#160;I-PDU to&#160;be&#160;transmitted&#160;<br/>
info&#160;<br/>
Payload&#160;information&#160;of&#160;the&#160;I-PDU (pointer to&#160;data&#160;and data&#160;length)&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
Std_ReturnType&#160;<br/>
Std_ReturnType&#160;<br/>E_OK&#160;The&#160;request&#160;was&#160;accepted by&#160;the PDU Router&#160;and&#160;by&#160;the&#160;destination&#160;<br/>layer.&#160;<br/>E_NOT_OK&#160;PduR_Init()&#160;has&#160;not been called&#160;<br/>or the&#160;id&#160;is&#160;not&#160;valid&#160;<br/>or the&#160;id&#160;is&#160;not&#160;forwarded&#160;in&#160;this&#160;identity&#160;<br/>or the&#160;info is&#160;not&#160;valid&#160;<br/>or the&#160;request&#160;was&#160;not&#160;accepted by&#160;the destination&#160;layer.&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
The&#160;function&#160;serves&#160;to&#160;request the transmission&#160;of&#160;a&#160;Communication&#160;Interface I-PDU.&#160;The&#160;PDU Router&#160;<br/>evaluates&#160;the upper&#160;layer I-PDU handle&#160;and performs&#160;appropriate handle&#160;and&#160;port conversion.&#160;The&#160;call&#160;is&#160;<br/>routed&#160;to&#160;a&#160;lower&#160;communication&#160;interface module using&#160;the appropriate&#160;I-PDU handle of&#160;the destination&#160;<br/>layer.&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
The&#160;function&#160;is&#160;called&#160;by&#160;an&#160;upper layer.&#160;<br/>Call&#160;Context&#160;<br/>
The&#160;function&#160;can&#160;be&#160;called&#160;on&#160;interrupt and&#160;task&#160;level&#160;and&#160;has&#160;not to&#160;be&#160;interrupted by&#160;other&#160;<br/>PduR_&lt;GenericUp&gt;Transmit calls&#160;for the&#160;same upper&#160;layer&#160;id.&#160;<br/>
Table&#160;5-7&#160;&#160;&#160;PduR_&lt;GenericUp&gt;Transmit&#160;<br/>
<b>5.3.2&#160;</b><br/>
<b>PduR_&lt;GenericLo&gt;RxIndication&#160;</b><br/>
<b>Prototype&#160;<br/></b>void&#160;<b>PduR_&lt;GenericLo&gt;RxIndication&#160;</b>(PduIdType id, const PduInfoType*&#160;<br/>info)&#160;<br/>
<b>Parameter&#160;</b><br/>
id&#160;<br/>
Handle ID of&#160;the received&#160;&lt;GenericLo&gt;&#160;I-PDU.&#160;<br/>
info&#160;<br/>
Payload&#160;information&#160;of&#160;the received&#160;I-PDU (pointer&#160;to data&#160;and&#160;data&#160;length).&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
void&#160;<br/>
none&#160;<br/>
©&#160;2017&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;3.00.00&#160;<br/>
38&#160;<br/>
based&#160;on&#160;template&#160;version&#160;4.9.2&#160;<br/>
<hr/>
<a name=39></a><img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/PduR/doc/TechnicalReference_PduR-39_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;PDU&#160;Router&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
The&#160;function&#160;is&#160;called&#160;by&#160;a lower communication&#160;interface to indicate&#160;the&#160;complete&#160;reception of&#160;a&#160;lower&#160;<br/>communication&#160;interface I-PDU.&#160;The&#160;PDU&#160;Router&#160;evaluates&#160;the&#160;lower communication&#160;interface I-PDU&#160;<br/>handle&#160;and&#160;performs&#160;appropriate&#160;handle and&#160;port conversion.&#160;The&#160;call&#160;is&#160;routed&#160;to&#160;an&#160;upper communication&#160;<br/>interface module&#160;using the&#160;appropriate I-PDU handle&#160;of&#160;the destination&#160;layer.&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
The&#160;function&#160;is&#160;called&#160;by&#160;a lower communication&#160;interface module.&#160;<br/>Call&#160;Context&#160;<br/>
The&#160;function&#160;can&#160;be&#160;called&#160;on&#160;interrupt and task&#160;level&#160;and&#160;has&#160;not to&#160;be&#160;interrupted by&#160;other&#160;<br/>PduR_&lt;GenericLo&gt;RxIndication calls&#160;for the&#160;same a&#160;lower&#160;communication&#160;interface id.&#160;<br/>
Table&#160;5-8&#160;&#160;&#160;PduR_&lt;GenericLo&gt;RxIndication&#160;<br/>
<b>5.3.3&#160;</b><br/>
<b>PduR_&lt;GenericLo&gt;TriggerTransmit&#160;</b><br/>
<b>Prototype&#160;<br/></b>void&#160;<b>PduR_&lt;GenericLo&gt;TriggerTransmit&#160;</b>(PduIdType id, PduInfoType* info)&#160;<br/>
<b>Parameter&#160;</b><br/>
id&#160;<br/>
Handle ID of&#160;the&#160;&lt;GenericLo&gt;&#160;I-PDU that&#160;will&#160;be&#160;transmitted.&#160;<br/>
info&#160;<br/>
Contains&#160;a&#160;pointer to&#160;a buffer (SduDataPtr)&#160;to&#160;where&#160;the SDU&#160;data&#160;shall&#160;be&#160;<br/>copied,&#160;and&#160;the&#160;available&#160;buffer size in SduLengh.&#160;On&#160;return,&#160;the&#160;service&#160;will&#160;<br/>indicate&#160;the&#160;length&#160;of&#160;the copied SDU data&#160;in&#160;SduLength.&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
Std_ReturnType&#160;<br/>
E_OK:&#160;The&#160;SDU has&#160;been&#160;copied and the&#160;SduLength&#160;indicates&#160;the&#160;number&#160;of&#160;<br/>copied&#160;bytes.&#160;<br/>E_NOT_OK:&#160;No&#160;data has&#160;been copied,&#160;because&#160;PduR&#160;is&#160;not&#160;initialized&#160;or&#160;<br/>TxPduId&#160;is&#160;not&#160;valid&#160;or PduInfoPtr&#160;is&#160;NULL_PTR or SduDataPtr&#160;is&#160;NULL_PTR&#160;<br/>or SduLength&#160;is&#160;too small.&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
The&#160;function&#160;is&#160;called&#160;by&#160;a lower layer&#160;communication&#160;interface to request the&#160;TX&#160;I-PDU data&#160;before&#160;<br/>transmission.&#160;The&#160;PDU&#160;Router&#160;evaluates&#160;the lower&#160;layer communication interface&#160;I-PDU&#160;handle&#160;and&#160;<br/>performs&#160;appropriate handle and port conversion.&#160;The&#160;call&#160;is&#160;routed&#160;to an&#160;upper&#160;IF&#160;module using&#160;the&#160;<br/>appropriate I-PDU handles&#160;of&#160;the destination layer.&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
The&#160;function&#160;is&#160;called&#160;by&#160;a lower layer&#160;communication&#160;interface&#160;<br/>Call&#160;Context&#160;<br/>
The&#160;function&#160;can&#160;be&#160;called&#160;on&#160;interrupt and task&#160;level&#160;and&#160;has&#160;not to&#160;be&#160;interrupted by&#160;other&#160;<br/>PduR_&lt;GenericLo&gt;TriggerTransmit calls&#160;for the&#160;same&#160;id.&#160;<br/>
Table&#160;5-9&#160;&#160;&#160;PduR_&lt;GenericLo&gt;TriggerTransmit&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
©&#160;2017&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;3.00.00&#160;<br/>
39&#160;<br/>
based&#160;on&#160;template&#160;version&#160;4.9.2&#160;<br/>
<hr/>
<a name=40></a><img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/PduR/doc/TechnicalReference_PduR-40_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;PDU&#160;Router&#160;<br/>
<b>5.3.4&#160;</b><br/>
<b>PduR_&lt;GenericLo&gt;TxConfirmation&#160;</b><br/>
<b>Prototype&#160;<br/></b>void&#160;<b>PduR_&lt;GenericLo&gt;TxConfirmation&#160;</b>(PduIdType id)&#160;<br/>
<b>Parameter&#160;</b><br/>
id&#160;<br/>
Handle&#160;ID of&#160;the&#160;transmitted lower&#160;layer&#160;communication interface I-PDU.&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
void&#160;<br/>
none&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
The&#160;function&#160;is&#160;called&#160;by&#160;a lower communication&#160;interface to confirm&#160;the complete&#160;transmission&#160;of&#160;a&#160;lower&#160;<br/>communication&#160;interface I-PDU.&#160;The&#160;PDU&#160;Router&#160;evaluates&#160;the&#160;lower communication&#160;interface I-PDU&#160;<br/>handle&#160;and&#160;performs&#160;appropriate&#160;handle and&#160;port conversion.&#160;The&#160;call&#160;is&#160;routed&#160;to&#160;an&#160;upper&#160;layer&#160;<br/>communication&#160;interface module using&#160;the&#160;appropriate&#160;I-PDU&#160;handle&#160;of&#160;the&#160;destination layer.&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
The&#160;function&#160;is&#160;called&#160;by&#160;a lower communication&#160;interface module.&#160;<br/>Call&#160;Context&#160;<br/>
The&#160;function&#160;can&#160;be&#160;called&#160;on&#160;interrupt and task&#160;level&#160;and&#160;has&#160;not to&#160;be&#160;interrupted by&#160;other&#160;<br/>PduR_&lt;GenericLo&gt;TxConfirmation&#160;calls&#160;for the&#160;same lower layer&#160;communication&#160;interface id.&#160;<br/>
Table&#160;5-10&#160;&#160;&#160;PduR_&lt;GenericLo&gt;TxConfirmation&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
©&#160;2017&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;3.00.00&#160;<br/>
40&#160;<br/>
based&#160;on&#160;template&#160;version&#160;4.9.2&#160;<br/>
<hr/>
<a name=41></a><img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/PduR/doc/TechnicalReference_PduR-41_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;PDU&#160;Router&#160;<br/>
<b>5.4&#160;</b><br/>
<b>Transport Protocol&#160;</b><br/>
This&#160;&#160;chapter&#160;&#160;describes&#160;&#160;the&#160;&#160;interfaces&#160;&#160;provided&#160;&#160;to&#160;&#160;Upper&#160;&#160;Layers&#160;&#160;(e.g.&#160;&#160;Dcm,&#160;&#160;ApplTp&#160;&#160;and&#160;<br/>Cdds).&#160;Replace&#160;the&#160;tag&#160;&lt;UpTp&gt;&#160;by&#160;the&#160;MSN of&#160;the&#160;Upper Layer.&#160;<br/>
&#160;<br/>
<b>5.4.1&#160;</b><br/>
<b>PduR_&lt;GenericUpTp&gt;ChangeParameter&#160;</b><br/>
<b>Prototype&#160;<br/></b>Std_ReturnType&#160;<b>PduR_&lt;GenericUpTp&gt;ChangeParameter&#160;</b>(PduIdType id,&#160;<br/>TPParameterType parameter, uint16 value)&#160;<br/>
<b>Parameter&#160;</b><br/>
id&#160;<br/>
ID of&#160;the&#160;&lt;UpTp&gt;&#160;I-PDU&#160;where the&#160;parameter&#160;has&#160;to be changed&#160;<br/>
parameter&#160;<br/>
The&#160;TP&#160;parameter&#160;that&#160;shall&#160;be&#160;changed.&#160;<br/>
value&#160;<br/>
The&#160;new&#160;value&#160;for the&#160;TP&#160;parameter.&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
Std_ReturnType&#160;<br/>
Std_ReturnType&#160;<br/>E_OK:&#160;The&#160;parameter&#160;was&#160;changed successfully.&#160;&#160;<br/>E_NOT_OK:&#160;The&#160;parameter&#160;change&#160;was&#160;rejected.&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
The&#160;function&#160;serves&#160;to&#160;change&#160;a specific&#160;transport protocol&#160;parameter&#160;(e.g. block-size).&#160;<br/>The&#160;PDU Router&#160;evaluates&#160;the&#160;&lt;UpTp&gt;&#160;I-PDU&#160;handle&#160;and&#160;performs&#160;appropriate handle and&#160;port&#160;<br/>conversion.&#160;The&#160;call&#160;is&#160;routed&#160;to&#160;a&#160;lower&#160;TP&#160;module&#160;using&#160;the&#160;appropriate&#160;I-PDU&#160;handle of&#160;the destination&#160;<br/>layer.&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
The&#160;function&#160;is&#160;called&#160;by&#160;&lt;UpTp&gt;.&#160;<br/>Call&#160;Context&#160;<br/>
This&#160;function&#160;can&#160;be&#160;called&#160;on&#160;interrupt and task&#160;level&#160;and&#160;has&#160;not to&#160;be&#160;interrupted by&#160;other&#160;<br/>PduR_&lt;UpTp&gt;ChangeParameter&#160;calls&#160;for the&#160;same id.&#160;<br/>
Table&#160;5-11&#160;&#160;&#160;PduR_&lt;GenericUpTp&gt;ChangeParameter&#160;<br/>
<b>5.4.2&#160;</b><br/>
<b>PduR_&lt;GenericUpTp&gt;CancelReceive&#160;</b><br/>
<b>Prototype&#160;<br/></b>Std_ReturnType&#160;<b>PduR_&lt;GenericUpTp&gt;CancelReceive&#160;</b>(PduIdType id)&#160;<br/>
<b>Parameter&#160;</b><br/>
&#160;id&#160;<br/>
ID&#160;of&#160;the RX&#160;&lt;GenericUp&gt;&#160;I-PDU to&#160;be&#160;cancelled&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
Std_ReturnType&#160;<br/>
Std_ReturnType&#160;<br/>E_OK: &#160;&#160;&#160; &#160;&#160;Cancellation&#160;was&#160;executed successfully&#160;by&#160;the&#160;destination&#160;module.&#160;&#160;<br/>E_NOT_OK: &#160;Cancellation&#160;was&#160;rejected&#160;by&#160;the&#160;destination&#160;module.&#160;<br/>
©&#160;2017&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;3.00.00&#160;<br/>
41&#160;<br/>
based&#160;on&#160;template&#160;version&#160;4.9.2&#160;<br/>
<hr/>
<a name=42></a><img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/PduR/doc/TechnicalReference_PduR-42_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;PDU&#160;Router&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
The&#160;function&#160;serves&#160;to&#160;cancel&#160;the&#160;reception&#160;of&#160;a&#160;TP&#160;layer I-PDU.&#160;<br/>The&#160;PDU Router&#160;evaluates&#160;the&#160;upper&#160;layer transport protocol&#160;I-PDU&#160;handle and&#160;performs&#160;appropriate&#160;<br/>handle&#160;and&#160;port conversion.&#160;The&#160;call&#160;is&#160;routed&#160;to&#160;a lower&#160;TP&#160;module using the appropriate I-PDU handle&#160;of&#160;<br/>the&#160;destination&#160;layer.&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
The&#160;function&#160;is&#160;called&#160;by&#160;an&#160;upper layer transport&#160;protocol&#160;module.&#160;<br/>Call&#160;Context&#160;<br/>
The&#160;function&#160;can&#160;be&#160;called&#160;on&#160;interrupt and task&#160;level&#160;and&#160;has&#160;not to&#160;be&#160;interrupted by&#160;other&#160;<br/>PduR_&lt;GenericUpTp&gt;CancelReceive&#160;calls&#160;for the&#160;same upper layer&#160;id.&#160;<br/>
Table&#160;5-12&#160;&#160;&#160;PduR_&lt;GenericUpTp&gt;CancelReceive&#160;<br/>
<b>5.4.3&#160;</b><br/>
<b>PduR_&lt;GenericUpTp&gt;CancelTransmit&#160;</b><br/>
<b>Prototype&#160;<br/></b>Std_ReturnType&#160;<b>PduR_&lt;GenericUpTp&gt;CancelTransmit&#160;</b>(PduIdType&#160;id)&#160;<br/>
<b>Parameter&#160;</b><br/>
id&#160;<br/>
ID of&#160;the&#160;TX&#160;upper&#160;layer&#160;I-PDU of&#160;the routing&#160;that must be cancelled&#160;in the&#160;<br/>lower&#160;layer&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
Std_ReturnType&#160;<br/>
Std_ReturnType&#160;<br/>E_OK&#160;The&#160;cancellation&#160;request&#160;was&#160;accepted&#160;by&#160;the&#160;PDU Router and&#160;by&#160;the&#160;<br/>TP&#160;layer.&#160;<br/>E_NOT_OK&#160;PduR_Init()&#160;has&#160;not been called&#160;<br/>or the&#160;id&#160;is&#160;not&#160;valid&#160;<br/>or the&#160;id&#160;is&#160;not&#160;forwarded&#160;in&#160;this&#160;identity&#160;<br/>or the&#160;request&#160;was&#160;not accepted by&#160;the&#160;TP&#160;layer.&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
The&#160;function&#160;serves&#160;to&#160;cancel&#160;the&#160;transmission&#160;of&#160;a&#160;TP&#160;layer I-PDU.&#160;<br/>The&#160;PDU Router&#160;evaluates&#160;the&#160;upper&#160;layer transport protocol&#160;I-PDU&#160;handle and&#160;performs&#160;appropriate&#160;<br/>handle&#160;and&#160;port conversion.&#160;The&#160;call&#160;is&#160;routed&#160;to&#160;a lower&#160;TP&#160;module using the appropriate I-PDU handle&#160;of&#160;<br/>the&#160;destination&#160;layer.&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
The&#160;function&#160;is&#160;called&#160;by&#160;an&#160;upper layer transport&#160;protocol&#160;module&#160;&#160;<br/>Call&#160;Context&#160;<br/>
The&#160;function&#160;can&#160;be&#160;called&#160;on&#160;interrupt and task&#160;level&#160;and&#160;has&#160;not to&#160;be&#160;interrupted by&#160;other&#160;<br/>PduR_&lt;GenericUpTp&gt;CancelTransmit&#160;calls&#160;for the&#160;same upper layer&#160;id.&#160;<br/>
Table&#160;5-13&#160;&#160;&#160;PduR_&lt;GenericUpTp&gt;CancelTransmit&#160;<br/>
©&#160;2017&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;3.00.00&#160;<br/>
42&#160;<br/>
based&#160;on&#160;template&#160;version&#160;4.9.2&#160;<br/>
<hr/>
<a name=43></a><img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/PduR/doc/TechnicalReference_PduR-43_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;PDU&#160;Router&#160;<br/>
<b>5.4.4&#160;</b><br/>
<b>PduR_&lt;GenericLoTp&gt;StartOfReception&#160;</b><br/>
<b>Prototype&#160;<br/></b>BufReq_ReturnType&#160;<b>PduR_&lt;GenericLoTp&gt;StartOfReception&#160;</b>(PduIdType id,&#160;<br/>PduInfoType info,&#160;PduLengthType TpSduLength, PduLengthType*&#160;<br/>bufferSizePtr)&#160;<br/>
<b>Parameter&#160;</b><br/>
id&#160;<br/>
ID of&#160;the&#160;&lt;GenericLo&gt;&#160;I-PDU that&#160;will&#160;be&#160;received.&#160;<br/>
info&#160;<br/>
Pointer&#160;to the buffer (SduDataPtr)&#160;contains&#160;MetaData&#160;if&#160;this&#160;feature is&#160;enabled.&#160;&#160;<br/>
TpSduLength&#160;<br/>
Length&#160;of&#160;the entire&#160;&lt;GenericLo&gt;&#160;TP&#160;SDU&#160;which&#160;will&#160;be&#160;received&#160;<br/>
bufferSizePtr&#160;<br/>
Pointer&#160;to&#160;the receive buffer&#160;in the&#160;receiving module.&#160;<br/>&#160;This&#160;parameter&#160;will&#160;be used to compute&#160;Block&#160;Size (BS)&#160;in&#160;the&#160;transport&#160;<br/>protocol&#160;module.&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
BufReq_ReturnType&#160;<br/>
BufReq_ReturnType&#160;BUFREQ_OK&#160;Connection&#160;has&#160;been&#160;accepted.&#160;<br/>bufferSizePtr&#160;indicates&#160;the&#160;available receive buffer.&#160;<br/>BUFREQ_E_NOT_OK&#160;PduR_Init()&#160;has&#160;not&#160;been called&#160;<br/>or the&#160;id&#160;is&#160;not&#160;valid&#160;<br/>or the&#160;id&#160;is&#160;not&#160;forwarded&#160;in&#160;this&#160;identity&#160;<br/>or the&#160;info is&#160;not&#160;valid&#160;<br/>or the&#160;request&#160;was&#160;not accepted by&#160;the upper&#160;layer.&#160;<br/>or no buffer is&#160;available&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
This&#160;function&#160;will&#160;be&#160;called&#160;by&#160;the&#160;lower&#160;layer&#160;at&#160;the start of&#160;receiving&#160;an&#160;I-PDU.&#160;The&#160;I-PDU&#160;might be&#160;<br/>fragmented&#160;into&#160;multiple&#160;N-PDUs&#160;(FF&#160;with one&#160;or more following&#160;CFs)&#160;or might consist of&#160;a&#160;single&#160;N-PDU&#160;<br/>(SF).&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
The&#160;function&#160;is&#160;called&#160;by&#160;lower&#160;layer transport&#160;protocol&#160;module.&#160;<br/>Call&#160;Context&#160;<br/>
The&#160;function&#160;can&#160;be&#160;called&#160;on&#160;interrupt and task&#160;level&#160;and&#160;has&#160;not to&#160;be&#160;interrupted by&#160;other&#160;<br/>PduR_&lt;GenericLoTp&gt;StartOfReception&#160;calls&#160;for the same lower layer&#160;transport&#160;protocol&#160;id.&#160;<br/>
Table&#160;5-14&#160;&#160;&#160;PduR_&lt;GenericLoTp&gt;StartOfReception&#160;<br/>
<b>5.4.5&#160;</b><br/>
<b>PduR_&lt;GenericLoTp&gt;CopyRxData&#160;</b><br/>
<b>Prototype&#160;<br/></b>BufReq_ReturnType&#160;<b>PduR_&lt;GenericLoTp&gt;CopyRxData&#160;</b>(PduIdType id,&#160;<br/>PduInfoType* info, PduLengthType*&#160;bufferSizePtr)&#160;<br/>
<b>Parameter&#160;</b><br/>
id&#160;<br/>
ID of&#160;the&#160;lower&#160;layer transport protocol&#160;I-PDU that&#160;will&#160;be&#160;received.&#160;<br/>
info&#160;<br/>
Pointer&#160;to the buffer (SduDataPtr)&#160;and&#160;its&#160;length&#160;(SduLength) containing&#160;the&#160;<br/>data&#160;to&#160;be copied&#160;by&#160;PDU&#160;Router module in case of&#160;gateway&#160;or upper&#160;layer&#160;<br/>module in&#160;case of&#160;reception.&#160;<br/>
bufferSizePtr&#160;<br/>
Available receive buffer after data&#160;has&#160;been copied.&#160;<br/>
©&#160;2017&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;3.00.00&#160;<br/>
43&#160;<br/>
based&#160;on&#160;template&#160;version&#160;4.9.2&#160;<br/>
<hr/>
<a name=44></a><img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/PduR/doc/TechnicalReference_PduR-44_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;PDU&#160;Router&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
BufReq_ReturnType&#160;<br/>
BufReq_ReturnType&#160;<br/>BUFREQ_OK&#160;Buffer request accomplished successful.&#160;<br/>BUFREQ_E_NOT_OK&#160;PduR_Init()&#160;has&#160;not&#160;been called&#160;<br/>or the&#160;id&#160;is&#160;not&#160;valid&#160;<br/>or the&#160;id&#160;is&#160;not&#160;forwarded&#160;in&#160;this&#160;identity&#160;<br/>or the&#160;info is&#160;not&#160;valid&#160;<br/>or the&#160;request&#160;was&#160;not accepted by&#160;the upper&#160;layer.&#160;<br/>or the&#160;request&#160;length&#160;to&#160;copy&#160;is&#160;greater&#160;than the remaining&#160;buffer size&#160;<br/>BUFREQ_E_OVFL&#160;The&#160;upper&#160;TP&#160;module is&#160;not&#160;able to&#160;receive the&#160;number&#160;of&#160;<br/>bytes.&#160;The&#160;request&#160;was&#160;not&#160;accepted&#160;by&#160;the&#160;upper&#160;layer.&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
This&#160;function&#160;is&#160;called by&#160;the lower&#160;layer&#160;transport protocol&#160;if&#160;data&#160;has&#160;to&#160;be&#160;copied to the&#160;receiving module.&#160;<br/>Parallel&#160;routing&#160;of&#160;several&#160;I-PDU&#160;is&#160;possible.&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
The&#160;function&#160;is&#160;called&#160;by&#160;lower&#160;layer transport&#160;protocol&#160;<br/>Call&#160;Context&#160;<br/>
The&#160;function&#160;can&#160;be&#160;called&#160;on&#160;interrupt and task&#160;level&#160;and&#160;has&#160;not to&#160;be&#160;interrupted by&#160;other&#160;<br/>PduR_&lt;GenericLoTp&gt;CopyRxData calls&#160;for the&#160;same lower&#160;layer transport protocol&#160;id.&#160;<br/>
Table&#160;5-15&#160;&#160;&#160;PduR_&lt;GenericLoTp&gt;CopyRxData&#160;<br/>
<b>5.4.6&#160;</b><br/>
<b>PduR_&lt;GenericLoTp&gt;CopyTxData&#160;</b><br/>
<b>Prototype&#160;<br/></b>BufReq_ReturnType&#160;<b>PduR_&lt;GenericLoTp&gt;CopyTxData&#160;</b>(PduIdType id,&#160;<br/>PduInfoType* info,&#160;RetryInfoType* retry, PduLengthType*&#160;<br/>availableDataPtr)&#160;<br/>
<b>Parameter&#160;</b><br/>
<b>&#160;</b><br/>
id&#160;<br/>
ID of&#160;the&#160;lower&#160;layer I-PDU&#160;that&#160;will&#160;be transmitted.&#160;<br/>
info&#160;<br/>
Pointer&#160;to the destination&#160;buffer and&#160;the&#160;number&#160;of&#160;bytes&#160;to&#160;copy.&#160;<br/>In&#160;case of&#160;gateway&#160;the&#160;PDU Router module&#160;will&#160;copy&#160;otherwise the source&#160;<br/>upper&#160;layer module&#160;will&#160;copy&#160;the data. If&#160;not&#160;enough&#160;transmit data&#160;is&#160;available,&#160;<br/>no&#160;data&#160;is&#160;copied.&#160;The&#160;transport protocol&#160;module&#160;will&#160;retry.&#160;<br/>A&#160;size&#160;of&#160;copy&#160;size of&#160;“0” can&#160;be&#160;used&#160;to indicate&#160;state&#160;changes&#160;in the&#160;retry&#160;<br/>parameter.&#160;<br/>
retry&#160;<br/>
retry&#160;not&#160;supported&#160;yet,&#160;is&#160;always&#160;a&#160;NULL_PTR.&#160;<br/>
availableDataPtr&#160;<br/>
Indicates&#160;the remaining number&#160;of&#160;bytes&#160;that&#160;are available in the PDU Router&#160;<br/>Tx&#160;buffer.&#160;<br/>
©&#160;2017&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;3.00.00&#160;<br/>
44&#160;<br/>
based&#160;on&#160;template&#160;version&#160;4.9.2&#160;<br/>
<hr/>
<a name=45></a><img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/PduR/doc/TechnicalReference_PduR-45_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;PDU&#160;Router&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
BufReq_ReturnType&#160;<br/>
BufReq_ReturnType&#160;<br/>BUFREQ_OK&#160;The&#160;data has&#160;been copied&#160;to&#160;the&#160;transmit buffer successful.&#160;<br/>BUFREQ_E_NOT_OK&#160;PduR_Init()&#160;has&#160;not&#160;been called&#160;<br/>or the&#160;id&#160;is&#160;not&#160;valid&#160;<br/>or the&#160;id&#160;is&#160;not&#160;forwarded&#160;in&#160;this&#160;identity&#160;<br/>or the&#160;info is&#160;not&#160;valid&#160;<br/>or the&#160;request&#160;was&#160;not accepted by&#160;the upper&#160;layer and no&#160;data has&#160;been&#160;<br/>copied.&#160;<br/>BUFREQ_E_BUSY&#160;The&#160;request cannot&#160;be&#160;processed&#160;because&#160;the&#160;TX&#160;data&#160;is&#160;<br/>not available and&#160;no&#160;data&#160;has&#160;been copied.&#160;The&#160;TP&#160;layer might retry&#160;later&#160;the&#160;<br/>copy&#160;process.&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
This&#160;function&#160;is&#160;called by&#160;a&#160;lower layer&#160;transport protocol&#160;module&#160;to&#160;query&#160;the transmit data&#160;of&#160;an&#160;I-PDU&#160;<br/>segment.&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
The&#160;function&#160;is&#160;called&#160;by&#160;a lower layer&#160;transport protocol&#160;module.&#160;<br/>Call&#160;Context&#160;<br/>
The&#160;function&#160;can&#160;be&#160;called&#160;on&#160;interrupt and task&#160;level&#160;and&#160;has&#160;not to&#160;be&#160;interrupted by&#160;other&#160;<br/>PduR_&lt;GenericLoTp&gt;CopyTxData&#160;calls&#160;for the same a&#160;lower&#160;layer&#160;transport protocol&#160;module&#160;id.&#160;<br/>
Table&#160;5-16&#160;&#160;&#160;PduR_&lt;GenericLoTp&gt;CopyTxData&#160;<br/>
<b>5.4.7&#160;</b><br/>
<b>PduR_&lt;GenericLo&gt;TpTxConfirmation&#160;</b><br/>
<b>Prototype&#160;<br/></b>void&#160;<b>PduR_&lt;GenericLo&gt;TpTxConfirmation&#160;</b>(PduIdType id,&#160;Std_ReturnType&#160;<br/>result)&#160;<br/>
<b>Parameter&#160;</b><br/>
id&#160;<br/>
ID of&#160;the&#160;&lt;GenericLo&gt;&#160;I-PDU that&#160;will&#160;be&#160;transmitted.&#160;<br/>
result&#160;<br/>
Result&#160;of&#160;the&#160;TP&#160;transmission&#160;<br/>E_OK&#160; &#160;&#160;&#160; &#160;&#160; &#160;&#160;&#160;The&#160;TP&#160;transmission&#160;has&#160;been completed successfully.&#160;<br/>E_NOT_OK&#160; &#160;PduR_Init()&#160;has&#160;not&#160;been called&#160;<br/>&#160; &#160; &#160; &#160; &#160;&#160; &#160; &#160; &#160;&#160; &#160; &#160;&#160;&#160;or the transmission&#160;was&#160;aborted&#160;<br/>&#160; &#160; &#160; &#160; &#160;&#160; &#160; &#160; &#160;&#160; &#160; &#160;&#160;&#160;or the id is&#160;not&#160;valid&#160;<br/>&#160; &#160; &#160; &#160; &#160;&#160; &#160; &#160; &#160;&#160; &#160; &#160;&#160;&#160;or the id is&#160;not&#160;forwarded&#160;<br/>&#160; &#160; &#160; &#160; &#160;&#160; &#160; &#160; &#160;&#160; &#160; &#160;&#160;&#160;or the request was&#160;not&#160;accepted by&#160;the&#160;destination&#160;upper layer.&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
void&#160;<br/>
none&#160;<br/>
©&#160;2017&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;3.00.00&#160;<br/>
45&#160;<br/>
based&#160;on&#160;template&#160;version&#160;4.9.2&#160;<br/>
<hr/>
<a name=46></a><img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/PduR/doc/TechnicalReference_PduR-46_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;PDU&#160;Router&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
The&#160;function&#160;is&#160;called&#160;by&#160;a lower layer&#160;transport protocol&#160;module&#160;to&#160;confirm&#160;a&#160;successful&#160;transmission&#160;of&#160;a&#160;<br/>lower&#160;layer transport protocol&#160;module&#160;TX&#160;SDU or&#160;to report an&#160;error that&#160;occurred&#160;during&#160;transmission.&#160;The&#160;<br/>PDU Router evaluates&#160;the&#160;lower layer&#160;transport protocol&#160;module&#160;I-PDU&#160;handle and performs&#160;appropriate&#160;<br/>handle&#160;and&#160;port conversion.&#160;The&#160;call&#160;is&#160;routed&#160;to&#160;an&#160;upper&#160;TP&#160;module using&#160;the&#160;appropriate&#160;I-PDU handle&#160;<br/>of&#160;the destination layer.&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
The&#160;function&#160;is&#160;called&#160;by&#160;a lower layer&#160;transport protocol&#160;module.&#160;<br/>Call&#160;Context&#160;<br/>
The&#160;function&#160;can&#160;be&#160;called&#160;on&#160;interrupt and task&#160;level&#160;and&#160;has&#160;not to&#160;be&#160;interrupted by&#160;other&#160;<br/>PduR_&lt;GenericLo&gt;TpTxConfirmation&#160;calls&#160;for the same the&#160;lower&#160;layer transport protocol&#160;module&#160;id.&#160;<br/>
Table&#160;5-17&#160;&#160;&#160;PduR_&lt;GenericLo&gt;TpTxConfirmation&#160;<br/>
<b>5.4.8&#160;</b><br/>
<b>PduR_&lt;GenericLo&gt;TpRxIndication&#160;</b><br/>
<b>Prototype&#160;<br/></b>void&#160;<b>PduR_&lt;GenericLo&gt;TpRxIndication&#160;</b>(PduIdType id,&#160;Std_ReturnType&#160;<br/>result)&#160;<br/>
<b>Parameter&#160;</b><br/>
id&#160;<br/>
ID of&#160;the&#160;&lt;GenericLo&gt;&#160;I-PDU that&#160;will&#160;be&#160;received.&#160;<br/>
result&#160;<br/>
Result&#160;of&#160;the&#160;TP&#160;reception&#160;<br/>E_OK&#160; &#160;&#160;&#160; &#160;&#160; &#160;The&#160;TP&#160;reception&#160;has&#160;been completed&#160;successfully.&#160;<br/>E_NOT_OK&#160;PduR_Init()&#160;has&#160;not been called&#160;<br/>&#160; &#160; &#160; &#160; &#160;&#160; &#160; &#160; &#160;&#160; &#160;&#160;or&#160;the&#160;reception&#160;was&#160;aborted&#160;&#160;<br/>&#160; &#160; &#160; &#160; &#160;&#160; &#160; &#160; &#160;&#160; &#160;&#160;or&#160;the&#160;id&#160;is&#160;not&#160;valid&#160;<br/>&#160; &#160; &#160; &#160; &#160;&#160; &#160; &#160; &#160;&#160; &#160;&#160;or&#160;the&#160;id&#160;is&#160;not&#160;forwarded&#160;<br/>&#160; &#160; &#160; &#160; &#160;&#160; &#160; &#160; &#160;&#160; &#160;&#160;or&#160;the&#160;request was&#160;not&#160;accepted by&#160;the destination&#160;upper&#160;layer.&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
void&#160;<br/>
none&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
The&#160;function&#160;is&#160;called&#160;by&#160;the&#160;lower&#160;layer&#160;transport protocol&#160;module&#160;to&#160;indicate&#160;the&#160;complete&#160;reception&#160;of&#160;a&#160;<br/>lower&#160;layer transport protocol&#160;module&#160;SDU&#160;or to&#160;report&#160;an&#160;error that&#160;occurred&#160;during reception.&#160;The&#160;PDU&#160;<br/>Router&#160;evaluates&#160;the&#160;lower&#160;layer transport protocol&#160;module I-PDU handle&#160;and&#160;performs&#160;appropriate&#160;handle&#160;<br/>and&#160;port conversion.&#160;The&#160;call&#160;is&#160;routed&#160;to an upper&#160;TP&#160;module using the appropriate&#160;I-PDU handle of&#160;the&#160;<br/>destination&#160;layer.&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
The&#160;function&#160;is&#160;called&#160;by&#160;a lower layer&#160;transport protocol&#160;module.&#160;<br/>Call&#160;Context&#160;<br/>
The&#160;function&#160;can&#160;be&#160;called&#160;on&#160;interrupt and task&#160;level&#160;and&#160;has&#160;not to&#160;be&#160;interrupted by&#160;other&#160;<br/>PduR_&lt;GenericLo&gt;TpRxIndication<b>&#160;</b>calls&#160;for the&#160;same lower&#160;layer transport protocol&#160;module.&#160;<br/>
Table&#160;5-18&#160;&#160;&#160;PduR_&lt;GenericLo&gt;TpRxIndication&#160;<br/>
&#160;<br/>
©&#160;2017&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;3.00.00&#160;<br/>
46&#160;<br/>
based&#160;on&#160;template&#160;version&#160;4.9.2&#160;<br/>
<hr/>
<a name=47></a><img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/PduR/doc/TechnicalReference_PduR-47_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;PDU&#160;Router&#160;<br/>
<b>5.4.9&#160;</b><br/>
<b>PduR_&lt;GenericUpTp&gt;Transmit&#160;</b><br/>
<b>Prototype&#160;<br/></b>Std_ReturnType&#160;<b>PduR_&lt;GenericUpTp&gt;Transmit&#160;</b>(PduIdType id, PduInfoType*&#160;<br/>info)&#160;<br/>
<b>Parameter&#160;</b><br/>
id&#160;<br/>
ID of&#160;the&#160;upper layer I-PDU&#160;that&#160;have to be transmitted&#160;<br/>
info&#160;<br/>
Payload&#160;information&#160;of&#160;the&#160;I-PDU&#160;(pointer to&#160;data&#160;and data&#160;length)&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
Std_ReturnType&#160;<br/>
Std_ReturnType&#160;<br/>E_OK&#160;The&#160;request&#160;was&#160;accepted by&#160;the PDU Router&#160;and&#160;by&#160;the&#160;destination&#160;<br/>layer.&#160;<br/>E_NOT_OK&#160;PduR_Init()&#160;has&#160;not been called&#160;<br/>or the&#160;id&#160;is&#160;not&#160;valid&#160;<br/>or the&#160;id&#160;is&#160;not&#160;forwarded&#160;in&#160;this&#160;identity&#160;<br/>or the&#160;info is&#160;not&#160;valid&#160;<br/>or the&#160;request&#160;was&#160;not accepted by&#160;the&#160;TP&#160;layer.&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
The&#160;function&#160;serves&#160;to&#160;request the transmission&#160;of&#160;a&#160;TP&#160;layer I-PDU.&#160;<br/>The&#160;PDU Router&#160;evaluates&#160;the&#160;incoming&#160;I-PDU ID&#160;and&#160;performs&#160;appropriate ID&#160;and&#160;port conversion.&#160;The&#160;<br/>call&#160;is&#160;routed&#160;to the&#160;TP&#160;layer&#160;using&#160;the&#160;appropriate&#160;I-PDU handle of&#160;the&#160;destination layer.&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
The&#160;function&#160;is&#160;called&#160;by&#160;an&#160;upper layer transport&#160;protocol&#160;module.&#160;<br/>Call&#160;Context&#160;<br/>
The&#160;function&#160;can&#160;be&#160;called&#160;on&#160;interrupt and task&#160;level&#160;and&#160;has&#160;not to&#160;be&#160;interrupted by&#160;other&#160;<br/>PduR_&lt;GenericUpTp&gt;Transmit calls&#160;for the&#160;same an upper layer&#160;transport protocol&#160;module&#160;id.&#160;<br/>
Table&#160;5-19&#160;&#160;&#160;PduR_&lt;GenericUpTp&gt;Transmit&#160;<br/>&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
©&#160;2017&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;3.00.00&#160;<br/>
47&#160;<br/>
based&#160;on&#160;template&#160;version&#160;4.9.2&#160;<br/>
<hr/>
<a name=48></a><img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/PduR/doc/TechnicalReference_PduR-48_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;PDU&#160;Router&#160;<br/>
<b>5.5&#160;</b><br/>
<b>Service&#160;Ports&#160;</b><br/>
<b>5.5.1&#160;</b><br/>
<b>Complex&#160;Device&#160;Driver Interaction&#160;&#160;</b><br/>
Besides&#160;&#160;the&#160;&#160;AUTOSAR&#160;&#160;modules,&#160;&#160;Complex&#160;&#160;Device&#160;&#160;Drivers&#160;&#160;(CDD)&#160;&#160;are&#160;&#160;also&#160;&#160;possible&#160;&#160;as&#160;<br/>upper&#160;&#160;layer&#160;&#160;and&#160;&#160;lower&#160;&#160;transport&#160;&#160;protocol&#160;&#160;or&#160;&#160;communication&#160;&#160;interface&#160;&#160;modules&#160;&#160;for&#160;&#160;the&#160;<br/>PduR.&#160;When&#160;a&#160;callout&#160;function&#160;of&#160;the&#160;PduR&#160;is&#160;invoked&#160;from&#160;a&#160;lower&#160;or&#160;upper&#160;layer&#160;module&#160;<br/>for&#160;a&#160;PDU&#160;that&#160;is&#160;transmitted&#160;or&#160;received&#160;by&#160;a&#160;CDD,&#160;the&#160;PduR&#160;invokes&#160;the&#160;corresponding&#160;<br/>target&#160;function&#160;of&#160;the&#160;CDD.&#160;If&#160;all&#160;PDUs&#160;transmitted&#160;or&#160;received&#160;by&#160;a&#160;CDD&#160;are&#160;referenced&#160;by&#160;<br/>communication&#160;interface&#160;modules,&#160;the&#160;CDD&#160;requires&#160;a&#160;communication&#160;interface&#160;API.&#160;&#160;If&#160;all&#160;<br/>PDUs&#160;transmitted&#160;or&#160;received&#160;by&#160;a&#160;CDD&#160;are&#160;referenced&#160;by&#160;transport&#160;protocol&#160;modules,&#160;the&#160;<br/>CDD requires a&#160;transport protocol&#160;API.&#160;<br/>A&#160;&#160;CDD&#160;&#160;can&#160;&#160;either&#160;&#160;require&#160;&#160;a&#160;&#160;communication&#160;&#160;interface&#160;&#160;API&#160;&#160;or&#160;&#160;it&#160;&#160;can&#160;&#160;require&#160;&#160;a&#160;&#160;transport&#160;<br/>protocol&#160;API&#160;but&#160;not&#160;both.&#160;The&#160;API&#160;functions&#160;provided&#160;by&#160;the&#160;PduR&#160;for&#160;the&#160;CDD&#160;interaction&#160;<br/>contain&#160;the&#160;CDD’s name.&#160;<br/>
©&#160;2017&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;3.00.00&#160;<br/>
48&#160;<br/>
based&#160;on&#160;template&#160;version&#160;4.9.2&#160;<br/>
<hr/>
<a name=49></a><img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/PduR/doc/TechnicalReference_PduR-49_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/PduR/doc/TechnicalReference_PduR-49_2.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;PDU&#160;Router&#160;<br/>
<b>6&#160;&#160;Configuration&#160;</b><br/>
<b>6.1&#160;</b><br/>
<b>Use&#160;Case&#160;Configuration:&#160;Communication&#160;interface&#160;range&#160;gateway&#160;</b><br/>
The&#160;PduR&#160;routing&#160;paths&#160;configuration&#160;is&#160;typically&#160;focused&#160;on&#160;the&#160;routing&#160;of&#160;dedicated&#160;Pdus&#160;<br/>and&#160;&#160;their&#160;&#160;bus-specific&#160;&#160;representation&#160;&#160;(e.g.&#160;&#160;the&#160;&#160;concrete&#160;&#160;CAN&#160;&#160;ID,&#160;&#160;DLC,&#160;&#160;…).&#160;&#160;For&#160;&#160;some&#160;<br/>network&#160;&#160;and&#160;&#160;communication&#160;&#160;architectures&#160;&#160;it&#160;&#160;might&#160;&#160;be&#160;&#160;helpful&#160;&#160;to&#160;&#160;avoid&#160;&#160;the&#160;&#160;dedicated&#160;<br/>configuration&#160;of&#160;all&#160;possible&#160;and&#160;required&#160;PduR&#160;routing&#160;paths.&#160;Especially&#160;if&#160;a&#160;huge&#160;amount&#160;<br/>of&#160;&#160;Pdus&#160;&#160;shall&#160;&#160;be&#160;&#160;routed&#160;&#160;between&#160;&#160;networks,&#160;&#160;the&#160;&#160;PduR&#160;&#160;routing&#160;&#160;paths&#160;&#160;configuration&#160;&#160;gets&#160;<br/>extensive,&#160;error-prone&#160;and&#160;requires&#160;a&#160;lot&#160;of&#160;hardware resources&#160;(ROM /&#160;RAM).&#160;<br/>To&#160;overcome&#160;this&#160;situation,&#160;so&#160;called&#160;range-routings&#160;could&#160;be&#160;used.&#160;For&#160;the&#160;routing&#160;of&#160;a&#160;full&#160;<br/>Pdu&#160;range&#160;between&#160;two&#160;networks&#160;just&#160;single&#160;PduR routing&#160;path&#160;needs to&#160;be&#160;configured.&#160;<br/>Technically,&#160;the&#160;range-routing&#160;is&#160;based&#160;on&#160;the&#160;usage&#160;of&#160;MetaData&#160;information&#160;appended&#160;to&#160;<br/>the&#160;&#160;Pdu&#160;&#160;data&#160;&#160;field.&#160;&#160;During&#160;&#160;Pdu&#160;&#160;reception&#160;&#160;the&#160;&#160;related&#160;&#160;bus&#160;&#160;interface&#160;&#160;module&#160;&#160;stores&#160;&#160;all&#160;<br/>required&#160;&#160;Pdu&#160;&#160;meta&#160;&#160;information&#160;&#160;(the&#160;&#160;CAN&#160;&#160;ID)&#160;&#160;in&#160;&#160;the&#160;&#160;MetaData&#160;&#160;part&#160;&#160;of&#160;&#160;the&#160;&#160;Pdu&#160;&#160;data&#160;&#160;field.&#160;<br/>The&#160;&#160;PduR&#160;&#160;itself&#160;&#160;performs&#160;&#160;the&#160;&#160;routing&#160;&#160;of&#160;&#160;the&#160;&#160;full&#160;&#160;Pdu&#160;&#160;data&#160;&#160;field,&#160;&#160;including&#160;&#160;the&#160;&#160;MetaData.&#160;<br/>During&#160;&#160;transmission&#160;&#160;the&#160;&#160;related&#160;&#160;bus&#160;&#160;interface&#160;&#160;module&#160;&#160;uses&#160;&#160;the&#160;&#160;MetaData&#160;&#160;information&#160;&#160;for&#160;<br/>dynamic&#160;&#160;adaptation&#160;&#160;(the&#160;&#160;CAN&#160;&#160;ID)&#160;&#160;of&#160;&#160;the&#160;&#160;transmitted&#160;&#160;bus&#160;&#160;Pdu.&#160;&#160;The&#160;&#160;range&#160;&#160;of&#160;&#160;the&#160;&#160;routed&#160;<br/>Pdus&#160;is&#160;defined&#160;by&#160;the&#160;bus&#160;interface&#160;specific&#160;Rx&#160;Pdu&#160;range.&#160;In&#160;case&#160;of&#160;CanIf,&#160;&#160;the&#160;CAN&#160;ID&#160;<br/>Rx&#160;filter&#160;is used&#160;to&#160;define&#160;the&#160;range.<a href="TechnicalReference_PduRs.html#49">&#160;Figure&#160;6-1&#160;</a>visualizes the&#160;range-routing&#160;technique.&#160;<br/>
&#160;<br/>
PduR<br/>
CanIf<br/>
Store&#160;Rx&#160;<br/>
Use&#160;stored&#160;CAN&#160;ID&#160;<br/>
CAN&#160;ID&#160;in&#160;<br/>
from&#160;meta&#160;data&#160;for&#160;<br/>
Payload<br/>
CAN&#160;ID<br/>
MetaData<br/>
meta&#160;data<br/>
transmission<br/>
Pdu<br/>
CAN&#160;ID<br/>
Pdu<br/>
CAN&#160;ID<br/>
Rx&#160;ID&#160;mask&#160;<br/>filter<br/>
Routed&#160;CAN&#160;ID&#160;is&#160;identical<br/>
&#160;<br/>
Figure&#160;6-1&#160;&#160;Meta&#160;data&#160;routing&#160;with&#160;CanIf&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Limitations&#160;<br/></b>There are some&#160;limitations&#160;when using&#160;the&#160;described range-routing&#160;technique:&#160;<br/>
&#160;&#160;&#160;Available for&#160;CAN&#160;only&#160;&#160;<br/>
&#160;No CAN&#160;ID&#160;conversion possible&#160;<br/>&#160;No length conversion possible&#160;<br/>&#160;No dynamic&#160;PDU&#160;lengths&#160;possible&#160;&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
&#160;<br/>
©&#160;2017&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;3.00.00&#160;<br/>
49&#160;<br/>
based&#160;on&#160;template&#160;version&#160;4.9.2&#160;<br/>
<hr/>
<a name=50></a><img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/PduR/doc/TechnicalReference_PduR-50_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/PduR/doc/TechnicalReference_PduR-50_2.png"/><br/>
<img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/PduR/doc/TechnicalReference_PduR-50_3.png"/><br/>
<img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/PduR/doc/TechnicalReference_PduR-50_4.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;PDU&#160;Router&#160;<br/>
<b>6.1.1&#160;</b><br/>
<b>Step-by-step configuration&#160;</b><br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Configuration&#160;Example&#160;</b><br/>
&#160;&#160;All&#160;following&#160;step-by-step&#160;instructions&#160;are&#160;based&#160;on this&#160;range-routing&#160;example:&#160;<br/>
<b>CAN&#160;ID&#160;&#160;CAN&#160;ID&#160;&#160;DLC&#160;&#160;Source&#160;network&#160;/&#160;&#160;Destination&#160;network(s)&#160;/&#160;channel(s)&#160;<br/>code&#160;</b><br/>
<b>mask&#160;</b><br/>
<b>channel&#160;</b><br/>
0x700&#160;<br/>
0x708&#160;<br/>
8&#160;<br/>
CAN0&#160;<br/>
CAN1,&#160;CAN2&#160;<br/>
0x708&#160;<br/>
0x708&#160;<br/>
8&#160;<br/>
CAN1&#160;<br/>
CAN0&#160;<br/>
0x708&#160;<br/>
0x708&#160;<br/>
8&#160;<br/>
CAN2&#160;<br/>
CAN0&#160;<br/>
Table&#160;6-1&#160;&#160;&#160;Example&#160;range&#160;routings&#160;<br/>
The&#160;CAN&#160;ID&#160;range is&#160;defined by&#160;the&#160;condition&#160;<br/>&lt;received CAN-ID&gt; &amp; &lt;mask&gt; == &lt;code&gt; &amp; &lt;mask&gt;&#160;<br/>
&#160;<br/>
The&#160;following&#160;step-by-step configurations&#160;steps&#160;will&#160;result&#160;in&#160;the&#160;following&#160;CanIf&#160;/&#160;PduR&#160;<br/>range&#160;routing&#160;architecture shown in<a href="TechnicalReference_PduRs.html#50">&#160;Figure&#160;6-2.</a>&#160;<br/>
1:N&#160;routing&#160;path<br/>
PduR<br/>
Tx&#160;FIFO&#160;<br/>
Tx&#160;FIFO&#160;<br/>
Tx&#160;FIFO&#160;<br/>
Tx&#160;FIFO&#160;<br/>
CAN1<br/>
CAN2<br/>
CAN2_to_C<br/>
CAN1_to_C<br/>
AN0<br/>
AN0<br/>
CanIf<br/>
Rx&#160;range<br/>
Rx&#160;range<br/>
ID<br/>
0x700<br/>
ID<br/>
0x708<br/>
mask&#160;0x708<br/>
mask&#160;0x708<br/>
CAN0&#160;Rx<br/>
CAN1&#160;Tx<br/>
CAN2&#160;Tx<br/>
CAN1&#160;Rx<br/>
CAN2&#160;Rx<br/>
CAN0&#160;Tx<br/>
&#160;<br/>
Figure&#160;6-2&#160;&#160;CanIf&#160;/&#160;PduR&#160;range&#160;routing&#160;example&#160;overview&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Derived&#160;model&#160;elements /&#160;Validation&#160;and&#160;solving&#160;actions&#160;</b><br/>
&#160;&#160;During&#160;project&#160;setup&#160;the&#160;EcuC&#160;configuration&#160;will&#160;be automatically&#160;derived&#160;from&#160;the&#160;<br/>
provided input&#160;files.&#160;Therefore&#160;some&#160;of&#160;the&#160;following&#160;manual&#160;configuration&#160;steps&#160;are&#160;<br/>redundant.&#160;In&#160;this&#160;case,&#160;please extend or&#160;adapt&#160;the&#160;existing&#160;configuration&#160;containers&#160;<br/>and parameters&#160;to&#160;the&#160;described&#160;step-by-step&#160;configuration.&#160;<br/>Parameters&#160;and containers&#160;which will&#160;be&#160;created&#160;and configured&#160;by&#160;background-<br/>validations&#160;are&#160;not&#160;described explicitly.&#160;Please&#160;finalize all&#160;manual&#160;configuration&#160;steps&#160;<br/>before&#160;solving&#160;the&#160;open&#160;validations&#160;results.&#160;Use&#160;the&#160;provided solving&#160;actions.&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
©&#160;2017&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;3.00.00&#160;<br/>
50&#160;<br/>
based&#160;on&#160;template&#160;version&#160;4.9.2&#160;<br/>
<hr/>
<a name=51></a><img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/PduR/doc/TechnicalReference_PduR-51_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/PduR/doc/TechnicalReference_PduR-51_2.png"/><br/>
<img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/PduR/doc/TechnicalReference_PduR-51_3.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;PDU&#160;Router&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Create&#160;global&#160;Pdus&#160;</b><br/>
&#160;&#160;&#160;&#160;Create&#160;global&#160;Pdus&#160;for&#160;every&#160;required&#160;range&#160;routing&#160;source&#160;and&#160;destination channel.&#160;<br/>
Global&#160;Pdu&#160;container:&#160;/MICROSAR/EcuC/EcucPduCollection/Pdu&#160;<br/>
&#160;Create and&#160;configure a&#160;MetaData&#160;length.&#160;2&#160;bytes&#160;are&#160;required&#160;for&#160;standard CAN&#160;IDs,&#160;<br/>
4 bytes are&#160;required&#160;for&#160;extended CAN&#160;identifiers.&#160;<br/>MetaData&#160;length:&#160;/MICROSAR/EcuC/EcucPduCollection/Pdu/MetaDataLength&#160;<br/>
&#160;Configure&#160;the&#160;Pdu&#160;length&#160;to&#160;the&#160;Pdu&#160;payload&#160;length.&#160;<br/>
Pdu&#160;length:&#160;/MICROSAR/EcuC/EcucPduCollection/Pdu/PduLength&#160;<br/>For&#160;the&#160;example&#160;configuration this&#160;results&#160;in&#160;the&#160;following&#160;global&#160;Pdu&#160;configuration:&#160;<br/>
&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
&#160;<br/>
©&#160;2017&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;3.00.00&#160;<br/>
51&#160;<br/>
based&#160;on&#160;template&#160;version&#160;4.9.2&#160;<br/>
<hr/>
<a name=52></a><img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/PduR/doc/TechnicalReference_PduR-52_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/PduR/doc/TechnicalReference_PduR-52_2.png"/><br/>
<img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/PduR/doc/TechnicalReference_PduR-52_3.png"/><br/>
<img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/PduR/doc/TechnicalReference_PduR-52_4.png"/><br/>
<img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/PduR/doc/TechnicalReference_PduR-52_5.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;PDU&#160;Router&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Create&#160;CanIf&#160;Rx Pdus&#160;&#160;</b><br/>
&#160;&#160;&#160;&#160;Create&#160;a&#160;CanIf&#160;Rx&#160;Pdu&#160;for&#160;every&#160;required&#160;range&#160;routing&#160;source channel.&#160;<br/>
CanIf&#160;Rx&#160;Pdu&#160;container:&#160;/MICROSAR/CanIf/CanIfInitCfg/CanIfRxPduCfg&#160;<br/>
&#160;Configure&#160;the&#160;Rx&#160;CAN&#160;ID&#160;range by&#160;the&#160;CAN&#160;ID&#160;code&#160;and&#160;the&#160;CAN&#160;ID&#160;mask&#160;<br/>
/MICROSAR/CanIf/CanIfInitCfg/CanIfRxPduCfg/CanIfRxPduCanId&#160;&#160;<br/>/MICROSAR/CanIf/CanIfInitCfg/CanIfRxPduCfg/CanIfRxPduCanIdMask&#160;<br/>The&#160;CAN&#160;ID&#160;range is&#160;defined by&#160;the&#160;filter&#160;condition&#160;<br/>&lt;received CAN-ID&gt; &amp; &lt;mask&gt; == &lt;code&gt; &amp; &lt;mask&gt;&#160;<br/>
&#160;Configure&#160;the&#160;CAN&#160;ID&#160;type&#160;(standard&#160;or&#160;extended)&#160;and&#160;the&#160;DLC&#160;with the&#160;parameters&#160;&#160;<br/>
/MICROSAR/CanIf/CanIfInitCfg/CanIfRxPduCfg/CanIfRxPduCanIdType&#160;<br/>/MICROSAR/CanIf/CanIfInitCfg/CanIfRxPduCfg/CanIfRxPduDlc&#160;<br/>
&#160;Reference&#160;the&#160;related&#160;channel&#160;specific&#160;Rx&#160;global&#160;Pdu&#160;created&#160;in&#160;the&#160;previous&#160;steps&#160;<br/>
with the&#160;parameter&#160;<br/>/MICROSAR/CanIf/CanIfInitCfg/CanIfRxPduCfg/CanIfRxPduRef&#160;<br/>
&#160;&#160;Reference&#160;the&#160;related&#160;CAN&#160;channel&#160;hardware&#160;receive object&#160;(HRH)&#160;used&#160;for&#160;<br/>
reception of&#160;the&#160;range&#160;Pdus&#160;with the&#160;parameter&#160;<br/>/MICROSAR/CanIf/CanIfInitCfg/CanIfRxPduCfg/CanIfRxPduHrhIdRef&#160;<br/>
&#160;Assign&#160;the&#160;PduR&#160;as upper&#160;layer&#160;user&#160;with the&#160;parameter&#160;/MICROSAR/CanIf/&#160;<br/>
CanIfInitCfg/CanIfRxPduCfg/CanIfRxPduUserRxIndicationUL&#160;<br/>&#160;<br/>
For&#160;the&#160;example configuration this&#160;results&#160;in&#160;the&#160;following&#160;CanIf&#160;Rx&#160;Pdu&#160;configuration:&#160;<br/>
&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Create&#160;CanIf&#160;Tx Pdus&#160;</b><br/>
&#160;&#160;&#160;&#160;Create&#160;a&#160;CanIf&#160;Tx&#160;Pdu&#160;for&#160;every&#160;required&#160;range&#160;routing&#160;destination&#160;channel.&#160;<br/>
CanIf&#160;Tx&#160;Pdu&#160;container:&#160;/MICROSAR/CanIf/CanIfInitCfg/CanIfTxPduCfg&#160;<br/>
&#160;Configure&#160;the&#160;Tx&#160;CAN&#160;ID&#160;used&#160;for&#160;prioritization of&#160;this&#160;dynamic&#160;Tx&#160;Pdu&#160;against&#160;other&#160;<br/>
static&#160;Pdus&#160;with the&#160;parameter&#160;<br/>/MICROSAR/CanIf/CanIfInitCfg/CanIfTxPduCfg/CanIfTxPduCanId&#160;<br/>Use the&#160;highest&#160;priority&#160;CAN&#160;ID&#160;of&#160;the&#160;routing&#160;range&#160;for&#160;this&#160;prioritization ID.&#160;<br/>
&#160;&#160;Configure&#160;the&#160;CAN&#160;DLC&#160;with the&#160;parameter&#160;<br/>
/MICROSAR/CanIf/CanIfInitCfg/CanIfTxPduCfg/CanIfTxPduDlc&#160;<br/>
&#160;Reference&#160;the&#160;related&#160;global&#160;Pdu&#160;created&#160;in&#160;the&#160;previous&#160;steps&#160;with&#160;the&#160;parameter&#160;<br/>
/MICROSAR/CanIf/CanIfInitCfg/CanIfTxPduCfg/CanIfTxPduRef&#160;<br/>
&#160;Reference&#160;the&#160;related&#160;channel&#160;specific&#160;CanIf&#160;Tx&#160;buffer&#160;object&#160;used&#160;for&#160;transmission&#160;<br/>
of&#160;the&#160;range Pdus&#160;with the parameter&#160;<br/>/MICROSAR/CanIf/CanIfInitCfg/CanIfTxPduCfg/CanIfTxPduBufferRef&#160;<br/>
&#160;<br/>For&#160;the&#160;example configuration this&#160;results&#160;in&#160;the&#160;following&#160;CanIf&#160;Tx&#160;Pdu&#160;configuration:&#160;<br/>
&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
©&#160;2017&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;3.00.00&#160;<br/>
52&#160;<br/>
based&#160;on&#160;template&#160;version&#160;4.9.2&#160;<br/>
<hr/>
<a name=53></a><img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/PduR/doc/TechnicalReference_PduR-53_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/PduR/doc/TechnicalReference_PduR-53_2.png"/><br/>
<img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/PduR/doc/TechnicalReference_PduR-53_3.png"/><br/>
<img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/PduR/doc/TechnicalReference_PduR-53_4.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;PDU&#160;Router&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Create&#160;PduR&#160;routing&#160;paths&#160;</b><br/>
&#160;&#160;Finally&#160;create&#160;the&#160;PduR&#160;routing&#160;paths&#160;connecting&#160;the&#160;CanIf&#160;Rx&#160;and&#160;Tx&#160;range&#160;Pdus.&#160;A&#160;<br/>
single PduR&#160;routing&#160;path&#160;for&#160;every&#160;channel&#160;specific&#160;range&#160;routing&#160;is&#160;required.&#160;<br/>&#160;Create a&#160;PduR&#160;routing&#160;path:&#160;<br/>
/MICROSAR/PduR/PduRRoutingTables/PduRRoutingTable/PduRRoutingPath&#160;<br/>
&#160;Reference&#160;the&#160;related&#160;channel&#160;specific&#160;Rx&#160;global&#160;Pdu&#160;at&#160;the&#160;routing&#160;path&#160;source:&#160;<br/>
/MICROSAR/PduR/PduRRoutingTables/PduRRoutingTable/PduRRoutingPath/Pd<br/>uRSrcPdu/PduRSrcPduRef&#160;<br/>
&#160;Reference&#160;the&#160;related&#160;channel&#160;specific&#160;Tx&#160;global&#160;Pdu&#160;at&#160;the&#160;routing&#160;path&#160;destination:&#160;<br/>
/MICROSAR/PduR/PduRRoutingTables/PduRRoutingTable/PduRRoutingPath/Pd<br/>uRDestPdu/PduRDestPduRef&#160;<br/>
&#160;<br/>For&#160;the&#160;example configuration this&#160;results&#160;in&#160;the&#160;following&#160;PduR&#160;routing&#160;path&#160;<br/>configuration:&#160;<br/>
<b>RoutingPath&#160;</b><br/>
<b>RoutingPath&#160;Source&#160;</b><br/>
<b>RoutingPath&#160;Destination(s)&#160;</b><br/>
<b>Global&#160;Pdu&#160;</b><br/>
<b>Global&#160;Pdu(s)&#160;</b><br/>
RP_RangeRouting_&#160;RxRangePdu_CAN0&#160;<br/>
TxRangePdu_CAN0_to_CAN1,&#160;<br/>
CAN0_to_CAN1_2&#160;<br/>
TxRangePdu_CAN0_to_CAN2&#160;<br/>
RP_RangeRouting_&#160;RxRangePdu_CAN1&#160;<br/>
TxRangePdu_CAN1_to_CAN0&#160;<br/>
CAN1_to_CAN0&#160;<br/>RP_RangeRouting_&#160;RxRangePdu_CAN2&#160;<br/>
TxRangePdu_CAN2_to_CAN0&#160;<br/>
CAN2_to_CAN0&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
For&#160;further&#160;details&#160;regarding&#160;the&#160;PduR&#160;communication interface&#160;gateway,&#160;please refer&#160;<br/>to chapter<a href="TechnicalReference_PduRs.html#15">&#160;3.6.</a>&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
©&#160;2017&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;3.00.00&#160;<br/>
53&#160;<br/>
based&#160;on&#160;template&#160;version&#160;4.9.2&#160;<br/>
<hr/>
<a name=54></a><img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/PduR/doc/TechnicalReference_PduR-54_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/PduR/doc/TechnicalReference_PduR-54_2.png"/><br/>
<img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/PduR/doc/TechnicalReference_PduR-54_3.png"/><br/>
<img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/PduR/doc/TechnicalReference_PduR-54_4.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;PDU&#160;Router&#160;<br/>
<b>6.1.2&#160;</b><br/>
<b>Optional&#160;configuration variants&#160;/&#160;options&#160;</b><br/>
<b>&#160;</b><br/>
<b>&#160;<br/>[Optional]&#160;Configure&#160;PduR&#160;FIFO&#160;routing&#160;</b><br/>
&#160;&#160;In&#160;case&#160;the&#160;sequence&#160;of&#160;successive&#160;routed&#160;range&#160;Pdus&#160;shall&#160;be&#160;retained,&#160;a&#160;<br/>
FIFO&#160;queue&#160;must&#160;be&#160;configured&#160;within&#160;the&#160;PduR.&#160;<br/>
<b>&#160;&#160;</b>Create&#160;PduR&#160;Tx&#160;buffer&#160;(FIFO) for every&#160;range&#160;routing&#160;destination&#160;channel:&#160;<br/>
/MICROSAR/PduR/PduRRoutingTables/PduRTxBufferTable/PduRTxBuffer&#160;<br/>
<b>&#160;&#160;</b>Configure the&#160;Tx&#160;buffer&#160;length&#160;to&#160;the&#160;length&#160;of&#160;the&#160;routed&#160;global Pdu&#160;<br/>
(including&#160;the&#160;MetaData&#160;length):&#160;<br/>/MICROSAR/PduR/PduRRoutingTables/PduRTxBufferTable/PduRTxBuffer/Pdu<br/>RPduMaxLength&#160;<br/>
<b>&#160;&#160;</b>Configure&#160;the&#160;Tx&#160;buffer&#160;depth&#160;to&#160;the&#160;maximum&#160;expected&#160;amount&#160;of&#160;queued&#160;<br/>
Pdus&#160;(see&#160;also&#160;chapter<a href="TechnicalReference_PduRs.html#16">&#160;3.6.2)</a>:&#160;&#160;<br/>/MICROSAR/PduR/PduRRoutingTables/PduRTxBufferTable/PduRTxBuffer/Pdu<br/>RTxBufferDepth&#160;<br/>
&#160;<br/>
&#160;<br/>
<b>&#160;&#160;</b>Reference&#160;the&#160;created&#160;Tx&#160;buffers&#160;at&#160;the&#160;related&#160;PduR range&#160;routing&#160;paths:&#160;<br/>
/MICROSAR/PduR/PduRRoutingTables/PduRRoutingTable/PduRRoutingPath/P<br/>duRDestPdu/PduRDestTxBufferRef&#160;<br/>
&#160;<br/>
&#160;&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
&#160;<br/>
©&#160;2017&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;3.00.00&#160;<br/>
54&#160;<br/>
based&#160;on&#160;template&#160;version&#160;4.9.2&#160;<br/>
<hr/>
<a name=55></a><img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/PduR/doc/TechnicalReference_PduR-55_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/PduR/doc/TechnicalReference_PduR-55_2.png"/><br/>
<img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/PduR/doc/TechnicalReference_PduR-55_3.png"/><br/>
<img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/PduR/doc/TechnicalReference_PduR-55_4.png"/><br/>
<img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/PduR/doc/TechnicalReference_PduR-55_5.png"/><br/>
<img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/PduR/doc/TechnicalReference_PduR-55_6.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;PDU&#160;Router&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>[Optional]&#160;CAN&#160;priority&#160;inversion&#160;</b><br/>
&#160;&#160;<b>&#160;&#160;</b>Enable&#160;the&#160;CanIf&#160;feature&#160;„Cancellation&#160;of&#160;PDUs and&#160;requeueing” in&#160;order&#160;to&#160;<br/>
avoid&#160;inner&#160;priority&#160;inversion:&#160;<br/>/MICROSAR/CanIf/CanIfCtrlDrvCfg/CanIfCtrlDrvTxCancellation&#160;<br/>
&#160;<br/>
&#160;<br/>
<b>&#160;&#160;</b>Enable&#160;the&#160;CAN&#160;driver feature „Multiplexed&#160;Transmission“ in&#160;order to&#160;avoid&#160;<br/>
external priority&#160;inversion:&#160;<br/>/MICROSAR/&lt;CAN_Platform&gt;/Can/CanGeneral/CanMultiplexedTransmission&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>If&#160;this&#160;feature is&#160;enabed,&#160;multiple&#160;hardware objects are&#160;used&#160;for&#160;<br/>transmission&#160;of&#160;a&#160;single&#160;logical&#160;Tx&#160;object.&#160;<br/>
Hint:&#160;These&#160;features&#160;are&#160;not&#160;supported&#160;by&#160;all&#160;CAN&#160;controllers.&#160;Please&#160;refer to&#160;&#160;<br/><a href="TechnicalReference_PduRs.html#4">[7]&#160;</a>and<a href="TechnicalReference_PduRs.html#4">&#160;[8].</a>&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>&#160;<br/>[Optional]&#160;Alternative CanIf&#160;Rx range&#160;configuration&#160;method&#160;</b><br/>
&#160;&#160;Depending&#160;on&#160;the&#160;required&#160;CAN&#160;ID&#160;range,&#160;the&#160;range&#160;can&#160;also&#160;be&#160;configured&#160;using&#160;an&#160;<br/>
upper-&#160;and lower&#160;layer&#160;ID&#160;using&#160;the&#160;following&#160;container&#160;/&#160;parameters:&#160;<br/>/MICROSAR/CanIf/CanIfInitCfg/CanIfRxPduCfg/CanIfRxPduCanIdRange&#160;<br/>
/MICROSAR/CanIf/CanIfInitCfg/CanIfRxPduCfg/CanIfRxPduCanIdRange/CanIfR<br/>xPduCanIdRangeLowerCanId&#160;<br/>/MICROSAR/CanIf/CanIfInitCfg/CanIfRxPduCfg/CanIfRxPduCanIdRange/CanIfR<br/>xPduCanIdRangeUpperCanId&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>In case&#160;of&#160;this&#160;alternative range&#160;configuration&#160;method,&#160;the&#160;previously&#160;used&#160;range&#160;<br/>configuration&#160;parameters&#160;must&#160;not&#160;be&#160;used:&#160;<br/>/MICROSAR/CanIf/CanIfInitCfg/CanIfRxPduCfg/CanIfRxPduCanId&#160;<br/>/MICROSAR/CanIf/CanIfInitCfg/CanIfRxPduCfg/CanIfRxPduCanIdMask&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
For further&#160;details about&#160;the&#160;CanIf&#160;and&#160;CAN&#160;driver&#160;modules,&#160;please&#160;refer to<a href="TechnicalReference_PduRs.html#4">&#160;[7]&#160;</a>and<a href="TechnicalReference_PduRs.html#4">&#160;[8].</a>&#160;<br/>
©&#160;2017&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;3.00.00&#160;<br/>
55&#160;<br/>
based&#160;on&#160;template&#160;version&#160;4.9.2&#160;<br/>
<hr/>
<a name=56></a><img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/PduR/doc/TechnicalReference_PduR-56_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/PduR/doc/TechnicalReference_PduR-56_2.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;PDU&#160;Router&#160;<br/>
<b>6.2&#160;</b><br/>
<b>Use&#160;Case&#160;Configuration:&#160;Functional&#160;requests&#160;gateway&#160;routing&#160;</b><br/>
Gateway&#160;&#160;ECUs&#160;&#160;typically&#160;&#160;include&#160;&#160;diagnostic&#160;&#160;services,&#160;&#160;handling&#160;&#160;physical&#160;&#160;and&#160;&#160;functional&#160;<br/>addressed&#160;&#160;requests&#160;&#160;used&#160;&#160;by&#160;&#160;external&#160;&#160;diagnostic&#160;&#160;tools&#160;&#160;during&#160;&#160;the&#160;&#160;development,&#160;<br/>manufacturing&#160;and&#160;service.&#160;<br/>Functionally&#160;addressed&#160;request&#160;messages&#160;are&#160;a&#160;kind&#160;of&#160;broadcast&#160;requests&#160;which&#160;shall&#160;be&#160;<br/>processed&#160;&#160;by&#160;&#160;all&#160;&#160;(or&#160;&#160;a&#160;&#160;dedicated&#160;&#160;set&#160;&#160;of)&#160;&#160;ECUs.&#160;Typically&#160;&#160;this&#160;&#160;includes&#160;&#160;the&#160;&#160;gateway&#160;&#160;ECU&#160;<br/>itself&#160;&#160;as&#160;&#160;well.&#160;&#160;In&#160;&#160;case&#160;&#160;the&#160;&#160;ECUs&#160;&#160;are&#160;&#160;distributed&#160;&#160;on&#160;&#160;multiple&#160;&#160;CAN&#160;&#160;networks,&#160;&#160;the&#160;&#160;gateway&#160;<br/>ECU&#160;&#160;needs&#160;&#160;to&#160;&#160;handle&#160;&#160;the&#160;&#160;broadcasting&#160;&#160;of&#160;&#160;the&#160;&#160;request&#160;&#160;messages&#160;&#160;to&#160;&#160;the&#160;&#160;connected&#160;&#160;sub-<br/>network&#160;as&#160;well&#160;as&#160;the&#160;handling&#160;of&#160;the&#160;functional&#160;requests&#160;by&#160;the&#160;gateway-own&#160;diagnostic&#160;<br/>handler.&#160;<br/>
Gateway&#160;ECU<br/>
Diagnostic&#160;&#160;handler<br/>
ECU&#160;A<br/>
Diagnostic&#160;<br/>
Diagnostic&#160;<br/>
ECU&#160;B<br/>
handler<br/>
Tool<br/>
Diagnostic&#160;<br/>
handler<br/>
functional&#160;&#160;requests<br/>
CAN&#160;0<br/>
CAN&#160;1<br/>
CAN&#160;2<br/>
&#160;&#160;<br/>
Figure&#160;6-3&#160;&#160;Example&#160;functional&#160;requests&#160;gateway&#160;network&#160;architecture&#160;<br/>
To&#160;realize&#160;the&#160;gateway&#160;behavior&#160;as&#160;visualized&#160;<a href="TechnicalReference_PduRs.html#56">in&#160;Figure&#160;6-3,&#160;</a>a&#160;PduR&#160;1:N&#160;transport&#160;protocol&#160;<br/>gateway&#160;could&#160;be&#160;configured,&#160;as shown&#160;in<a href="TechnicalReference_PduRs.html#56">&#160;Figure&#160;6-4.</a>&#160;<br/>
Dcm<br/>
Service&#160;&#160;handler<br/>
PduR<br/>
1:N&#160;routing&#160;path<br/>
CanTp<br/>
Physical&#160;request&#160;<br/>
Functional&#160;request&#160;&#160;handler<br/>
handler<br/>
CanIf<br/>
Physical&#160;request&#160;/&#160;<br/>
Functional&#160;request&#160;<br/>
response&#160;message<br/>
message<br/>
&#160;<br/>
Figure&#160;6-4&#160;&#160;Functional&#160;request&#160;gateway&#160;architecture&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Handling&#160;of&#160;physically&#160;addressed diagnostic&#160;messages&#160;</b>&#160;<br/>Routing&#160;of&#160;physically&#160;addressed diagnostic&#160;messages&#160;is&#160;not&#160;focus&#160;of&#160;this&#160;chapter.&#160;<br/>
&#160;&#160;Please refer&#160;to chapter<a href="TechnicalReference_PduRs.html#49">&#160;6.1&#160;</a>introducing&#160;range-routing&#160;paths&#160;which could be&#160;used&#160;for&#160;<br/>
efficient&#160;and&#160;simple&#160;routing&#160;of&#160;physically&#160;addressed&#160;diagnostic&#160;messages.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
©&#160;2017&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;3.00.00&#160;<br/>
56&#160;<br/>
based&#160;on&#160;template&#160;version&#160;4.9.2&#160;<br/>
<hr/>
<a name=57></a><img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/PduR/doc/TechnicalReference_PduR-57_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/PduR/doc/TechnicalReference_PduR-57_2.png"/><br/>
<img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/PduR/doc/TechnicalReference_PduR-57_3.png"/><br/>
<img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/PduR/doc/TechnicalReference_PduR-57_4.png"/><br/>
<img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/PduR/doc/TechnicalReference_PduR-57_5.png"/><br/>
<img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/PduR/doc/TechnicalReference_PduR-57_6.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;PDU&#160;Router&#160;<br/>
<b>6.2.1&#160;</b><br/>
<b>Step-by-step configuration&#160;</b><br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Configuration&#160;Example&#160;</b><br/>
&#160;&#160;All&#160;following&#160;step-by-step&#160;instructions&#160;are based&#160;on the&#160;following&#160;functional&#160;diagnostic&#160;<br/>
routing&#160;example:&#160;<br/>
<b>Functional&#160;diagnostic&#160;</b><br/>
<b>DLC&#160;&#160;Source&#160;network&#160;/&#160;</b><br/>
<b>Destination&#160;network(s)&#160;/&#160;</b><br/>
<b>request&#160;ID</b>&#160;<br/>
<b>channel&#160;</b><br/>
<b>channel(s)&#160;</b><br/>
0x7DF&#160;<br/>
8&#160;<br/>
CAN0&#160;<br/>
CAN1,&#160;CAN2&#160;<br/>
Table&#160;6-2&#160;&#160;<br/>
Example functional&#160;diagnostic&#160;request&#160;routing&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Derived&#160;model&#160;elements /&#160;Validation&#160;and&#160;solving&#160;actions&#160;</b><br/>
&#160;&#160;During&#160;project&#160;setup&#160;the&#160;EcuC&#160;configuration&#160;will&#160;be&#160;automatically&#160;derived&#160;from&#160;the&#160;<br/>
provided input&#160;files.&#160;Therefore&#160;some&#160;of&#160;the&#160;following&#160;manual&#160;configuration&#160;steps&#160;are&#160;<br/>redundant.&#160;In&#160;this&#160;case,&#160;please extend or&#160;adapt&#160;the&#160;existing&#160;configuration&#160;containers&#160;<br/>and parameters&#160;to&#160;the&#160;described&#160;step-by-step&#160;configuration.&#160;<br/>Parameters&#160;and containers&#160;which will&#160;be&#160;created&#160;and configured&#160;by&#160;background-<br/>validations&#160;are&#160;not&#160;described explicitly.&#160;Please&#160;finalize all&#160;manual&#160;configuration&#160;steps&#160;<br/>before&#160;solving&#160;the&#160;open&#160;validations&#160;results.&#160;Use&#160;the&#160;provided solving&#160;actions.&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>Create&#160;global&#160;Pdus&#160;/&#160;Sdus&#160;</b><br/>
&#160;&#160;&#160;&#160;Create&#160;two&#160;global&#160;Pdus&#160;for&#160;the&#160;received&#160;functional&#160;request.&#160;The&#160;first&#160;global&#160;Pdu&#160;<br/>
interconnects&#160;the&#160;CanIf&#160;and&#160;CanTp&#160;receive paths.&#160;The&#160;second&#160;global&#160;Pdu&#160;(Sdu)&#160;<br/>interconnects&#160;the&#160;CanTp,&#160;PduR&#160;and&#160;the&#160;related&#160;diagnostic&#160;handler&#160;(e.g.&#160;Dcm).&#160;<br/>Global&#160;Pdu&#160;container:&#160;/MICROSAR/EcuC/EcucPduCollection/Pdu&#160;<br/>This&#160;step&#160;is&#160;optional&#160;if&#160;the&#160;own functional&#160;request&#160;routing&#160;path was automatically&#160;<br/>derived&#160;based&#160;on&#160;input&#160;files during&#160;project&#160;setup.&#160;<br/>
&#160;Create&#160;a&#160;pair&#160;of&#160;global&#160;Pdus&#160;(Pdu&#160;and&#160;Sdu)&#160;for&#160;every&#160;destination&#160;channel&#160;where&#160;the&#160;<br/>
functional&#160;requests&#160;shall&#160;be&#160;routed&#160;to.&#160;<br/>
&#160;&#160;Configure&#160;the&#160;Pdu&#160;length&#160;to&#160;the&#160;CAN&#160;frame&#160;length&#160;of&#160;the&#160;functional&#160;request&#160;<br/>
message.&#160;The&#160;length&#160;of&#160;the&#160;Sdu&#160;(interconnection&#160;between CanTp,&#160;PduR&#160;and&#160;the&#160;<br/>related&#160;diagnostic&#160;handler)&#160;shall&#160;be&#160;the&#160;length&#160;of&#160;transport&#160;protocol&#160;payload.&#160;&#160;<br/>Pdu&#160;length:&#160;/MICROSAR/EcuC/EcucPduCollection/Pdu/PduLength&#160;<br/>&#160;<br/>
For&#160;the&#160;example configuration this&#160;results&#160;in&#160;the&#160;following&#160;global&#160;Pdu&#160;configuration:<br/>
&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
©&#160;2017&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;3.00.00&#160;<br/>
57&#160;<br/>
based&#160;on&#160;template&#160;version&#160;4.9.2&#160;<br/>
<hr/>
<a name=58></a><img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/PduR/doc/TechnicalReference_PduR-58_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/PduR/doc/TechnicalReference_PduR-58_2.png"/><br/>
<img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/PduR/doc/TechnicalReference_PduR-58_3.png"/><br/>
<img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/PduR/doc/TechnicalReference_PduR-58_4.png"/><br/>
<img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/PduR/doc/TechnicalReference_PduR-58_5.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;PDU&#160;Router&#160;<br/>
<b>Create&#160;CanIf&#160;Rx Pdus&#160;&#160;</b><br/>
&#160;&#160;The&#160;following&#160;steps&#160;are&#160;optional&#160;if&#160;the&#160;own&#160;functional&#160;request&#160;routing&#160;path&#160;was&#160;<br/>
automatically&#160;derived&#160;based&#160;on&#160;input&#160;files&#160;during&#160;project&#160;setup.&#160;<br/>&#160;<br/>&#160;Create a&#160;CanIf&#160;Rx&#160;Pdu&#160;for&#160;the&#160;functional&#160;diagnostic&#160;request&#160;message.&#160;<br/>
CanIf&#160;Rx&#160;Pdu&#160;container:&#160;/MICROSAR/CanIf/CanIfInitCfg/CanIfRxPduCfg&#160;<br/>
&#160;Configure&#160;the&#160;static&#160;Rx&#160;CAN&#160;ID&#160;of&#160;the&#160;functional&#160;request&#160;message&#160;<br/>
/MICROSAR/CanIf/CanIfInitCfg/CanIfRxPduCfg/CanIfRxPduCanId&#160;<br/>
&#160;Configure&#160;the&#160;CAN&#160;ID&#160;type&#160;(standard&#160;or&#160;extended)&#160;and&#160;the&#160;DLC&#160;with the&#160;parameters&#160;&#160;<br/>
/MICROSAR/CanIf/CanIfInitCfg/CanIfRxPduCfg/CanIfRxPduCanIdType&#160;<br/>/MICROSAR/CanIf/CanIfInitCfg/CanIfRxPduCfg/CanIfRxPduDlc&#160;<br/>
&#160;Reference&#160;the&#160;related&#160;functional&#160;request&#160;Rx&#160;global&#160;Pdu&#160;created&#160;in&#160;the&#160;previous&#160;<br/>
steps&#160;with the&#160;parameter&#160;&#160;<br/>/MICROSAR/CanIf/CanIfInitCfg/CanIfRxPduCfg/CanIfRxPduRef&#160;<br/>
&#160;&#160;Reference&#160;the&#160;related&#160;CAN&#160;channel&#160;hardware&#160;receive object&#160;(HRH)&#160;used&#160;for&#160;<br/>
reception of&#160;the&#160;functional&#160;request&#160;message with&#160;the&#160;parameter&#160;<br/>/MICROSAR/CanIf/CanIfInitCfg/CanIfRxPduCfg/CanIfRxPduHrhIdRef&#160;<br/>
&#160;Assign&#160;the&#160;CanTp&#160;as&#160;upper&#160;layer&#160;user&#160;with the&#160;parameter&#160;/MICROSAR/CanIf/&#160;<br/>
CanIfInitCfg/CanIfRxPduCfg/CanIfRxPduUserRxIndicationUL&#160;<br/>
&#160;<br/>For&#160;the&#160;example configuration this&#160;results&#160;in&#160;the&#160;following&#160;CanIf&#160;Rx&#160;Pdu&#160;configuration:<br/>
&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Create&#160;CanIf&#160;Tx Pdus&#160;</b><br/>
&#160;&#160;&#160;&#160;Create a&#160;CanIf&#160;Tx&#160;Pdu&#160;for&#160;every&#160;destination&#160;channel&#160;where the&#160;functional&#160;requests&#160;<br/>
shall&#160;be&#160;routed&#160;to:&#160;<br/>CanIf&#160;Tx&#160;Pdu&#160;container:&#160;/MICROSAR/CanIf/CanIfInitCfg/CanIfTxPduCfg&#160;<br/>
&#160;Configure&#160;the&#160;static&#160;Tx&#160;CAN&#160;ID&#160;of&#160;the&#160;functional&#160;request&#160;message&#160;with the&#160;<br/>
parameter&#160;&#160;<br/>/MICROSAR/CanIf/CanIfInitCfg/CanIfTxPduCfg/CanIfTxPduCanId&#160;<br/>
&#160;&#160;Configure&#160;the&#160;CAN&#160;DLC&#160;with the&#160;parameter&#160;<br/>
/MICROSAR/CanIf/CanIfInitCfg/CanIfTxPduCfg/CanIfTxPduDlc&#160;<br/>
&#160;Reference&#160;the&#160;related&#160;functional&#160;request&#160;Tx&#160;global&#160;Pdu&#160;created&#160;in&#160;the&#160;previous&#160;steps&#160;<br/>
with the&#160;parameter&#160;<br/>/MICROSAR/CanIf/CanIfInitCfg/CanIfTxPduCfg/CanIfTxPduRef&#160;<br/>
&#160;Reference&#160;the&#160;related&#160;channel&#160;specific&#160;CanIf&#160;Tx&#160;buffer&#160;object&#160;used&#160;for&#160;transmission&#160;<br/>
of&#160;the&#160;functional&#160;request&#160;message&#160;with the&#160;parameter&#160;<br/>/MICROSAR/CanIf/CanIfInitCfg/CanIfTxPduCfg/CanIfTxPduBufferRef&#160;<br/>
&#160;Assign&#160;the&#160;CanTp&#160;as&#160;upper&#160;layer&#160;user&#160;with the&#160;parameter&#160;/MICROSAR/CanIf/&#160;<br/>
CanIfInitCfg/CanIfTxPduCfg/CanIfTxPduUserTxConfirmationUL&#160;<br/>
&#160;<br/>For&#160;the&#160;example configuration this&#160;results&#160;in&#160;the&#160;following&#160;CanIf&#160;Tx&#160;Pdu&#160;configuration:&#160;<br/>
&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
©&#160;2017&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;3.00.00&#160;<br/>
58&#160;<br/>
based&#160;on&#160;template&#160;version&#160;4.9.2&#160;<br/>
<hr/>
<a name=59></a><img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/PduR/doc/TechnicalReference_PduR-59_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/PduR/doc/TechnicalReference_PduR-59_2.png"/><br/>
<img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/PduR/doc/TechnicalReference_PduR-59_3.png"/><br/>
<img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/PduR/doc/TechnicalReference_PduR-59_4.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;PDU&#160;Router&#160;<br/>
<b>Create&#160;CanTp Rx&#160;channel&#160;&#160;<br/></b>The&#160;following&#160;steps&#160;are&#160;optional&#160;if&#160;the&#160;own&#160;functional&#160;request&#160;routing&#160;path&#160;was&#160;<br/>
&#160;&#160;automatically&#160;derived&#160;based&#160;on&#160;input&#160;files&#160;during&#160;project&#160;setup.&#160;<br/>
&#160;Create a&#160;CanTp Rx&#160;channel&#160;for&#160;the&#160;functional&#160;request&#160;&#160;<br/>
CanTp Rx&#160;channel&#160;container:&#160;/MICROSAR/CanTp/CanTpConfig/CanTpChannel&#160;<br/>
&#160;Create a&#160;CanTp Rx&#160;N-Sdu&#160;container&#160;below&#160;the&#160;previously&#160;created&#160;Rx&#160;channel:&#160;<br/>
/MICROSAR/CanTp/CanTpConfig/CanTpChannel/CanTpRxNSdu&#160;<br/>
&#160;Reference&#160;the&#160;related&#160;global&#160;Pdu&#160;(Sdu,&#160;interconnecting the&#160;CanTp,&#160;PduR&#160;and&#160;<br/>
diagnostic&#160;handler)&#160;created&#160;in the&#160;previous&#160;steps&#160;with the&#160;parameter&#160;&#160;<br/>/MICROSAR/CanTp/CanTpConfig/CanTpChannel/CanTpRxNSdu/CanTpRxNSduRef&#160;<br/>
&#160;Configure&#160;the&#160;Rx&#160;Sdu&#160;as&#160;functional&#160;communication type&#160;with the&#160;parameter&#160;<br/>
/MICROSAR/CanTp/CanTpConfig/CanTpChannel/CanTpRxNSdu/CanTpRxTaType&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;Reference&#160;the&#160;related&#160;global&#160;Pdu&#160;(interconnecting&#160;the&#160;CanIf&#160;and&#160;CanTp)&#160;created&#160;in&#160;<br/>
the&#160;previous&#160;steps&#160;with the&#160;parameter&#160;/MICROSAR/CanTp/CanTpConfig/&#160;<br/>CanTpChannel/CanTpRxNSdu/CanTpRxNPdu/CanTpRxNPduRef&#160;<br/>
&#160;<br/>
&#160;<br/>
For&#160;further&#160;information&#160;regarding&#160;the&#160;CanTp&#160;timing configuration&#160;parameters&#160;please&#160;<br/>refer&#160;t<a href="TechnicalReference_PduRs.html#4">o&#160;[9].</a>&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
&#160;<br/>
©&#160;2017&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;3.00.00&#160;<br/>
59&#160;<br/>
based&#160;on&#160;template&#160;version&#160;4.9.2&#160;<br/>
<hr/>
<a name=60></a><img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/PduR/doc/TechnicalReference_PduR-60_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/PduR/doc/TechnicalReference_PduR-60_2.png"/><br/>
<img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/PduR/doc/TechnicalReference_PduR-60_3.png"/><br/>
<img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/PduR/doc/TechnicalReference_PduR-60_4.png"/><br/>
<img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/PduR/doc/TechnicalReference_PduR-60_5.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;PDU&#160;Router&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Create&#160;CanTp Tx&#160;channels</b>&#160;<br/>
&#160;&#160;&#160;&#160;Create&#160;a&#160;CanTp&#160;Tx&#160;channel&#160;for&#160;every&#160;destination&#160;channel&#160;where the&#160;functional&#160;<br/>
requests&#160;shall&#160;be&#160;routed&#160;to.&#160;<br/>CanTp&#160;Tx&#160;channel&#160;container:&#160;/MICROSAR/CanTp/CanTpConfig/CanTpChannel&#160;<br/>
&#160;&#160;Set&#160;the&#160;channel&#160;mode&#160;of&#160;the&#160;created&#160;Tx&#160;channel&#160;to half-duplex&#160;mode:&#160;<br/>
/MICROSAR/CanTp/CanTpConfig/CanTpChannel/CanTpChannelMode&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;Create a&#160;CanTp&#160;Tx&#160;N-Sdu&#160;container&#160;below&#160;the&#160;previously&#160;created&#160;Tx&#160;channel:&#160;<br/>
/MICROSAR/CanTp/CanTpConfig/CanTpChannel/CanTpTxNSdu&#160;<br/>
&#160;Reference&#160;the&#160;related&#160;global&#160;Pdu&#160;(Sdu,&#160;interconnecting the&#160;CanTp,&#160;PduR&#160;and&#160;<br/>
diagnostic&#160;handler)&#160;created&#160;in the&#160;previous&#160;steps&#160;with the&#160;parameter&#160;&#160;<br/>/MICROSAR/CanTp/CanTpConfig/CanTpChannel/CanTpTxNSdu/CanTpTxNSduRef&#160;<br/>
&#160;Configure&#160;the&#160;Tx&#160;Sdu&#160;as&#160;functional&#160;communication type&#160;with the&#160;parameter&#160;<br/>
/MICROSAR/CanTp/CanTpConfig/CanTpChannel/CanTpTxNSdu/CanTpTxTaType&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>&#160;Reference&#160;the&#160;related&#160;global&#160;Pdu&#160;(interconnecting&#160;the&#160;CanIf&#160;and&#160;CanTp)&#160;created&#160;in&#160;<br/>
the&#160;previous&#160;steps&#160;with the&#160;parameter&#160;/MICROSAR/CanTp/CanTpConfig&#160;<br/>/CanTpChannel/CanTpTxNSdu/CanTpTxNPdu/CanTpTxNPduRef&#160;<br/>
&#160;<br/>
&#160;<br/>
For&#160;further&#160;information&#160;regarding&#160;the&#160;CanTp&#160;timing configuration&#160;parameters&#160;please&#160;<br/>refer&#160;t<a href="TechnicalReference_PduRs.html#4">o&#160;[9].</a>&#160;<br/>
&#160;<br/>
©&#160;2017&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;3.00.00&#160;<br/>
60&#160;<br/>
based&#160;on&#160;template&#160;version&#160;4.9.2&#160;<br/>
<hr/>
<a name=61></a><img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/PduR/doc/TechnicalReference_PduR-61_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/PduR/doc/TechnicalReference_PduR-61_2.png"/><br/>
<img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/PduR/doc/TechnicalReference_PduR-61_3.png"/><br/>
<img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/PduR/doc/TechnicalReference_PduR-61_4.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;PDU&#160;Router&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Create&#160;a&#160;PduR&#160;TP&#160;buffer&#160;</b><br/>
&#160;&#160;The&#160;following&#160;steps&#160;are&#160;optional&#160;if&#160;sufficient&#160;TP&#160;buffers&#160;are&#160;already&#160;configured.&#160;<br/>
&#160;Create a&#160;new&#160;PduR&#160;TP&#160;buffer&#160;which will&#160;be&#160;used&#160;for&#160;the&#160;TP&#160;gateway&#160;routing of&#160;the&#160;<br/>
functional&#160;request&#160;messages.&#160;<br/>/MICROSAR/PduR/PduRRoutingTables/PduRTpBufferTable/PduRTpBuffer&#160;<br/>
&#160;Configure&#160;the&#160;size of&#160;TP&#160;buffer&#160;to&#160;the&#160;TP&#160;payload length of&#160;the&#160;functional&#160;requests.&#160;<br/>
In case&#160;of&#160;CanTp&#160;the&#160;buffer&#160;size must&#160;be&#160;at&#160;least&#160;7 bytes.&#160;<br/>
&#160;<br/>
&#160;<br/>
Please refer&#160;to chapter<a href="TechnicalReference_PduRs.html#27">&#160;3.7.3&#160;</a>for&#160;further&#160;details&#160;regarding&#160;the&#160;TP&#160;buffer&#160;configuration.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Create&#160;/&#160;Extend&#160;PduR&#160;routing&#160;path&#160;</b><br/>
&#160;&#160;Finally&#160;create&#160;a&#160;PduR&#160;1:N&#160;routing&#160;path.&#160;This&#160;1:N&#160;routing&#160;path&#160;shall&#160;route&#160;the received&#160;<br/>
functional&#160;diagnostic&#160;requests&#160;to&#160;the&#160;gateway-own diagnostic&#160;application&#160;and all&#160;<br/>connected&#160;destination&#160;channels.&#160;&#160;<br/>In case&#160;the&#160;functional&#160;request&#160;routing&#160;path&#160;for&#160;the&#160;gateway-own diagnostic&#160;application&#160;<br/>was derived&#160;automatically&#160;the&#160;first&#160;steps&#160;describing&#160;the&#160;creation&#160;of&#160;a&#160;routing&#160;path&#160;can&#160;<br/>be&#160;skipped.&#160;Proceed&#160;with the&#160;configuration of&#160;the&#160;additional&#160;routing&#160;destinations.&#160;<br/>&#160;Create&#160;the&#160;PduR&#160;routing&#160;path:&#160;<br/>
/MICROSAR/PduR/PduRRoutingTables/PduRRoutingTable/PduRRoutingPath&#160;<br/>
&#160;Reference&#160;the&#160;related&#160;functional&#160;request&#160;Rx&#160;global&#160;Pdu&#160;(Sdu,&#160;interconnecting&#160;the&#160;<br/>
CanTp,&#160;PduR&#160;and&#160;diagnostic handler)&#160;at&#160;the&#160;routing&#160;path&#160;source:&#160;<br/>/MICROSAR/PduR/PduRRoutingTables/PduRRoutingTable/PduRRoutingPath/Pd<br/>uRSrcPdu/PduRSrcPduRef&#160;<br/>and the&#160;routing&#160;path&#160;destination:&#160;<br/>/MICROSAR/PduR/PduRRoutingTables/PduRRoutingTable/PduRRoutingPath/Pd<br/>uRDestPdu/PduRDestPduRef&#160;<br/>This&#160;step&#160;is&#160;optional&#160;if&#160;the own functional&#160;request&#160;routing&#160;path was automatically&#160;<br/>derived&#160;based&#160;on&#160;input&#160;files during&#160;project&#160;setup.&#160;<br/>
&#160;Add&#160;a new&#160;routing destination to&#160;the&#160;previously&#160;created&#160;routing&#160;path&#160;for&#160;every&#160;<br/>
destination&#160;channel&#160;the&#160;functional&#160;requests&#160;shall&#160;be&#160;routed&#160;to&#160;<br/>PduR&#160;routing&#160;path&#160;destination:&#160;/MICROSAR/PduR/&#160;<br/>PduRRoutingTables/PduRRoutingTable/PduRRoutingPath/PduRDestPdu&#160;<br/>and reference&#160;the&#160;related&#160;functional&#160;request&#160;Tx&#160;global&#160;Pdu&#160;(Sdu)&#160;at&#160;the&#160;new&#160;routing&#160;<br/>path destination:&#160;<br/>/MICROSAR/PduR/PduRRoutingTables/PduRRoutingTable/PduRRoutingPath/Pd<br/>uRDestPdu/PduRDestPduRef&#160;<br/>
&#160;Configure&#160;the&#160;TP&#160;threshold value&#160;of&#160;the&#160;created&#160;gateway&#160;routing&#160;path&#160;to&#160;the value&#160;1.&#160;<br/>
Please refer&#160;to chapter<a href="TechnicalReference_PduRs.html#26">&#160;3.7.2&#160;</a>for&#160;further&#160;details&#160;of&#160;the&#160;TP&#160;threshold&#160;configuration.&#160;<br/>/MICROSAR/PduR/PduRRoutingTables/PduRRoutingTable/PduRRoutingPath/Pd<br/>uRDestPdu/PduRTpThreshold&#160;&#160;<br/>
&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>
©&#160;2017&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;3.00.00&#160;<br/>
61&#160;<br/>
based&#160;on&#160;template&#160;version&#160;4.9.2&#160;<br/>
<hr/>
<a name=62></a><img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/PduR/doc/TechnicalReference_PduR-62_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/PduR/doc/TechnicalReference_PduR-62_2.png"/><br/>
<img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/PduR/doc/TechnicalReference_PduR-62_3.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;PDU&#160;Router&#160;<br/>
For&#160;the&#160;example configuration this&#160;results&#160;in&#160;the&#160;following&#160;PduR&#160;routing&#160;path&#160;<br/>configuration:&#160;<br/>
<b>RoutingPath&#160;</b><br/>
<b>RoutingPath&#160;Source&#160;</b><br/>
<b>RoutingPath&#160;Destination(s)&#160;Global&#160;</b><br/>
<b>Global&#160;Pdu&#160;</b><br/>
<b>Pdu(s)&#160;</b><br/>
RP_FuncReq_CAN<br/>
RxSdu_FuncReq_CAN0&#160;&#160;RxSdu_FuncReq_CAN0&#160;&#160;<br/>
0_to_CAN1_2&#160;<br/>
(gateway-own&#160;diagnostic&#160;application),&#160;<br/>TxSdu_FuncReq_CAN1,&#160;<br/>TxSdu_FuncReq_CAN2&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
For further&#160;details about&#160;the&#160;CanIf&#160;and&#160;CanTp&#160;modules,&#160;please&#160;refer to<a href="TechnicalReference_PduRs.html#4">&#160;[7]&#160;</a>and<a href="TechnicalReference_PduRs.html#4">&#160;[9].</a>&#160;<br/>&#160;<br/>
©&#160;2017&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;3.00.00&#160;<br/>
62&#160;<br/>
based&#160;on&#160;template&#160;version&#160;4.9.2&#160;<br/>
<hr/>
<a name=63></a><img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/PduR/doc/TechnicalReference_PduR-63_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/PduR/doc/TechnicalReference_PduR-63_2.png"/><br/>
<img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/PduR/doc/TechnicalReference_PduR-63_3.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;PDU&#160;Router&#160;<br/>
<b>6.3&#160;</b><br/>
<b>Use&#160;Case&#160;Configuration:&#160;N:1&#160;routing path&#160;</b><br/>
N:1&#160;&#160;routing&#160;&#160;paths&#160;&#160;are&#160;&#160;not&#160;&#160;specified&#160;&#160;by&#160;&#160;AUTOSAR.&#160;&#160;The&#160;&#160;multiplicity&#160;&#160;of&#160;&#160;a&#160;&#160;PduRSrcPdu&#160;<br/>container&#160;is&#160;defined&#160;to&#160;one.&#160;Therefore&#160;N&#160;single&#160;1:1/1:M&#160;routing&#160;paths&#160;(mixture&#160;of&#160;1:M/N:1&#160;<br/>routing&#160;paths&#160;is&#160;supported)&#160;referencing&#160;the&#160;same&#160;global&#160;Pdu&#160;in&#160;one&#160;of&#160;their&#160;PduRDestPdu&#160;<br/>container&#160;&#160;must&#160;&#160;be&#160;&#160;configured.&#160;&#160;Every&#160;&#160;PduRSrcPdu&#160;&#160;container&#160;&#160;must&#160;&#160;reference&#160;&#160;their&#160;&#160;own&#160;<br/>global&#160;PDU,&#160;duplicates&#160;are&#160;not&#160;allowed.&#160;Whereas&#160;more&#160;than&#160;one&#160;PduRDestPdu&#160;container&#160;<br/>may&#160;&#160;reference&#160;&#160;the&#160;&#160;same&#160;&#160;global&#160;&#160;PDU&#160;&#160;to&#160;&#160;support&#160;&#160;the&#160;&#160;N:1&#160;&#160;routing&#160;&#160;feature.&#160;&#160;An&#160;&#160;example&#160;<br/>configuration&#160;is&#160;shown&#160;<a href="TechnicalReference_PduRs.html#63">in&#160;Figure&#160;6-5.&#160;</a>Both&#160;configured&#160;routing&#160;paths&#160;are&#160;1:2&#160;routing&#160;paths,&#160;<br/>but&#160;&#160;both&#160;&#160;routing&#160;&#160;paths&#160;&#160;refer&#160;&#160;to&#160;&#160;the&#160;&#160;same&#160;&#160;global&#160;&#160;PDU&#160;&#160;in&#160;&#160;one&#160;&#160;of&#160;&#160;their&#160;&#160;two&#160;&#160;PduRDestPdu&#160;<br/>container.&#160;That&#160;makes&#160;them&#160;also&#160;a&#160;2:1&#160;routing&#160;path.&#160;The&#160;data&#160;flow&#160;is&#160;shown&#160;in<a href="TechnicalReference_PduRs.html#64">&#160;Figure&#160;6-6.</a>&#160;<br/>The&#160;names refer to&#160;the&#160;example&#160;configuration&#160;in<a href="TechnicalReference_PduRs.html#63">&#160;Figure&#160;6-5.</a>&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/></b>Cancel&#160;Transmit&#160;for&#160;N:1&#160;routing&#160;paths&#160;is&#160;only&#160;supported&#160;if&#160;a&#160;Tx&#160;Confirmation&#160;is&#160;enabled.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>
&#160;<br/>
Figure&#160;6-5:&#160;example&#160;N:1&#160;routing&#160;path&#160;configuration&#160;<br/>
©&#160;2017&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;3.00.00&#160;<br/>
63&#160;<br/>
based&#160;on&#160;template&#160;version&#160;4.9.2&#160;<br/>
<hr/>
<a name=64></a><img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/PduR/doc/TechnicalReference_PduR-64_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/PduR/doc/TechnicalReference_PduR-64_2.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;PDU&#160;Router&#160;<br/>
&#160;<br/>
Figure&#160;6-6&#160;&#160;EcuC&#160;configuration&#160;of&#160;(mixed)&#160;N:1&#160;/&#160;1:N&#160;routing&#160;paths&#160;<br/>
©&#160;2017&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;3.00.00&#160;<br/>
64&#160;<br/>
based&#160;on&#160;template&#160;version&#160;4.9.2&#160;<br/>
<hr/>
<a name=65></a><img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/PduR/doc/TechnicalReference_PduR-65_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;PDU&#160;Router&#160;<br/>
<b>7&#160;&#160;AUTOSAR&#160;Standard&#160;Compliance&#160;</b><br/>
<b>7.1&#160;</b><br/>
<b>Deviations&#160;</b><br/>
&#160;The&#160;API&#160;PduR_&lt;User:LoTp&gt;StartOfReception&#160;is implemented&#160;according&#160;to&#160;<br/>
SWS_PduR_00507&#160;ASR 4.1.2<a href="TechnicalReference_PduRs.html#4">&#160;[3]&#160;</a>&#160;<br/>&#160;The&#160;PduR does&#160;not&#160;provide&#160;the&#160;return value&#160;&#160;“BUFREQ_E_BUSY”&#160;for the&#160;function&#160;<br/>
PduR_&lt;User:LoTp&gt;StartOfReception&#160;like&#160;specified&#160;in&#160;Requirement&#160;PDUR507&#160;in&#160;<a href="TechnicalReference_PduRs.html#4">&#160;[1].&#160;</a>&#160;<br/>
&#160;The&#160;parameter list&#160;contains&#160;a&#160;PduInfoType&#160;<br/>
&#160;<br/>
&#160;The&#160;API&#160;PduR_&lt;User:LoTp&gt;RxIndication&#160;is&#160;implemented&#160;according&#160;to&#160;<br/>
SWS_PduR_00375&#160;ASR 4.1.2<a href="TechnicalReference_PduRs.html#4">&#160;[3]&#160;<br/></a>&#160;Result type&#160;changed&#160;to&#160;Std_ReturnType&#160;<br/>&#160;<br/>
&#160;The&#160;API&#160;PduR_&lt;User:LoTp&gt;TxConfirmation&#160;is implemented&#160;according&#160;to&#160;<br/>
SWS_PduR_00381&#160;ASR 4.1.2<a href="TechnicalReference_PduRs.html#4">&#160;[3]&#160;<br/></a>&#160;Result type&#160;changed&#160;to&#160;Std_ReturnType&#160;<br/>&#160;<br/>
&#160;The&#160;PduR does&#160;not&#160;provide&#160;the&#160;return&#160;value&#160;“BUFREQ_E_BUSY”&#160;for the&#160;function&#160;<br/>
PduR_&lt;User:LoTp&gt;CopyRxData&#160;like&#160;specified&#160;in&#160;Requirement&#160;PDUR512&#160;in<a href="TechnicalReference_PduRs.html#4">&#160;[1].&#160;</a>The&#160;API&#160;<br/>is implemented&#160;according&#160;to&#160;SWS_PduR_00512&#160;ASR 4.1.1<a href="TechnicalReference_PduRs.html#4">&#160;[2]&#160;</a><br/>
&#160;<br/>
&#160;If&#160;the&#160;PduR_&lt;Lo&gt;StartOfReception&#160;is called&#160;with&#160;an&#160;I-PDU&#160;ID that&#160;is already&#160;in&#160;process,&#160;<br/>
the&#160;PDU&#160;Router&#160;does&#160;not&#160;forward the&#160;call&#160;to&#160;the&#160;upper&#160;module&#160;<br/>
&#160;<br/>
&#160;In&#160;case&#160;a&#160;transport protocol&#160;module&#160;reports PduR_&lt;LoTp&gt;TxConfirmation&#160;with&#160;result&#160;<br/>
other than&#160;NTFRSLT_OK&#160;the&#160;PDUR does not&#160;forward the&#160;result in&#160;the&#160;<br/>&lt;Up&gt;_TpTxConfirmation&#160;to&#160;the&#160;source&#160;upper layer module&#160;due&#160;to&#160;optimization&#160;reason.&#160;<br/>
&#160;<br/>
&#160;The&#160;PduR does&#160;not&#160;support&#160;the&#160;retry&#160;parameter in&#160;the&#160;PduR_&lt;LoTp&gt;CopyTxData&#160;like&#160;<br/>
specified&#160;in&#160;Requirement&#160;PDUR518&#160;<a href="TechnicalReference_PduRs.html#4">in&#160;[1]&#160;</a><br/>
&#160;<br/>
&#160;State&#160;Management:&#160;PDUR_REDUCED is not&#160;used&#160;<br/>
&#160;<br/>
&#160;PduR does&#160;not&#160;return&#160;any&#160;value&#160;if&#160;a&#160;routing&#160;path&#160;group&#160;is disabled&#160;<br/>
&#160;<br/>
&#160;PduR does&#160;not&#160;clear the&#160;buffers if&#160;a&#160;routing&#160;path&#160;group&#160;is&#160;disabled&#160;<br/>
&#160;<br/>
&#160;The&#160;header&#160;files does&#160;not&#160;contain&#160;software and&#160;specification&#160;version&#160;number&#160;<br/>
&#160;<br/>
&#160;If&#160;the&#160;routing&#160;path&#160;group&#160;id&#160;does&#160;not&#160;exist,&#160;then&#160;the&#160;PDUR call&#160;the&#160;DET&#160;instate&#160;of&#160;return&#160;<br/>
with&#160;no&#160;action.&#160;[PDUR0716]&#160;<br/>
&#160;<br/>
©&#160;2017&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;3.00.00&#160;<br/>
65&#160;<br/>
based&#160;on&#160;template&#160;version&#160;4.9.2&#160;<br/>
<hr/>
<a name=66></a><img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/PduR/doc/TechnicalReference_PduR-66_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;PDU&#160;Router&#160;<br/>
<b>7.2&#160;</b><br/>
<b>Limitations&#160;</b><br/>
Since&#160;8-bit&#160;micro&#160;controllers&#160;are&#160;out&#160;of&#160;scope&#160;in&#160;AUTOSAR,&#160;PDUR&#160;has&#160;been&#160;optimized&#160;for&#160;<br/>the&#160;&#160;usage&#160;&#160;on&#160;&#160;16-&#160;&#160;and&#160;&#160;32-bit&#160;&#160;controllers.&#160;&#160;Therefore&#160;&#160;the&#160;&#160;target&#160;&#160;system&#160;&#160;must&#160;&#160;be&#160;&#160;able&#160;&#160;to&#160;<br/>provide&#160;atomic read&#160;and&#160;write&#160;accesses to&#160;16-bit variables.&#160;<br/>
&#160;<br/>
<b>7.2.1&#160;</b><br/>
<b>General&#160;</b><br/>
&#160;&#160;Link-time&#160;configuration support&#160;<br/>&#160;&#160;Multiple Configuration&#160;support&#160;<br/>&#160;&#160;1:N&#160;fan-out&#160;from&#160;the&#160;same upper&#160;layer&#160;PDU&#160;<br/>&#160;&#160;N:1&#160;fan-in to&#160;the&#160;same&#160;upper&#160;layer&#160;PDU&#160;<br/>&#160;<br/>
&#160;<br/>
©&#160;2017&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;3.00.00&#160;<br/>
66&#160;<br/>
based&#160;on&#160;template&#160;version&#160;4.9.2&#160;<br/>
<hr/>
<a name=67></a><img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/PduR/doc/TechnicalReference_PduR-67_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;PDU&#160;Router&#160;<br/>
<b>8&#160;&#160;Glossary&#160;and&#160;Abbreviations&#160;</b><br/>
<b>8.1&#160;</b><br/>
<b>Glossary&#160;</b><br/>
<b>Term&#160;</b><br/>
<b>Description&#160;</b><br/>
BSWMD&#160;<br/>
The&#160;BSWMD&#160;is&#160;a&#160;formal&#160;notation of&#160;all&#160;information belonging&#160;to&#160;a certain&#160;<br/>BSW&#160;artifact&#160;(BSW&#160;module or&#160;BSW&#160;cluster)&#160;in addition&#160;to&#160;the&#160;<br/>implementation&#160;of&#160;that&#160;artifact.&#160;<br/>
Buffer&#160;<br/>
A&#160;buffer&#160;in a&#160;memory&#160;area&#160;located&#160;in&#160;the&#160;RAM.&#160;It&#160;is&#160;an&#160;memory&#160;area&#160;<br/>reserved&#160;by&#160;the&#160;application&#160;for&#160;data storage.&#160;<br/>
Callback&#160;function&#160;<br/>
This&#160;is&#160;a&#160;function&#160;provided by&#160;an&#160;application.&#160;E.g.&#160;the&#160;CAN&#160;Driver&#160;calls&#160;a&#160;<br/>callback&#160;function&#160;to&#160;allow&#160;the&#160;application to&#160;control&#160;some&#160;action,&#160;to&#160;make&#160;<br/>decisions&#160;at&#160;runtime and&#160;to influence&#160;the&#160;work&#160;of&#160;the&#160;driver.&#160;<br/>
Cfg5&#160;<br/>
DaVinci&#160;Configurator&#160;<br/>
Channel&#160;<br/>
A&#160;channel&#160;defines&#160;the&#160;assignment&#160;(1:1)&#160;between&#160;a physical&#160;<br/>communication&#160;interface&#160;and&#160;a physical&#160;layer&#160;on&#160;which different&#160;modules&#160;<br/>are&#160;connected&#160;to&#160;(either&#160;CAN&#160;or&#160;LIN).&#160;1&#160;channel&#160;consists&#160;of&#160;1..X&#160;<br/>network(s).&#160;<br/>
Component&#160;<br/>
CAN&#160;Driver,&#160;Network&#160;Management&#160;...&#160;are&#160;software&#160;COMPONENTS&#160;in&#160;<br/>contrast&#160;to&#160;the&#160;expression&#160;module,&#160;which describes an&#160;ECU.&#160;<br/>
Confirmation&#160;<br/>
A&#160;service primitive defined in&#160;the&#160;ISO/OSI&#160;Reference Model&#160;(ISO&#160;7498).&#160;<br/>With&#160;the&#160;service primitive 'confirmation'&#160;a service provider&#160;informs&#160;a&#160;<br/>service user&#160;about&#160;the&#160;result&#160;of&#160;a&#160;preceding&#160;service request&#160;of&#160;the&#160;service&#160;<br/>user.&#160;Notification&#160;by&#160;the&#160;CAN&#160;Driver&#160;on&#160;asynchronous successful&#160;<br/>transmission&#160;of&#160;a&#160;CAN&#160;message.&#160;<br/>
Critical&#160;section&#160;<br/>
A&#160;critical&#160;section&#160;is&#160;a sequence of&#160;instructions&#160;where&#160;mutual&#160;exclusion&#160;<br/>must&#160;be&#160;ensured.&#160;Such&#160;a&#160;section&#160;is&#160;called&#160;'critical'&#160;because shared&#160;data is&#160;<br/>modified&#160;within it.&#160;<br/>
Electronic&#160;Control&#160;<br/>
Also known as&#160;ECU.&#160;Small&#160;embedded&#160;computer&#160;system&#160;consisting&#160;of&#160;at&#160;<br/>
Unit&#160;<br/>
least&#160;one CPU&#160;and&#160;corresponding&#160;periphery&#160;which is placed in&#160;one&#160;<br/>housing.&#160;<br/>
Event&#160;<br/>
An exclusive signal&#160;which is assigned&#160;to&#160;a certain&#160;extended task.&#160;An&#160;<br/>event&#160;can&#160;be&#160;used&#160;to&#160;send&#160;binary&#160;information&#160;to&#160;an&#160;extended task.&#160;The&#160;<br/>meaning&#160;of&#160;events&#160;is&#160;defined by&#160;the&#160;application.&#160;Any&#160;task&#160;can&#160;set&#160;an&#160;<br/>event&#160;for&#160;an&#160;extended&#160;task.&#160;The&#160;event&#160;can&#160;only&#160;be&#160;cleared&#160;by&#160;the&#160;task&#160;<br/>which is assigned&#160;to&#160;the&#160;event.&#160;<br/>
Gateway&#160;<br/>
A&#160;gateway&#160;is&#160;designed&#160;to&#160;enable communication&#160;between different&#160;bus&#160;<br/>systems,&#160;e.g.&#160;from&#160;CAN&#160;to LIN.&#160;<br/>
Indication&#160;<br/>
A&#160;service primitive defined in&#160;the&#160;ISO/OSI&#160;Reference Model&#160;(ISO&#160;7498).&#160;<br/>With&#160;the&#160;service primitive 'indication'&#160;a service provider&#160;informs&#160;a&#160;service&#160;<br/>user&#160;about&#160;the&#160;occurrence of&#160;either&#160;an&#160;internal&#160;event&#160;or&#160;a&#160;service request&#160;<br/>issued by&#160;another&#160;service user.&#160;Notification of&#160;application in&#160;case&#160;of&#160;<br/>events&#160;in the&#160;Vector&#160;software&#160;components,&#160;e.g.&#160;an asynchronous&#160;<br/>reception of&#160;a&#160;CAN&#160;message.&#160;<br/>
Interrupt&#160;<br/>
Processor-specific&#160;event&#160;which can&#160;interrupt&#160;the&#160;execution&#160;of&#160;a&#160;current&#160;<br/>program&#160;section.&#160;<br/>
Interrupt&#160;service&#160;<br/>
The&#160;function&#160;used&#160;for&#160;direct&#160;processing&#160;of&#160;an&#160;interrupt.&#160;<br/>
©&#160;2017&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;3.00.00&#160;<br/>
67&#160;<br/>
based&#160;on&#160;template&#160;version&#160;4.9.2&#160;<br/>
<hr/>
<a name=68></a><img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/PduR/doc/TechnicalReference_PduR-68_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;PDU&#160;Router&#160;<br/>
routine&#160;<br/>Network&#160;<br/>
A&#160;network&#160;defines&#160;the&#160;assignment&#160;(1:N)&#160;between a&#160;logical&#160;communication&#160;<br/>grouping&#160;and a&#160;physical&#160;layer&#160;on&#160;which different&#160;modules are&#160;connected&#160;<br/>to&#160;(either&#160;CAN&#160;or&#160;LIN).&#160;One&#160;network&#160;consists&#160;of&#160;one&#160;channel,&#160;Y&#160;networks&#160;<br/>consists&#160;of&#160;1..Z channel(s).&#160;We&#160;say&#160;network&#160;if&#160;we&#160;talk&#160;about&#160;more&#160;than&#160;<br/>one bus.&#160;<br/>
Overrun&#160;<br/>
Overwriting&#160;data in&#160;a&#160;memory&#160;with limited&#160;capacity,&#160;e.g.&#160;queued&#160;message&#160;<br/>object.&#160;<br/>
Post-build&#160;<br/>
This&#160;type&#160;of&#160;configuration is possible after&#160;building&#160;the&#160;software&#160;module&#160;or&#160;<br/>the&#160;ECU&#160;software.&#160;The&#160;software&#160;may&#160;either&#160;receive parameters&#160;of&#160;its&#160;<br/>configuration&#160;during&#160;the&#160;download of&#160;the&#160;complete ECU&#160;software&#160;resulting&#160;<br/>from&#160;the&#160;linkage of&#160;the&#160;code,&#160;or&#160;it&#160;may&#160;receive its&#160;configuration&#160;file that&#160;<br/>can&#160;be&#160;downloaded to&#160;the ECU&#160;separately,&#160;avoiding&#160;a&#160;re-compilation and&#160;<br/>re-build of&#160;the&#160;ECU&#160;software&#160;modules.&#160;In&#160;order&#160;to&#160;make&#160;the&#160;post-build&#160;<br/>time&#160;re-configuration&#160;possible,&#160;the&#160;re-configurable&#160;parameters&#160;shall&#160;be&#160;<br/>stored&#160;at&#160;a&#160;known memory&#160;location&#160;of&#160;ECU&#160;storage&#160;area.&#160;<br/>
Schedule table&#160;<br/>
Table&#160;containing&#160;the sequence of&#160;LIN&#160;message identifiers&#160;to&#160;be&#160;<br/>transmitted&#160;together&#160;with the&#160;message delay.&#160;<br/>
Signal&#160;<br/>
A&#160;signal&#160;is&#160;responsible&#160;for&#160;the&#160;logical&#160;transmission&#160;and&#160;reception&#160;of&#160;<br/>information&#160;depending&#160;on the&#160;restrictions&#160;of&#160;the&#160;physical&#160;layer.&#160;The&#160;<br/>definition&#160;of&#160;the&#160;signal&#160;contents&#160;is&#160;part&#160;of&#160;the&#160;database&#160;given&#160;by&#160;the&#160;<br/>vehicle manufacturer.&#160;Signals&#160;describe&#160;the&#160;significance of&#160;the&#160;individual&#160;<br/>data segments&#160;within a&#160;message.&#160;&#160;Typically&#160;bits,&#160;bytes or&#160;words&#160;are used&#160;<br/>for&#160;data&#160;segments&#160;but&#160;individual&#160;bit&#160;combinations&#160;are&#160;also possible.&#160;In&#160;the&#160;<br/>CAN&#160;data base,&#160;each data segment&#160;is&#160;assigned&#160;a&#160;symbolic&#160;name,&#160;a&#160;<br/>value&#160;range,&#160;a&#160;conversion&#160;formula and&#160;a&#160;physical&#160;unit,&#160;as&#160;well&#160;as a&#160;list&#160;of&#160;<br/>receiving&#160;nodes.&#160;<br/>
Transport&#160;Protocol&#160;<br/>
Some&#160;information&#160;that&#160;must&#160;be&#160;transferred over&#160;the&#160;CAN/LIN bus&#160;does&#160;<br/>not&#160;fit&#160;into individual&#160;message&#160;frames&#160;because&#160;the data&#160;length&#160;exceeds&#160;<br/>the&#160;maximum&#160;of&#160;8&#160;bytes.&#160;In&#160;this&#160;case,&#160;the&#160;sender&#160;must&#160;divide&#160;up&#160;the&#160;data&#160;<br/>into&#160;a number&#160;of&#160;messages.&#160;Additional&#160;information is necessary&#160;for&#160;the&#160;<br/>receiver&#160;to&#160;put&#160;the&#160;data&#160;together&#160;again.&#160;<br/>
Use case&#160;<br/>
A&#160;model&#160;of&#160;the&#160;usage by&#160;the&#160;user&#160;of&#160;a&#160;system&#160;in order&#160;to&#160;realize a&#160;single&#160;<br/>functional&#160;feature of&#160;the&#160;system.&#160;<br/>
Table&#160;8-1&#160;&#160;&#160;Glossary&#160;<br/>
<b>8.2&#160;</b><br/>
<b>Abbreviations&#160;</b><br/>
<b>Abbreviation&#160;</b><br/>
<b>Description&#160;</b><br/>
API&#160;<br/>
Application Programming Interface&#160;&#160;&#160;<br/>
AUTOSAR&#160;<br/>
Automotive Open System&#160;Architecture&#160;<br/>
BSW&#160;<br/>
Basis&#160;Software&#160;<br/>
BSWMD&#160;<br/>
Basic&#160;Software&#160;Module Description&#160;<br/>
CAN&#160;<br/>
Controller&#160;Area&#160;Network&#160;protocol&#160;originally&#160;defined&#160;for&#160;use&#160;as&#160;a&#160;<br/>communication&#160;network&#160;for&#160;control&#160;applications&#160;in&#160;vehicles.&#160;<br/>
CDD&#160;<br/>
Complex&#160;Device Driver&#160;<br/>
COM&#160;<br/>
Communication&#160;<br/>
©&#160;2017&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;3.00.00&#160;<br/>
68&#160;<br/>
based&#160;on&#160;template&#160;version&#160;4.9.2&#160;<br/>
<hr/>
<a name=69></a><img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/PduR/doc/TechnicalReference_PduR-69_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;PDU&#160;Router&#160;<br/>
DCM&#160;<br/>
Diagnostic&#160;Communication&#160;Manager&#160;<br/>
DEM&#160;<br/>
Diagnostic&#160;Event&#160;Manager&#160;<br/>
DET&#160;<br/>
Development&#160;Error&#160;Tracer&#160;<br/>
DLC&#160;<br/>
Data&#160;Length&#160;Code,&#160;Number&#160;of&#160;data bytes&#160;of&#160;a CAN&#160;message&#160;<br/>
EAD&#160;<br/>
Embedded&#160;Architecture&#160;Designer&#160;<br/>
ECU&#160;<br/>
Electronic&#160;Control&#160;Unit&#160;<br/>
ECUC&#160;<br/>
ECU&#160;Configuration&#160;<br/>
FIFO&#160;<br/>
First&#160;In First&#160;Out&#160;<br/>
HIS&#160;<br/>
Hersteller&#160;Initiative Software&#160;<br/>
ID&#160;<br/>
Identifier&#160;(e.g.&#160;Identifier&#160;of&#160;a&#160;CAN&#160;message)&#160;<br/>
ISR&#160;<br/>
Interrupt&#160;Service Routine&#160;<br/>
LIN&#160;<br/>
Local&#160;Interconnect&#160;Network&#160;<br/>
MICROSAR&#160;<br/>
Microcontroller&#160;Open&#160;System&#160;Architecture&#160;(the&#160;Vector&#160;AUTOSAR&#160;<br/>solution)&#160;<br/>
MSN&#160;<br/>
Module shortname&#160;<br/>
PDU&#160;<br/>
Protocol&#160;Data Unit&#160;<br/>
PDUR&#160;<br/>
PDU&#160;Router&#160;<br/>
RAM&#160;<br/>
Random&#160;Access&#160;Memory&#160;<br/>
ROM&#160;<br/>
Read-Only&#160;Memory&#160;<br/>
RTE&#160;<br/>
Runtime Environment&#160;<br/>
SDU&#160;<br/>
Segmented&#160;Data&#160;Unit&#160;<br/>
SRS&#160;<br/>
Software&#160;Requirement&#160;Specification&#160;<br/>
SWC&#160;<br/>
Software&#160;Component&#160;<br/>
SWS&#160;<br/>
Software&#160;Specification&#160;<br/>
TP&#160;<br/>
Transport&#160;Protocol&#160;<br/>
Table&#160;8-2&#160;&#160;&#160;Abbreviations&#160;<br/>
&#160;<br/>
&#160;<br/>
©&#160;2017&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;3.00.00&#160;<br/>
69&#160;<br/>
based&#160;on&#160;template&#160;version&#160;4.9.2&#160;<br/>
<hr/>
<a name=70></a><img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/PduR/doc/TechnicalReference_PduR-70_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;PDU&#160;Router&#160;<br/>
<b>9&#160;&#160;Contact&#160;</b><br/>
Visit&#160;our website&#160;for&#160;more information&#160;on&#160;<br/>&#160;<br/><b>&#160;&#160;</b>News&#160;<br/>
<b>&#160;&#160;</b>Products&#160;<br/>
<b>&#160;&#160;</b>Demo&#160;software&#160;<br/>
<b>&#160;&#160;</b>Support&#160;<br/>
<b>&#160;&#160;</b>Training&#160;data&#160;<br/>
<b>&#160;&#160;</b>Addresses&#160;<br/>
&#160;<br/>www.vector.com&#160;<br/>
&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>
©&#160;2017&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;3.00.00&#160;<br/>
70&#160;<br/>
based&#160;on&#160;template&#160;version&#160;4.9.2&#160;<br/>
<hr/>
<a name="outline"></a><h1>Document Outline</h1>
<ul>
<li><a href="TechnicalReference_PduRs.html#10">1 Component History</a></li>
<li><a href="TechnicalReference_PduRs.html#11">2 Introduction</a>
<ul>
<li><a href="TechnicalReference_PduRs.html#12">2.1 Architecture Overview</a></li>
</ul>
</li>
<li><a href="TechnicalReference_PduRs.html#14">3 Functional Description</a>
<ul>
<li><a href="TechnicalReference_PduRs.html#14">3.1 Features</a></li>
<li><a href="TechnicalReference_PduRs.html#15">3.2 Interfaces to adjacent modules of the PDUR</a></li>
<li><a href="TechnicalReference_PduRs.html#15">3.3 Initialization</a></li>
<li><a href="TechnicalReference_PduRs.html#15">3.4 States</a></li>
<li><a href="TechnicalReference_PduRs.html#15">3.5 Error Handling</a>
<ul>
<li><a href="TechnicalReference_PduRs.html#15">3.5.1 Development Error Reporting</a></li>
</ul>
</li>
<li><a href="TechnicalReference_PduRs.html#15">3.6 Interface Layer Gateway</a>
<ul>
<li><a href="TechnicalReference_PduRs.html#15">3.6.1 Data Provision</a>
<ul>
<li><a href="TechnicalReference_PduRs.html#15">3.6.1.1 Direct data provision</a></li>
<li><a href="TechnicalReference_PduRs.html#16">3.6.1.2 Trigger transmit data provision</a></li>
</ul>
</li>
<li><a href="TechnicalReference_PduRs.html#16">3.6.2 FIFO Queue</a></li>
<li><a href="TechnicalReference_PduRs.html#16">3.6.3 Buffer Configurations</a>
<ul>
<li><a href="TechnicalReference_PduRs.html#16">3.6.3.1 No Buffer</a></li>
<li><a href="TechnicalReference_PduRs.html#16">3.6.3.2 Direct Data Provision FIFO</a></li>
<li><a href="TechnicalReference_PduRs.html#16">3.6.3.3 Trigger Transmit Data Provision FIFO</a></li>
<li><a href="TechnicalReference_PduRs.html#16">3.6.3.4 Trigger Transmit Data Provision Single Buffer</a></li>
</ul>
</li>
<li><a href="TechnicalReference_PduRs.html#17">3.6.4 Shared Tx Buffer Pool support</a></li>
<li><a href="TechnicalReference_PduRs.html#17">3.6.5 Timing aspects</a></li>
<li><a href="TechnicalReference_PduRs.html#17">3.6.6 Dynamic DLC Routing</a></li>
<li><a href="TechnicalReference_PduRs.html#17">3.6.7 Transport protocol low level routing</a></li>
<li><a href="TechnicalReference_PduRs.html#19">3.6.8 Smart Learning (Switching)</a>
<ul>
<li><a href="TechnicalReference_PduRs.html#20">3.6.8.1 Configuration</a></li>
<li><a href="TechnicalReference_PduRs.html#23">3.6.8.2 Example</a></li>
</ul>
</li>
<li><a href="TechnicalReference_PduRs.html#24">3.6.9 Queue overflow notification callback</a></li>
</ul>
</li>
<li><a href="TechnicalReference_PduRs.html#26">3.7 Transport Protocol Gateway</a>
<ul>
<li><a href="TechnicalReference_PduRs.html#26">3.7.1 Multi-Routing</a></li>
<li><a href="TechnicalReference_PduRs.html#26">3.7.2 TP Threshold</a>
<ul>
<li><a href="TechnicalReference_PduRs.html#27">3.7.2.1 Restrictions</a></li>
<li><a href="TechnicalReference_PduRs.html#27">3.7.2.2 Threshold “0”</a></li>
</ul>
</li>
<li><a href="TechnicalReference_PduRs.html#27">3.7.3 Tx Buffer Handling</a>
<ul>
<li><a href="TechnicalReference_PduRs.html#28">3.7.3.1 Tx Buffer Usage Types</a>
<ul>
<li><a href="TechnicalReference_PduRs.html#28">3.7.3.1.1 Dedicated Tx Buffer</a></li>
<li><a href="TechnicalReference_PduRs.html#28">3.7.3.1.2 Shared Tx Buffer</a></li>
<li><a href="TechnicalReference_PduRs.html#29">3.7.3.1.3 Local Tx Buffer Pool</a></li>
<li><a href="TechnicalReference_PduRs.html#29">3.7.3.1.4 Global Tx Buffer Pool</a></li>
</ul>
</li>
<li><a href="TechnicalReference_PduRs.html#29">3.7.3.2 Example Configuration</a></li>
<li><a href="TechnicalReference_PduRs.html#30">3.7.3.3 Tx Buffer Length Configuration</a></li>
<li><a href="TechnicalReference_PduRs.html#30">3.7.3.4 Amount of Tx Buffer</a></li>
<li><a href="TechnicalReference_PduRs.html#31">3.7.3.5 Tx Buffer Selection Algorithm</a></li>
</ul>
</li>
<li><a href="TechnicalReference_PduRs.html#31">3.7.4 TP Queue</a></li>
<li><a href="TechnicalReference_PduRs.html#31">3.7.5 Error Handling</a></li>
<li><a href="TechnicalReference_PduRs.html#32">3.7.6 Meta Data Handling</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="TechnicalReference_PduRs.html#33">4 Integration</a>
<ul>
<li><a href="TechnicalReference_PduRs.html#33">4.1 Scope of Delivery</a>
<ul>
<li><a href="TechnicalReference_PduRs.html#33">4.1.1 Static Files</a></li>
<li><a href="TechnicalReference_PduRs.html#33">4.1.2 Dynamic Files</a></li>
</ul>
</li>
<li><a href="TechnicalReference_PduRs.html#34">4.2 Critical Sections</a></li>
<li><a href="TechnicalReference_PduRs.html#34">4.3 Memory Section</a></li>
<li><a href="TechnicalReference_PduRs.html#34">4.4 Type Definitions</a></li>
</ul>
</li>
<li><a href="TechnicalReference_PduRs.html#35">5 API Description</a>
<ul>
<li><a href="TechnicalReference_PduRs.html#35">5.1 Services provided by PDUR</a>
<ul>
<li><a href="TechnicalReference_PduRs.html#35">5.1.1 PduR_Init</a></li>
<li><a href="TechnicalReference_PduRs.html#35">5.1.2 PduR_InitMemory</a></li>
</ul>
</li>
<li><a href="TechnicalReference_PduRs.html#36">5.2 Services</a>
<ul>
<li><a href="TechnicalReference_PduRs.html#36">5.2.1 PduR_GetVersionInfo</a></li>
<li><a href="TechnicalReference_PduRs.html#36">5.2.2 PduR_GetConfigurationId</a></li>
<li><a href="TechnicalReference_PduRs.html#36">5.2.3 PduR_EnableRouting</a></li>
<li><a href="TechnicalReference_PduRs.html#37">5.2.4 PduR_DisableRouting</a></li>
</ul>
</li>
<li><a href="TechnicalReference_PduRs.html#38">5.3 Communication Interface</a>
<ul>
<li><a href="TechnicalReference_PduRs.html#38">5.3.1 PduR_&lt;GenericUp&gt;Transmit</a></li>
<li><a href="TechnicalReference_PduRs.html#38">5.3.2 PduR_&lt;GenericLo&gt;RxIndication</a></li>
<li><a href="TechnicalReference_PduRs.html#39">5.3.3 PduR_&lt;GenericLo&gt;TriggerTransmit</a></li>
<li><a href="TechnicalReference_PduRs.html#40">5.3.4 PduR_&lt;GenericLo&gt;TxConfirmation</a></li>
</ul>
</li>
<li><a href="TechnicalReference_PduRs.html#41">5.4 Transport Protocol</a>
<ul>
<li><a href="TechnicalReference_PduRs.html#41">5.4.1 PduR_&lt;GenericUpTp&gt;ChangeParameter</a></li>
<li><a href="TechnicalReference_PduRs.html#41">5.4.2 PduR_&lt;GenericUpTp&gt;CancelReceive</a></li>
<li><a href="TechnicalReference_PduRs.html#42">5.4.3 PduR_&lt;GenericUpTp&gt;CancelTransmit</a></li>
<li><a href="TechnicalReference_PduRs.html#43">5.4.4 PduR_&lt;GenericLoTp&gt;StartOfReception</a></li>
<li><a href="TechnicalReference_PduRs.html#43">5.4.5 PduR_&lt;GenericLoTp&gt;CopyRxData</a></li>
<li><a href="TechnicalReference_PduRs.html#44">5.4.6 PduR_&lt;GenericLoTp&gt;CopyTxData</a></li>
<li><a href="TechnicalReference_PduRs.html#45">5.4.7 PduR_&lt;GenericLo&gt;TpTxConfirmation</a></li>
<li><a href="TechnicalReference_PduRs.html#46">5.4.8 PduR_&lt;GenericLo&gt;TpRxIndication</a></li>
<li><a href="TechnicalReference_PduRs.html#47">5.4.9 PduR_&lt;GenericUpTp&gt;Transmit</a></li>
</ul>
</li>
<li><a href="TechnicalReference_PduRs.html#48">5.5 Service Ports</a>
<ul>
<li><a href="TechnicalReference_PduRs.html#48">5.5.1 Complex Device Driver Interaction</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="TechnicalReference_PduRs.html#49">6 Configuration</a>
<ul>
<li><a href="TechnicalReference_PduRs.html#49">6.1 Use Case Configuration: Communication interface range gateway</a>
<ul>
<li><a href="TechnicalReference_PduRs.html#50">6.1.1 Step-by-step configuration</a></li>
<li><a href="TechnicalReference_PduRs.html#54">6.1.2 Optional configuration variants / options</a></li>
</ul>
</li>
<li><a href="TechnicalReference_PduRs.html#56">6.2 Use Case Configuration: Functional requests gateway routing</a>
<ul>
<li><a href="TechnicalReference_PduRs.html#57">6.2.1 Step-by-step configuration</a></li>
</ul>
</li>
<li><a href="TechnicalReference_PduRs.html#63">6.3 Use Case Configuration: N:1 routing path</a></li>
</ul>
</li>
<li><a href="TechnicalReference_PduRs.html#65">7 AUTOSAR Standard Compliance</a>
<ul>
<li><a href="TechnicalReference_PduRs.html#65">7.1 Deviations</a></li>
<li><a href="TechnicalReference_PduRs.html#66">7.2 Limitations</a>
<ul>
<li><a href="TechnicalReference_PduRs.html#66">7.2.1 General</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="TechnicalReference_PduRs.html#67">8 Glossary and Abbreviations</a>
<ul>
<li><a href="TechnicalReference_PduRs.html#67">8.1 Glossary</a></li>
<li><a href="TechnicalReference_PduRs.html#68">8.2 Abbreviations</a></li>
</ul>
</li>
<li><a href="TechnicalReference_PduRs.html#70">9 Contact</a></li>
</ul>
<hr/>
</body>
</html>
