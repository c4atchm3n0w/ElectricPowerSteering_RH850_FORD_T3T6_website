---
title: TechnicalReference_CanTps
linkTitle: TechnicalReference_CanTps
weight: 6
---

<!DOCTYPE html><html>
<head>
<title></title>
<style type="text/css">
<!--
.xflip {
    -moz-transform: scaleX(-1);
    -webkit-transform: scaleX(-1);
    -o-transform: scaleX(-1);
    transform: scaleX(-1);
    filter: fliph;
}
.yflip {
    -moz-transform: scaleY(-1);
    -webkit-transform: scaleY(-1);
    -o-transform: scaleY(-1);
    transform: scaleY(-1);
    filter: flipv;
}
.xyflip {
    -moz-transform: scaleX(-1) scaleY(-1);
    -webkit-transform: scaleX(-1) scaleY(-1);
    -o-transform: scaleX(-1) scaleY(-1);
    transform: scaleX(-1) scaleY(-1);
    filter: fliph + flipv;
}
-->
</style>
</head>
<body>
<a name=1></a><img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/CanTp/doc/TechnicalReference_CanTp-1_1.png"/><br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>&#160;<br/>&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/><b>MICROSAR CAN Transport&#160;Layer&#160;<br/></b>Technical Reference&#160;<br/>&#160;<br/>&#160;&#160;<br/>Version&#160;3.00.01&#160;<br/>&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>
Authors&#160;<br/>
Thomas Dedler,&#160;Anthony&#160;Thomas&#160;<br/>
Status&#160;<br/>
Released&#160;<br/>
&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
<hr/>
<a name=2></a><img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/CanTp/doc/TechnicalReference_CanTp-2_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;CAN&#160;Transport Layer&#160;<br/>
<b>Document&#160;Information&#160;</b><br/>
<b>History&#160;</b><br/>
<b>Author&#160;</b><br/>
<b>Date&#160;</b><br/>
<b>Version&#160;</b><br/>
<b>Remarks&#160;</b><br/>
Thomas Dedler&#160;<br/>
2012-07-11&#160;<br/>
1.00.00&#160;<br/>
Initial&#160;version&#160;<br/>
Thomas Dedler&#160;<br/>
2012-11-26&#160;<br/>
1.01.00&#160;<br/>
Synchronous&#160;transmission&#160;feature&#160;removed&#160;&#160;<br/>
Thomas Dedler&#160;<br/>
2013-04-15&#160;<br/>
1.02.00&#160;<br/>
<b>&gt;&#160;&#160;</b>Configuration Hint&#160;chapter&#160;added&#160;<br/>
<b>&gt;&#160;&#160;</b>Description&#160;of&#160;Post-Build&#160;Loadable&#160;<br/>
Thomas Dedler&#160;<br/>
2013-08-26&#160;<br/>
1.03.00&#160;<br/>
<b>&gt;&#160;&#160;</b>Limitations of&#160;Single Channel&#160;Optimization&#160;<br/>
added&#160;<br/>
<b>&gt;&#160;&#160;</b>Limitation of&#160;data length&#160;parameter&#160;added&#160;<br/>
<b>&gt;&#160;&#160;</b>Dcm&#160;OnRequestDetection&#160;feature&#160;removed&#160;<br/>
Thomas Dedler&#160;<br/>
2014-04-10&#160;<br/>
1.04.00&#160;<br/>
<b>&gt;&#160;&#160;</b>Synchronous&#160;/&#160;Asynchronous&#160;Transmission&#160;<br/>
<b>&gt;&#160;&#160;</b>AR4.1.2&#160;PduR&#160;API&#160;support&#160;<br/>
Thomas Dedler&#160;<br/>
2014-08-22&#160;<br/>
2.00.00&#160;<br/>
<b>&gt;&#160;&#160;</b>SingleChannel&#160;optimization removed&#160;<br/>
<b>&gt;&#160;&#160;</b>Support&#160;of&#160;CAN-FD&#160;added&#160;<br/>
<b>&gt;&#160;&#160;</b>Application callbacks&#160;changed&#160;<br/>
<b>&gt;&#160;&#160;</b>Postbuild-Build Selectable&#160;<br/>
Thomas Dedler&#160;<br/>
2015-01-12&#160;<br/>
2.01.00&#160;<br/>
<b>&gt;&#160;&#160;</b>Missing&#160;description of&#160;CanTp_InitMemory()&#160;<br/>
added&#160;<br/>
<b>&gt;&#160;&#160;</b>Reentrancy&#160;of&#160;CanTp_GetVersionInfo()&#160;<br/>
corrected&#160;<br/>
<b>&gt;&#160;&#160;</b>Minor&#160;clarifications in&#160;regarding&#160;CAN-FD&#160;<br/>
Thomas Dedler&#160;<br/>
2015-07-01&#160;<br/>
2.02.00&#160;<br/>
<b>&gt;&#160;&#160;</b>Separation&#160;Time&#160;by&#160;Application&#160;<br/>
<b>&gt;&#160;&#160;</b>Dynamic&#160;BS&#160;feature description adapted&#160;<br/>
according&#160;to latest&#160;ISO&#160;specification&#160;<br/>
Thomas Dedler&#160;<br/>
2015-12-11&#160;<br/>
3.00.00&#160;<br/>
<b>&gt;&#160;&#160;</b>Obsolete&#160;features&#160;removed:&#160;<br/>
<b>&gt;&#160;&#160;</b>Notification of&#160;Failed&#160;Cancellations&#160;<br/>
<b>&gt;&#160;&#160;</b>Ignore&#160;FC&#160;with invalid flow&#160;status&#160;<br/>
<b>&gt;&#160;&#160;</b>Ignore&#160;FC&#160;with reserved&#160;STmin&#160;<br/>
<b>&gt;&#160;&#160;</b>Ignore&#160;CF with wrong&#160;sequence&#160;number&#160;<br/>
<b>&gt;&#160;&#160;</b>Clarification&#160;of&#160;performance&#160;parameter&#160;<br/>
configuration&#160;<br/>
<b>&gt;&#160;&#160;</b>Rework&#160;of&#160;Critical&#160;Section&#160;chapter&#160;<br/>
<b>&gt;&#160;&#160;</b>Hint&#160;for&#160;DET&#160;configuration added&#160;<br/>
Anthony&#160;Thomas&#160;<br/>
2016-08-05&#160;<br/>
3.00.01&#160;<br/>
<b>&gt;&#160;&#160;</b>Updated&#160;document&#160;template&#160;<br/>
<b>&gt;&#160;&#160;</b>Documented&#160;features,&#160;deviations and&#160;<br/>
extensions&#160;properly.&#160;<br/>
<b>&#160;</b><br/>
&#160;<br/>
<b>&#160;</b><br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;3.00.01&#160;<br/>
2&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.7.1&#160;<br/>
<hr/>
<a name=3></a><img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/CanTp/doc/TechnicalReference_CanTp-3_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;CAN&#160;Transport Layer&#160;<br/>
<b>Reference&#160;Documents&#160;</b><br/>
<b>No.&#160;</b><br/>
<b>Source&#160;</b><br/>
<b>Title&#160;</b><br/>
<b>Version&#160;</b><br/>
[1]&#160;&#160;&#160;&#160;AUTOSAR&#160;&#160;AUTOSAR_SWS_CANTransportLayer.pdf&#160;<br/>
4.0.0&#160;<br/>
[2]&#160;&#160;&#160;&#160;AUTOSAR&#160;&#160;AUTOSAR_SWS_CANInterface.pdf&#160;<br/>
5.0.0&#160;<br/>
[3]&#160;&#160;&#160;&#160;AUTOSAR&#160;&#160;AUTOSAR_SWS_PDURouter.pdf&#160;<br/>
3.2.0&#160;<br/>
[4]&#160;&#160;&#160;&#160;ISO&#160;<br/>
/ISO/TF2/:&#160;ISO&#160;FDIS&#160;15765-2;&#160;Road vehicles&#160;—&#160;&#160;<br/>
2015&#160;<br/>
Diagnostics&#160;on&#160;CAN&#160;—&#160;Part&#160;2:&#160;Network&#160;layer&#160;services&#160;&#160;<br/>
[5]&#160;&#160;&#160;&#160;AUTOSAR&#160;&#160;AUTOSAR_SWS_DevelopmentErrorTracer.pdf&#160;<br/>
3.2.0&#160;<br/>
[6]&#160;&#160;&#160;&#160;Vector&#160;<br/>
TechnicalReference_Asr_Dbg.pdf&#160;&#160;<br/>
1.0.0&#160;<br/>
[7]&#160;&#160;&#160;&#160;Vector&#160;<br/>
TechnicalReference_PostBuildLoadable.pdf&#160;<br/>
1.2.0&#160;<br/>
[8]&#160;&#160;&#160;&#160;Vector&#160;<br/>
TechnicalReference_IdentityManager.pdf&#160;<br/>
1.0.0&#160;<br/>
[9]&#160;&#160;&#160;&#160;Vector&#160;<br/>
TechnicalReference_Det.pdf&#160;<br/>
2.0.4&#160;<br/>
&#160;<br/>&#160;<br/>
&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;3.00.01&#160;<br/>
3&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.7.1&#160;<br/>
<hr/>
<a name=4></a><img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/CanTp/doc/TechnicalReference_CanTp-4_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/CanTp/doc/TechnicalReference_CanTp-4_2.png"/><br/>
<img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/CanTp/doc/TechnicalReference_CanTp-4_3.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;CAN&#160;Transport Layer&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Caution&#160;<br/></b>We&#160;have configured&#160;the&#160;programs&#160;in&#160;accordance&#160;with your&#160;specifications&#160;in the&#160;<br/>
<b>&#160;&#160;</b>questionnaire.&#160;Whereas&#160;the&#160;programs&#160;do&#160;support&#160;other&#160;configurations&#160;than&#160;the&#160;one&#160;<br/>
specified&#160;in your&#160;questionnaire,&#160;Vector´s&#160;release&#160;of&#160;the&#160;programs&#160;delivered to&#160;your&#160;<br/>company&#160;is&#160;expressly&#160;restricted&#160;to&#160;the&#160;configuration&#160;you&#160;have specified&#160;in&#160;the&#160;<br/>questionnaire.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
&#160;<br/>&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Caution&#160;<br/></b>This&#160;symbol&#160;calls&#160;your&#160;attention&#160;to warnings.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;3.00.01&#160;<br/>
4&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.7.1&#160;<br/>
<hr/>
<a name=5></a><img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/CanTp/doc/TechnicalReference_CanTp-5_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;CAN&#160;Transport Layer&#160;<br/>
<b>Contents&#160;</b><br/>
<a href="TechnicalReference_CanTps.html#10"><b>1</b>&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#10"><b>Component&#160;History&#160;....................................................................................................&#160;10</b>&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#11"><b>2</b>&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#11"><b>Introduction.................................................................................................................&#160;11</b>&#160;<br/></a><a href="TechnicalReference_CanTps.html#12">2.1&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#12">Architecture&#160;Overview&#160;......................................................................................&#160;12&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#14"><b>3</b>&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#14"><b>Functional&#160;Description&#160;...............................................................................................&#160;14</b>&#160;<br/>3.1&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#14">Features&#160;..........................................................................................................&#160;14&#160;<br/>3.1.1&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#14">Deviations&#160;........................................................................................&#160;14&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#15">3.1.2&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#15">Additions/&#160;Extensions&#160;.......................................................................&#160;15&#160;<br/>3.1.2.1&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#15">Split&#160;CanTp_MainFunction&#160;.............................................&#160;15&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#15">3.1.2.2&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#15">Notification of&#160;Failed&#160;Buffer&#160;Request&#160;..............................&#160;15&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#15">3.1.2.3&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#15">Handling&#160;of&#160;FC&#160;Frames&#160;with a&#160;Reserved&#160;STmin&#160;............&#160;15&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#16">3.1.2.4&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#16">Dynamic&#160;and Static&#160;BlockSize and STmin&#160;.....................&#160;16&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#16">3.1.2.5&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#16">Dynamic&#160;Channel&#160;Assignment&#160;.......................................&#160;16&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#16">3.1.2.6&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#16">Single Buffer&#160;Optimization&#160;..............................................&#160;16&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#17">3.1.2.7&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#17">Transmit&#160;Queue&#160;.............................................................&#160;17&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#18">3.1.2.8&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#18">Asynchronous&#160;and Synchronous&#160;behavior&#160;of&#160;<br/>CanTp_Transmit&#160;............................................................&#160;18&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#18">3.1.2.9&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#18">Support&#160;of&#160;PduR&#160;Interface according to&#160;AUTOSAR&#160;<br/>4.1.2&#160;..............................................................................&#160;18&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#19">3.1.2.10&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#19">CAN-FD&#160;Support&#160;............................................................&#160;19&#160;<br/>3.1.2.10.1&#160;&#160;CAN&#160;Messages with more than&#160;8 Byte&#160;.......&#160;19&#160;<br/></a><a href="TechnicalReference_CanTps.html#20">3.1.2.10.2&#160;&#160;CAN-FD&#160;Frame&#160;Padding&#160;............................&#160;20&#160;<br/>3.1.2.10.3&#160;&#160;Segmented&#160;Messages with more&#160;than&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#20">4095&#160;Byte&#160;..................................................&#160;20&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#21">3.1.2.11&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#21">Separation&#160;Time&#160;by&#160;Application&#160;......................................&#160;21&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#22">3.2&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#22">Limitations........................................................................................................&#160;22&#160;<br/>3.2.1&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#22">Memory&#160;Optimization&#160;.......................................................................&#160;22&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#22">3.2.2&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#22">Channel&#160;Assignment&#160;........................................................................&#160;22&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#22">3.2.3&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#22">Channel&#160;Addressing&#160;.........................................................................&#160;22&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#23">3.2.4&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#23">Data&#160;Length&#160;Parameter&#160;....................................................................&#160;23&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#23">3.3&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#23">Initialization&#160;......................................................................................................&#160;23&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#23">3.4&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#23">States&#160;..............................................................................................................&#160;23&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#24">3.5&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#24">Main Functions&#160;................................................................................................&#160;24&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#24">3.6&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#24">Error&#160;Handling&#160;..................................................................................................&#160;24&#160;<br/>3.6.1&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#24">Development&#160;Error&#160;Reporting&#160;...........................................................&#160;24&#160;<br/></a><a href="TechnicalReference_CanTps.html#28">3.6.1.1&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#28">Parameter&#160;Checking&#160;......................................................&#160;28&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#28">3.6.2&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#28">Production Code&#160;Error&#160;Reporting&#160;.....................................................&#160;28&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#29">3.7&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#29">Channel&#160;Mode&#160;.................................................................................................&#160;29&#160;</a><br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;3.00.01&#160;<br/>
5&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.7.1&#160;<br/>
<hr/>
<a name=6></a><img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/CanTp/doc/TechnicalReference_CanTp-6_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;CAN&#160;Transport Layer&#160;<br/>
<a href="TechnicalReference_CanTps.html#29">3.8&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#29">Connection&#160;Channels&#160;.......................................................................................&#160;29&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#30">3.9&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#30">Connection&#160;Timings&#160;.........................................................................................&#160;30&#160;<br/>3.9.1&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#30">Timing&#160;Parameters&#160;...........................................................................&#160;30&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#31">3.9.2&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#31">Timing&#160;Considerations&#160;and&#160;Jitter&#160;......................................................&#160;31&#160;<br/>3.9.2.1&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#31">Jitter&#160;...............................................................................&#160;31&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#31">3.9.2.2&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#31">Separation&#160;Time&#160;.............................................................&#160;31&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#32">3.9.2.3&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#32">Implementation&#160;of&#160;N_Br&#160;.................................................&#160;32&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#33"><b>4</b>&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#33"><b>Integration&#160;...................................................................................................................&#160;33</b>&#160;<br/>4.1&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#33">Scope of&#160;Delivery&#160;.............................................................................................&#160;33&#160;<br/>4.1.1&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#33">Static Files&#160;.......................................................................................&#160;33&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#33">4.1.2&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#33">Dynamic&#160;Files&#160;..................................................................................&#160;33&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#34">4.2&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#34">Include Structure&#160;..............................................................................................&#160;34&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#35">4.3&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#35">Compiler&#160;Abstraction&#160;and Memory&#160;Mapping&#160;.....................................................&#160;35&#160;<br/>4.3.1&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#35">Memory&#160;mapping&#160;rules&#160;.....................................................................&#160;35&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#36">4.4&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#36">Critical&#160;Sections&#160;...............................................................................................&#160;36&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#36">4.5&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#36">Buffer&#160;Configuration&#160;.........................................................................................&#160;36&#160;<br/>4.5.1&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#36">Constant&#160;Block Size&#160;.........................................................................&#160;36&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#37">4.5.2&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#37">Zero Block&#160;Size&#160;................................................................................&#160;37&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#37">4.5.3&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#37">Zero&#160;WFTmax&#160;..................................................................................&#160;37&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#37">4.5.4&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#37">Zero STmin&#160;......................................................................................&#160;37&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#38"><b>5</b>&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#38"><b>API&#160;Description&#160;...........................................................................................................&#160;38</b>&#160;<br/>5.1&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#38">Services provided by&#160;CanTp&#160;............................................................................&#160;38&#160;<br/>5.1.1&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#38">CanTp_InitMemory...........................................................................&#160;38&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#39">5.1.2&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#39">CanTp_Init()&#160;.....................................................................................&#160;39&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#39">5.1.3&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#39">CanTp_Shutdown()&#160;..........................................................................&#160;39&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#40">5.1.4&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#40">CanTp_MainFunction()&#160;....................................................................&#160;40&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#40">5.1.5&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#40">CanTp_MainFunctionRx()&#160;................................................................&#160;40&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#41">5.1.6&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#41">CanTp_MainFunctionTx()&#160;................................................................&#160;41&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#41">5.1.7&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#41">CanTp_GetVersionInfo()&#160;..................................................................&#160;41&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#42">5.1.8&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#42">CanTp_Transmit()&#160;............................................................................&#160;42&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#43">5.1.9&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#43">CanTp_CancelReceive()&#160;..................................................................&#160;43&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#44">5.1.10&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#44">CanTp_CancelTransmit()&#160;.................................................................&#160;44&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#45">5.1.11&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#45">CanTp_ChangeParameter()&#160;.............................................................&#160;45&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#46">5.1.12&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#46">CanTp_ReadParameter()&#160;.................................................................&#160;46&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#47">5.2&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#47">Services used by&#160;CanTp&#160;..................................................................................&#160;47&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#48">5.3&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#48">Callback&#160;Functions&#160;...........................................................................................&#160;48&#160;<br/>5.3.1&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#48">CanTp_RxIndication()&#160;......................................................................&#160;48&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#48">5.3.2&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#48">CanTp_TxConfirmation()&#160;..................................................................&#160;48&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#49">5.3.3&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#49">CanTp_StopSeparationTime()&#160;..........................................................&#160;49&#160;</a><br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;3.00.01&#160;<br/>
6&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.7.1&#160;<br/>
<hr/>
<a name=7></a><img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/CanTp/doc/TechnicalReference_CanTp-7_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;CAN&#160;Transport Layer&#160;<br/>
<a href="TechnicalReference_CanTps.html#49">5.4&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#49">Configurable Interfaces&#160;....................................................................................&#160;49&#160;<br/>5.4.1&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#49">Appl_StartSeparationTime()&#160;.............................................................&#160;49&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#50">5.4.2&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#50">Notification Functions&#160;.......................................................................&#160;50&#160;<br/>5.4.2.1&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#50">Appl_CanTpRxSFIndication()&#160;........................................&#160;50&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#50">5.4.2.2&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#50">Appl_CanTpRxFFIndication()&#160;.........................................&#160;50&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#51">5.4.2.3&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#51">Appl_CanTpRxCFIndication()&#160;........................................&#160;51&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#51">5.4.2.4&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#51">Appl_CanTpFrameTransmission&#160;()&#160;................................&#160;51&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#52">5.4.2.5&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#52">Appl_CanTpFrameTxConfirmation&#160;()&#160;.............................&#160;52&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#53"><b>6</b>&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#53"><b>Configuration&#160;..............................................................................................................&#160;53</b>&#160;<br/>6.1&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#53">Configuration Variants&#160;......................................................................................&#160;53&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#53">6.2&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#53">Configuration of&#160;Post-Build&#160;..............................................................................&#160;53&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#54">6.3&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#54">Additional&#160;Configuration&#160;Hints&#160;..........................................................................&#160;54&#160;<br/>6.3.1&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#54">CanIf&#160;Tx&#160;Buffering&#160;............................................................................&#160;54&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#54">6.3.2&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#54">ISO&#160;Performance Requirements&#160;......................................................&#160;54&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#55"><b>7</b>&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#55"><b>Glossary&#160;and&#160;Abbreviations&#160;......................................................................................&#160;55</b>&#160;<br/>7.1&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#55">Glossary&#160;..........................................................................................................&#160;55&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#57">7.2&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#57">Abbreviations&#160;...................................................................................................&#160;57&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#59"><b>8</b>&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#59"><b>Contact&#160;........................................................................................................................&#160;59</b>&#160;</a><br/>
&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;3.00.01&#160;<br/>
7&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.7.1&#160;<br/>
<hr/>
<a name=8></a><img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/CanTp/doc/TechnicalReference_CanTp-8_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;CAN&#160;Transport Layer&#160;<br/>
<b>Illustrations&#160;</b><br/>
<a href="TechnicalReference_CanTps.html#12">Figure&#160;2-1&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#12">AUTOSAR&#160;4.x&#160;Architecture&#160;Overview&#160;.......................................................&#160;12&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#13">Figure&#160;2-2&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#13">Interfaces&#160;to adjacent&#160;modules of&#160;the&#160;CanTp&#160;............................................&#160;13&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#18">Figure&#160;3-1&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#18">Sequence&#160;Diagram:&#160;Asynchronous&#160;Transmission&#160;.....................................&#160;18&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#18">Figure&#160;3-2&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#18">Sequence&#160;Diagram:&#160;Synchronous&#160;Transmission&#160;.......................................&#160;18&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#21">Figure&#160;3-3&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#21">Separation&#160;Time&#160;by&#160;Application&#160;.................................................................&#160;21&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#22">Figure&#160;3-4&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#22">Channel&#160;Assignment&#160;for&#160;N-SDUs&#160;and N-PDUs&#160;.........................................&#160;22&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#24">Figure&#160;3-5&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#24">CanTp internal&#160;states&#160;................................................................................&#160;24&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#30">Figure&#160;3-6&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#30">Connection&#160;Timing&#160;....................................................................................&#160;30&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#34">Figure&#160;4-1&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#34">Include structure&#160;.......................................................................................&#160;34&#160;</a><br/>
<b>&#160;</b><br/>
<b>Tables&#160;<br/></b><a href="TechnicalReference_CanTps.html#10">Table&#160;1-1&#160;&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#10">Component&#160;History&#160;...................................................................................&#160;10&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#14">Table&#160;3-1&#160;&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#14">Supported&#160;AUTOSAR&#160;standard conform&#160;features&#160;.....................................&#160;14&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#14">Table&#160;3-2&#160;&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#14">Not&#160;supported&#160;AUTOSAR&#160;standard conform&#160;features&#160;...............................&#160;14&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#15">Table&#160;3-3&#160;&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#15">Features&#160;provided beyond the&#160;AUTOSAR&#160;standard&#160;..................................&#160;15&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#19">Table&#160;3-4&#160;&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#19">PduR&#160;API&#160;changes&#160;between&#160;AR4.0.3&#160;and&#160;4.1.2&#160;........................................&#160;19&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#25">Table&#160;3-5&#160;&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#25">Service IDs&#160;...............................................................................................&#160;25&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#26">Table&#160;3-6&#160;&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#26">Errors&#160;reported&#160;to DET&#160;.............................................................................&#160;26&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#28">Table&#160;3-7&#160;&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#28">Development&#160;Error&#160;Reporting:&#160;Assignment&#160;of&#160;checks&#160;to services&#160;.............&#160;28&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#30">Table&#160;3-8&#160;&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#30">Connection&#160;Timing&#160;Parameters&#160;.................................................................&#160;30&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#32">Table&#160;3-9&#160;&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#32">Examples&#160;for&#160;requested&#160;and observed&#160;separation&#160;times&#160;...........................&#160;32&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#33">Table&#160;4-1&#160;&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#33">Static&#160;files&#160;.................................................................................................&#160;33&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#33">Table&#160;4-2&#160;&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#33">Generated&#160;files&#160;.........................................................................................&#160;33&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#35">Table&#160;4-3&#160;&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#35">Compiler&#160;abstraction&#160;and&#160;memory&#160;mapping&#160;..............................................&#160;35&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#38">Table&#160;5-1&#160;&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#38">CanTp_InitMemory&#160;...................................................................................&#160;38&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#39">Table&#160;5-2&#160;&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#39">CanTp_Init()..............................................................................................&#160;39&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#39">Table&#160;5-3&#160;&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#39">CanTp_Shutdown()...................................................................................&#160;39&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#40">Table&#160;5-4&#160;&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#40">CanTp_MainFunction()&#160;.............................................................................&#160;40&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#40">Table&#160;5-5&#160;&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#40">CanTp_MainFunctionRx()&#160;.........................................................................&#160;40&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#41">Table&#160;5-6&#160;&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#41">CanTp_MainFunctionTx()&#160;.........................................................................&#160;41&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#41">Table&#160;5-7&#160;&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#41">CanTp_GetVersionInfo()&#160;...........................................................................&#160;41&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#42">Table&#160;5-8&#160;&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#42">CanTp_Transmit()&#160;.....................................................................................&#160;42&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#43">Table&#160;5-9&#160;&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#43">CanTp_CancelReceive()&#160;..........................................................................&#160;43&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#44">Table&#160;5-10&#160;&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#44">CanTp_CancelTransmit()&#160;..........................................................................&#160;44&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#45">Table&#160;5-11&#160;&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#45">CanTp_ChangeParameter()&#160;.....................................................................&#160;45&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#46">Table&#160;5-12&#160;&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#46">CanTp_ReadParameter()&#160;.........................................................................&#160;46&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#47">Table&#160;5-13&#160;&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#47">Services used by&#160;the&#160;CanTp&#160;.....................................................................&#160;47&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#48">Table&#160;5-14&#160;&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#48">CanTp_RxIndication()&#160;...............................................................................&#160;48&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#48">Table&#160;5-15&#160;&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#48">CanTp_TxConfirmation()&#160;..........................................................................&#160;48&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#49">Table&#160;5-16&#160;&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#49">CanTp_StopSeparationTime()&#160;..................................................................&#160;49&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#49">Table&#160;5-17&#160;&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#49">Appl_StartSeparationTime()......................................................................&#160;49&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#50">Table&#160;5-18&#160;&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#50">Appl_CanTpRxSFIndication()&#160;...................................................................&#160;50&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#50">Table&#160;5-19&#160;&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#50">Appl_CanTpRxFFIndication()&#160;...................................................................&#160;50&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#51">Table&#160;5-20&#160;&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#51">Appl_CanTpRxCFIndication()&#160;...................................................................&#160;51&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#51">Table&#160;5-21&#160;&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#51">Appl_CanTpFrameTransmission&#160;()&#160;...........................................................&#160;51&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#52">Table&#160;5-22&#160;&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#52">Appl_CanTpFrameTransmission&#160;()&#160;...........................................................&#160;52&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#54">Table&#160;6-1&#160;&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#54">Example for&#160;typical&#160;timing parameter&#160;specification....................................&#160;54&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#57">Table&#160;7-1&#160;&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#57">Glossary&#160;...................................................................................................&#160;57&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#58">Table&#160;7-2&#160;&#160;</a><br/>
<a href="TechnicalReference_CanTps.html#58">Abbreviations&#160;............................................................................................&#160;58&#160;</a><br/>
&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;3.00.01&#160;<br/>
8&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.7.1&#160;<br/>
<hr/>
<a name=9></a><img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/CanTp/doc/TechnicalReference_CanTp-9_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;CAN&#160;Transport Layer&#160;<br/>
&#160;<br/>
&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;3.00.01&#160;<br/>
9&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.7.1&#160;<br/>
<hr/>
<a name=10></a><img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/CanTp/doc/TechnicalReference_CanTp-10_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;CAN&#160;Transport Layer&#160;<br/>
<b>1&#160;&#160;Component&#160;History&#160;</b><br/>
The&#160;&#160;component&#160;&#160;history&#160;&#160;gives&#160;&#160;an&#160;&#160;overview&#160;&#160;over&#160;&#160;the&#160;&#160;important&#160;&#160;milestones&#160;&#160;that&#160;&#160;are&#160;<br/>supported&#160;in&#160;the&#160;different&#160;versions of&#160;the&#160;component.&#160;&#160;<br/>
<b>Component&#160;Version&#160;&#160;New&#160;Features&#160;<br/></b>1.00&#160;<br/>
Initial&#160;implementation of&#160;CanTp&#160;according&#160;to&#160;AR4.0.3&#160;<br/>
1.01&#160;<br/>
Synchronous&#160;transmission&#160;feature&#160;removed&#160;due&#160;to PduR&#160;compatibility&#160;<br/>
1.02&#160;<br/>
Debugging&#160;Concept&#160;<br/>Post-Build Loadable&#160;<br/>
2.00&#160;<br/>
Generator&#160;changed&#160;to&#160;Java7&#160;<br/>
2.01&#160;<br/>
Generator&#160;framework&#160;supports&#160;AR4.1.2 schema&#160;<br/>
2.02&#160;<br/>
Synchronous&#160;transmission&#160;re-introduced (now&#160;supported&#160;by&#160;PduR)&#160;<br/>Support&#160;for&#160;AR4.1.2&#160;PduR&#160;APIs&#160;<br/>
3.00&#160;<br/>
Post-Build Selectable&#160;<br/>CAN-FD&#160;support&#160;<br/>
3.01&#160;<br/>
SafeBSW&#160;Step&#160;I&#160;<br/>
3.02&#160;<br/>
SafeBSW&#160;Step&#160;II&#160;<br/>Separation&#160;Time&#160;by&#160;Application&#160;<br/>
4.00&#160;<br/>
SafeBSW&#160;Step&#160;III&#160;<br/>
4.01&#160;<br/>
SafeBSW&#160;Step&#160;IV&#160;<br/>
4.02&#160;<br/>
First&#160;SafeBSW&#160;release&#160;<br/>
Table&#160;1-1&#160;&#160;&#160;Component&#160;History&#160;<br/>
&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;3.00.01&#160;<br/>
10&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.7.1&#160;<br/>
<hr/>
<a name=11></a><img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/CanTp/doc/TechnicalReference_CanTp-11_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;CAN&#160;Transport Layer&#160;<br/>
<b>2&#160;&#160;Introduction&#160;</b><br/>
This&#160;&#160;document&#160;&#160;describes&#160;&#160;the&#160;&#160;functionality,&#160;API&#160;&#160;and&#160;&#160;configuration&#160;&#160;of&#160;&#160;the&#160;AUTOSAR&#160;&#160;BSW&#160;<br/>module&#160;CanTp&#160;as specified&#160;in<a href="TechnicalReference_CanTps.html#3">&#160;[1].&#160;</a>&#160;<br/>
&#160;<br/>
<b>Supported&#160;AUTOSAR&#160;Release:&#160;</b><br/>
4&#160;<br/>
<b>Supported&#160;Configuration&#160;Variants:&#160;</b><br/>
pre-compile,&#160;post-build-loadable,&#160;post-build-selectable&#160;<br/>
<b>Vendor&#160;ID:&#160;</b><br/>
CANTP_VENDOR_ID&#160;<br/>
30&#160;decimal&#160;<br/>(=&#160;Vector-Informatik,&#160;<br/>according&#160;to&#160;HIS)&#160;<br/>
<b>Module&#160;ID:&#160;</b><br/>
CANTP_MODULE_ID &#160;&#160;<br/>
35&#160;decimal&#160;<br/>(according&#160;to ref.<a href="TechnicalReference_CanTps.html#3">&#160;[1])</a>&#160;<br/>
&#160;<br/>&#160;<br/>According&#160;to&#160;AUTOSAR basic software architecture,&#160;CanTp&#160;provides services&#160;for&#160;<br/>
<b>&gt;&#160;&#160;</b>Segmentation&#160;of&#160;data&#160;in&#160;transmit&#160;direction&#160;<br/>
<b>&gt;&#160;&#160;</b>Reassembly&#160;of&#160;data&#160;in&#160;receive&#160;direction&#160;<br/>
<b>&gt;&#160;&#160;</b>Control of&#160;data&#160;flow&#160;<br/>
<b>&gt;&#160;&#160;</b>Detection&#160;of&#160;errors in&#160;segmentation&#160;sessions&#160;<br/>
&#160;<br/>
AUTOSAR&#160;&#160;module&#160;&#160;specifications&#160;&#160;are&#160;&#160;based&#160;&#160;on&#160;&#160;existing&#160;&#160;standards.&#160;&#160;Thus&#160;&#160;this&#160;AUTOSAR&#160;<br/>CAN&#160;Transport&#160;Layer&#160;specification&#160;is&#160;based&#160;on&#160;the&#160;international&#160;standard&#160;ISO&#160;15765&#160;which&#160;<br/>is the&#160;most&#160;widespread&#160;standard in&#160;the&#160;automotive&#160;domain.&#160;<br/>ISO&#160;&#160;15765&#160;&#160;contains&#160;&#160;four&#160;&#160;sections&#160;&#160;and&#160;&#160;describes&#160;&#160;two&#160;&#160;applicable&#160;&#160;CAN&#160;&#160;Transport&#160;&#160;Layer&#160;<br/>specifications:&#160;ISO&#160;15765-2&#160;for&#160;OEM&#160;enhanced&#160;diagnostics&#160;(see<a href="TechnicalReference_CanTps.html#3">&#160;[4])&#160;</a>and&#160;ISO&#160;15765-4&#160;for&#160;<br/>OBD&#160;diagnostics.&#160;Concerning&#160;the&#160;transport&#160;layer,&#160;ISO&#160;15765-4&#160;(the&#160;section&#160;of&#160;ISO&#160;15765&#160;<br/>which&#160;&#160;also&#160;&#160;covers&#160;&#160;the&#160;&#160;data&#160;&#160;link&#160;&#160;layer&#160;&#160;and&#160;&#160;the&#160;&#160;physical&#160;&#160;layer)&#160;&#160;is&#160;&#160;in&#160;&#160;accordance&#160;&#160;with&#160;&#160;ISO&#160;<br/>15765-2&#160;with&#160;some&#160;restrictions/additions.&#160;In&#160;order&#160;that&#160;there&#160;is&#160;no&#160;incompatibility&#160;problem&#160;<br/>between&#160;ISO&#160;15765-2&#160;and&#160;ISO&#160;15765-4,&#160;differences&#160;will&#160;be&#160;solved&#160;by&#160;the&#160;CAN&#160;Transport&#160;<br/>Layer configuration.&#160;<br/>Although&#160;the&#160;CAN&#160;transport protocol is&#160;mainly used&#160;for vehicle&#160;diagnostic systems,&#160;its&#160;<br/>design&#160;also&#160;incorporates requirements&#160;from&#160;other CAN&#160;based&#160;systems&#160;employing&#160;<br/>transport&#160;layer protocols.&#160;<br/>
&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;3.00.01&#160;<br/>
11&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.7.1&#160;<br/>
<hr/>
<a name=12></a><img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/CanTp/doc/TechnicalReference_CanTp-12_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/CanTp/doc/TechnicalReference_CanTp-12_2.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;CAN&#160;Transport Layer&#160;<br/>
<b>2.1&#160;</b><br/>
<b>Architecture&#160;Overview&#160;</b><br/>
The&#160;following&#160;figure shows&#160;where the&#160;CanTp&#160;is located&#160;in&#160;the&#160;AUTOSAR architecture.&#160;<br/>
&#160;<br/>
Figure&#160;2-1&#160;&#160;AUTOSAR&#160;4.x&#160;Architecture&#160;Overview&#160;&#160;&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;3.00.01&#160;<br/>
12&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.7.1&#160;<br/>
<hr/>
<a name=13></a><img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/CanTp/doc/TechnicalReference_CanTp-13_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;CAN&#160;Transport Layer&#160;<br/>
The&#160;next&#160;figure&#160;shows&#160;the&#160;interfaces&#160;to&#160;adjacent&#160;modules&#160;of&#160;the&#160;CanTp.&#160;These&#160;interfaces&#160;<br/>are described&#160;in&#160;chapte<a href="TechnicalReference_CanTps.html#38">r&#160;5.&#160;</a>&#160;<br/>
<b>cmp&#160;Interfaces&#160;Ov&#160;erv&#160;iew</b><br/>
<b>SchM</b><br/>
<b>PduR</b><br/>
n<br/>
n<br/>
n<br/>
ta<br/>
ta<br/>
tio<br/>
tio<br/>
tio<br/>
a<br/>
a<br/>
p<br/>
p<br/>
a<br/>
p<br/>
T<br/>
T<br/>
xD<br/>
xD<br/>
ica<br/>
n<br/>
n<br/>
d<br/>
ce<br/>
a<br/>
a<br/>
firm<br/>
e<br/>
yT<br/>
n<br/>
n<br/>
yR<br/>
p<br/>
C<br/>
C<br/>
xI<br/>
o<br/>
fR<br/>
p<br/>
o<br/>
o<br/>
r<br/>
r_<br/>
t_<br/>
R<br/>
C<br/>
xi<br/>
p<br/>
C<br/>
te<br/>
xC<br/>
rtO<br/>
p<br/>
te<br/>
E<br/>
T<br/>
p<br/>
n<br/>
T<br/>
ta<br/>
T<br/>
e<br/>
r<br/>
_<br/>
n<br/>
p<br/>
T<br/>
n<br/>
E<br/>
m<br/>
te<br/>
it<br/>
a<br/>
T<br/>
S<br/>
n<br/>
a<br/>
_<br/>
M<br/>
e<br/>
ive<br/>
C<br/>
n<br/>
p<br/>
a<br/>
T<br/>
C<br/>
ra<br/>
sm<br/>
M<br/>
C<br/>
a<br/>
m<br/>
ch<br/>
_<br/>
a<br/>
n<br/>
_<br/>
n<br/>
ce<br/>
S<br/>
R<br/>
_<br/>
ch<br/>
C<br/>
a<br/>
R<br/>
P<br/>
ra<br/>
it<br/>
ra<br/>
e<br/>
u<br/>
_<br/>
R<br/>
C<br/>
u<br/>
e<br/>
a<br/>
S<br/>
lT<br/>
lR<br/>
d<br/>
R<br/>
u<br/>
_<br/>
d<br/>
g<br/>
P<br/>
sm<br/>
d<br/>
n<br/>
P<br/>
u<br/>
R<br/>
P<br/>
d<br/>
n<br/>
ce<br/>
ce<br/>
P<br/>
a<br/>
d<br/>
a<br/>
n<br/>
n<br/>
u<br/>
ra<br/>
h<br/>
e<br/>
P<br/>
a<br/>
a<br/>
d<br/>
T<br/>
C<br/>
R<br/>
C<br/>
P<br/>
_<br/>
C<br/>
_<br/>
_<br/>
_<br/>
p<br/>
_<br/>
p<br/>
p<br/>
p<br/>
T<br/>
p<br/>
T<br/>
T<br/>
T<br/>
n<br/>
T<br/>
n<br/>
n<br/>
n<br/>
a<br/>
n<br/>
a<br/>
a<br/>
a<br/>
a<br/>
C<br/>
C<br/>
C<br/>
C<br/>
C<br/>
<b>CanTp</b><br/>
CanTp_Init&#160;/&#160;CanTp_Shutdown<br/>
CanTp_GetVersionInfo<br/>
CanTp_MainFunction<br/>
r<br/>
n<br/>
n<br/>
rro<br/>
tio<br/>
tio<br/>
rtE<br/>
a<br/>
o<br/>p<br/>
ica<br/>
e<br/>
d<br/>
firm<br/>
it<br/>
n<br/>
n<br/>
R<br/>
xI<br/>
o<br/>
sm<br/>
t_<br/>
n<br/>
e<br/>
R<br/>_<br/>
xC<br/>
D<br/>
ra<br/>
p<br/>
T<br/>
it<br/>
T<br/>
_<br/>
lT<br/>
n<br/>
p<br/>
sm<br/>
ce<br/>
a<br/>
T<br/>
n<br/>
n<br/>
n<br/>
C<br/>
a<br/>
a<br/>
ra<br/>
<b>EcuM</b><br/>
T<br/>
C<br/>
C<br/>
<b>Det</b><br/>
If_<br/>
If_<br/>
n<br/>
n<br/>
a<br/>
a<br/>
C<br/>
C<br/>
<b>CanIf</b><br/>
&#160;<br/>
Figure&#160;2-2&#160;&#160;Interfaces&#160;to&#160;adjacent&#160;modules&#160;of&#160;the&#160;CanTp&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;3.00.01&#160;<br/>
13&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.7.1&#160;<br/>
<hr/>
<a name=14></a><img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/CanTp/doc/TechnicalReference_CanTp-14_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;CAN&#160;Transport Layer&#160;<br/>
<b>3&#160;&#160;Functional&#160;Description&#160;</b><br/>
<b>3.1&#160;</b><br/>
<b>Features&#160;</b><br/>
The&#160;features&#160;listed&#160;in&#160;the&#160;following&#160;tables&#160;cover&#160;the&#160;complete&#160;functionality&#160;specified&#160;for&#160;the&#160;<br/>CanTp.&#160;<br/>The&#160;AUTOSAR&#160;&#160;standard&#160;&#160;functionality&#160;&#160;is&#160;&#160;specified&#160;&#160;<a href="TechnicalReference_CanTps.html#3">in&#160;&#160;[1],</a>&#160;&#160;the&#160;&#160;corresponding&#160;&#160;features&#160;&#160;are&#160;<br/>listed&#160;in&#160;the&#160;tables&#160;<br/>
<b>&gt;&#160;</b><br/>
<a href="TechnicalReference_CanTps.html#14">Table&#160;3-1&#160;&#160;&#160;Supported&#160;AUTOSAR&#160;standard conform&#160;features&#160;</a><br/>
<b>&gt;&#160;</b><br/>
<a href="TechnicalReference_CanTps.html#14">Table&#160;3-2&#160;&#160;&#160;Not&#160;supported&#160;AUTOSAR&#160;standard conform&#160;features&#160;</a><br/>
Vector&#160;&#160;Informatik&#160;&#160;provides&#160;&#160;further&#160;&#160;CanTp&#160;&#160;functionality&#160;&#160;beyond&#160;&#160;the&#160;&#160;AUTOSAR&#160;&#160;standard.&#160;<br/>The&#160;corresponding&#160;features&#160;are&#160;listed&#160;in&#160;the&#160;table&#160;<br/>
<b>&gt;&#160;</b><br/>
<a href="TechnicalReference_CanTps.html#15">Table&#160;3-3&#160;&#160;&#160;Features&#160;provided&#160;beyond&#160;the&#160;AUTOSAR&#160;standard&#160;</a><br/>
The&#160;following&#160;features&#160;specified&#160;in<a href="TechnicalReference_CanTps.html#3">&#160;[1]&#160;</a>are&#160;supported:&#160;<br/>
<b>Supported&#160;AUTOSAR&#160;Standard&#160;Conform&#160;Features&#160;<br/></b>Segmented&#160;and unsegmented&#160;data&#160;transmission&#160;<br/>Segmented&#160;and unsegmented&#160;data&#160;reception&#160;<br/>Control&#160;of&#160;data&#160;flow&#160;<br/>Supervision&#160;of&#160;timeouts&#160;<br/>Detection&#160;of&#160;errors&#160;during segemented&#160;communication&#160;<br/>Transmission&#160;cancellation&#160;<br/>Reception cancellation&#160;<br/><b>Post-Build Loadable&#160;<br/>MICROSAR&#160;Identity&#160;Manager&#160;using&#160;Post-Build&#160;Selectable&#160;</b><br/>
Table&#160;3-1&#160;&#160;&#160;Supported&#160;AUTOSAR&#160;standard&#160;conform&#160;features&#160;<br/>
<b>3.1.1&#160;</b><br/>
<b>Deviations&#160;</b><br/>
The&#160;following&#160;features&#160;specified&#160;in<a href="TechnicalReference_CanTps.html#3">&#160;[1]&#160;</a>are&#160;not&#160;or only&#160;partly&#160;supported:&#160;<br/>
<b>Category&#160;</b><br/>
<b>Description&#160;</b><br/>
<b>ASR&#160;<br/>Version&#160;</b><br/>
Functional&#160;&#160;8.3.4&#160;&#160;CanTp_Transmit:&#160;For&#160;robustness&#160;reasons&#160;(e.g.&#160;in case&#160;of&#160;delayed&#160;<br/>
4.0.3&#160;<br/>
buffer&#160;provision),&#160;the&#160;CanTp&#160;internally&#160;stores&#160;the&#160;frames&#160;to&#160;be&#160;transmitted.&#160;<br/>
API&#160;<br/>
8.3.2&#160;&#160;&#160;&#160;CanTp_&#160;GetVersionInfo:&#160;The&#160;function&#160;&#160;is&#160;&#160;always&#160;&#160;implemented&#160;&#160;as&#160;&#160;a&#160;&#160;4.0.3&#160;<br/>
regular&#160;function.&#160;<br/>
Table&#160;3-2&#160;&#160;&#160;Not&#160;supported&#160;AUTOSAR&#160;standard&#160;conform&#160;features&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;3.00.01&#160;<br/>
14&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.7.1&#160;<br/>
<hr/>
<a name=15></a><img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/CanTp/doc/TechnicalReference_CanTp-15_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;CAN&#160;Transport Layer&#160;<br/>
<b>3.1.2&#160;</b><br/>
<b>Additions/&#160;Extensions&#160;</b><br/>
The&#160;following&#160;features&#160;are provided&#160;beyond&#160;the&#160;AUTOSAR standard:&#160;<br/>
<b>Features&#160;Provided&#160;Beyond&#160;The&#160;AUTOSAR&#160;Standard&#160;<br/></b>Split&#160;MainFunction&#160;<br/>Notification of&#160;Failed&#160;Buffer&#160;Request&#160;&#160;<br/>Handling&#160;of&#160;FC&#160;Frames&#160;with a&#160;Reserved&#160;STmin&#160;<br/>Dynamic&#160;Channel&#160;Assignment&#160;<br/>Single Buffer&#160;Optimization&#160;&#160;<br/>Transmit&#160;Queue&#160;<br/>Synchronous&#160;Transmission&#160;<br/>CAN-FD&#160;Support&#160;<br/>Separation&#160;Time&#160;by&#160;Application&#160;<br/>
Table&#160;3-3&#160;&#160;&#160;Features&#160;provided&#160;beyond&#160;the&#160;AUTOSAR&#160;standard&#160;<br/>
<b>3.1.2.1&#160;</b><br/>
<b>Split CanTp_MainFunction&#160;</b><br/>
In&#160;extension&#160;to&#160;the&#160;CanTp&#160;SWS<a href="TechnicalReference_CanTps.html#3">&#160;[1]&#160;</a>the&#160;Vector&#160;CanTp&#160;supports&#160;two&#160;additional&#160;API&#160;functions&#160;<br/>(CanTp_MainFunctionRx&#160;and&#160;CanTp_MainFunctionTx)&#160;in&#160;case&#160;a&#160;split&#160;main&#160;function&#160;<br/>is&#160;&#160;configured.&#160;&#160;These&#160;&#160;additional&#160;&#160;functions&#160;&#160;can&#160;&#160;be&#160;&#160;used&#160;&#160;instead&#160;&#160;of&#160;&#160;the&#160;&#160;original&#160;AUTOSAR&#160;<br/>CanTp_MainFunction&#160;API&#160;(which&#160;is&#160;still&#160;supported)&#160;to&#160;optimize&#160;the&#160;calling&#160;sequence&#160;of&#160;<br/>incoming&#160;requests&#160;and&#160;their&#160;responses.&#160;<br/>Configuration&#160;attribute:&#160;CanTpEnableSplitMainFunction&#160;<br/>&#160;<br/>&#160;<br/>
<b>3.1.2.2&#160;</b><br/>
<b>Notification of&#160;Failed&#160;Buffer&#160;Request&#160;</b><br/>
If&#160;&#160;the&#160;&#160;call&#160;&#160;to&#160;&#160;CanTpStartOfReception&#160;&#160;returns&#160;&#160;BUFREQ_E_NOT_OK&#160;&#160;or&#160;<br/>BUFREQ_E_OVFL,&#160;&#160;according&#160;&#160;to&#160;&#160;AUTOSAR&#160;&#160;the&#160;&#160;connection&#160;&#160;shall&#160;&#160;be&#160;&#160;terminated.&#160;<br/>Additionally&#160;each&#160;terminated&#160;reception&#160;shall&#160;be&#160;notified&#160;to&#160;the&#160;upper&#160;layer.&#160;However,&#160;in&#160;the&#160;<br/>mentioned&#160;&#160;case&#160;&#160;the&#160;&#160;upper&#160;&#160;layer&#160;&#160;already&#160;&#160;rejected&#160;&#160;the&#160;&#160;reception&#160;&#160;by&#160;&#160;returning&#160;&#160;an&#160;&#160;invalid&#160;<br/>buffer status.&#160;Therefore&#160;no&#160;additional notification&#160;by&#160;the&#160;CanTp&#160;may&#160;be&#160;required.&#160;<br/>In&#160;&#160;the&#160;&#160;Vector&#160;&#160;CanTp,&#160;&#160;this&#160;&#160;behavior&#160;&#160;is&#160;&#160;configurable.&#160;&#160;If&#160;&#160;the&#160;&#160;related&#160;&#160;switch&#160;&#160;is&#160;&#160;activated,&#160;&#160;the&#160;<br/>notification&#160;&#160;is&#160;&#160;only&#160;&#160;performed&#160;&#160;if&#160;&#160;at&#160;&#160;least&#160;&#160;one&#160;&#160;valid&#160;&#160;buffer&#160;&#160;(BUFREQ_OK&#160;&#160;or&#160;<br/>BUFREQ_E_BUSY) have&#160;been&#160;provided.&#160;<br/>Configuration&#160;attribute:&#160;CanTpOnlyNotifyInformedAppl&#160;<br/>&#160;<br/>
&#160;<br/>
<b>3.1.2.3&#160;</b><br/>
<b>Handling of&#160;FC Frames&#160;with&#160;a&#160;Reserved STmin&#160;</b><br/>
When&#160;&#160;using&#160;&#160;the&#160;&#160;standard&#160;&#160;implementation&#160;&#160;according&#160;&#160;to&#160;&#160;ISO&#160;&#160;157675-2,&#160;&#160;the&#160;&#160;CanTp&#160;&#160;must&#160;<br/>accept&#160;&#160;reserved&#160;&#160;STmin&#160;&#160;values&#160;&#160;(0x80&#160;&#160;...&#160;&#160;0xF0,&#160;&#160;0xFA&#160;&#160;...&#160;&#160;0xFF);&#160;&#160;the&#160;&#160;connection&#160;&#160;is&#160;&#160;then&#160;<br/>processed&#160;with&#160;the&#160;slowest&#160;value&#160;for&#160;STmin&#160;(127msec).&#160;<br/>In&#160;the&#160;CanTp,&#160;it can&#160;be&#160;configured&#160;to&#160;cancel&#160;the&#160;transmission&#160;instead.&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;3.00.01&#160;<br/>
15&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.7.1&#160;<br/>
<hr/>
<a name=16></a><img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/CanTp/doc/TechnicalReference_CanTp-16_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;CAN&#160;Transport Layer&#160;<br/>
Configuration&#160;attribute:&#160;&#160;CanTpRejectFcWithReservedStMin&#160;<br/>&#160;<br/>
<b>3.1.2.4&#160;</b><br/>
<b>Dynamic&#160;and Static&#160;BlockSize&#160;and&#160;STmin&#160;</b><br/>
In&#160;AUTOSAR&#160;4&#160;and&#160;in&#160;older&#160;ISO&#160;specifications,&#160;the&#160;block&#160;size&#160;and&#160;the&#160;STmin&#160;values&#160;of&#160;the&#160;<br/>first&#160;Flow&#160;Control shall&#160;be&#160;used&#160;throughout&#160;the&#160;whole&#160;connection&#160;(CANTP067).&#160;<br/>ISO&#160;15765-2:20215&#160;<a href="TechnicalReference_CanTps.html#3">([4])&#160;</a>supports&#160;both&#160;dynamic&#160;and&#160;static&#160;flow&#160;control&#160;parameters.&#160;In&#160;the&#160;<br/>CanTp,&#160;the&#160;desired&#160;behavior can&#160;be&#160;configured&#160;as&#160;follows:&#160;<br/>
<b>&gt;&#160;&#160;</b>For Rx&#160;connections,&#160;the&#160;block&#160;size&#160;can&#160;be&#160;configured&#160;to&#160;be&#160;constant&#160;until the&#160;end&#160;of&#160;<br/>
the&#160;reception.&#160;It&#160;is then&#160;calculated&#160;once&#160;after receiving&#160;the&#160;FF,&#160;based&#160;on&#160;the&#160;configured&#160;<br/>maximum&#160;block&#160;size&#160;and&#160;the&#160;available&#160;buffer&#160;(default).&#160;When&#160;using&#160;the&#160;alternative&#160;<br/>behavior,&#160;the&#160;block size&#160;is re-calculated&#160;whenever a&#160;Flow&#160;Control have&#160;to&#160;be&#160;<br/>transmitted.&#160;For STmin,&#160;always the&#160;configured&#160;value&#160;is used.&#160;<br/>Configuration&#160;attribute:&#160;CanTpEnableConstantBS&#160;<br/>
<b>&gt;&#160;&#160;</b>For&#160;Tx&#160;connections&#160;it&#160;can&#160;be&#160;configured&#160;if&#160;the&#160;CanTp&#160;shall&#160;either evaluate&#160;only&#160;the&#160;first&#160;<br/>
or all Flow&#160;Control&#160;frames.&#160;<br/>Configuration&#160;attribute:&#160;CanTpUseOnlyFirstFc&#160;<br/>
&#160;<br/>
<b>3.1.2.5&#160;</b><br/>
<b>Dynamic&#160;Channel&#160;Assignment&#160;</b><br/>
According&#160;&#160;to&#160;&#160;AUTOSAR,&#160;&#160;each&#160;&#160;N-SDU&#160;&#160;shall&#160;&#160;be&#160;&#160;assigned&#160;&#160;statically&#160;&#160;to&#160;&#160;one&#160;&#160;connection&#160;<br/>channel.&#160;&#160;Since&#160;not&#160;&#160;always&#160;&#160;all&#160;&#160;N-SDUs&#160;&#160;need&#160;&#160;to&#160;be&#160;processed&#160;&#160;simultaneously,&#160;&#160;the&#160;&#160;CanTp&#160;<br/>provides&#160;the&#160;possibility&#160;to&#160;limit&#160;the&#160;number&#160;of&#160;channels&#160;that&#160;can&#160;be&#160;used&#160;in&#160;parallel.&#160;In&#160;this&#160;<br/>case,&#160;&#160;N-SDUs&#160;&#160;are&#160;&#160;dynamically&#160;&#160;assigned&#160;&#160;to&#160;&#160;a&#160;&#160;channel&#160;&#160;during&#160;&#160;runtime.&#160;&#160;If&#160;&#160;no&#160;&#160;channel&#160;&#160;is&#160;<br/>available,&#160;the&#160;reception&#160;/&#160;transmission&#160;is rejected.&#160;<br/>This&#160;&#160;reduces&#160;&#160;resource&#160;&#160;consumption,&#160;&#160;as&#160;&#160;the&#160;&#160;memory&#160;&#160;needed&#160;&#160;to&#160;&#160;handle&#160;&#160;reception&#160;&#160;or&#160;<br/>transmission&#160;&#160;is&#160;&#160;shared&#160;&#160;between&#160;&#160;multiple&#160;&#160;N-SDUs.&#160;&#160;However,&#160;&#160;it&#160;&#160;adds&#160;&#160;a&#160;&#160;little&#160;&#160;runtime&#160;<br/>overhead&#160;for channel&#160;management.&#160;<br/>Configuration&#160;attribute:&#160;CanTpDynamicChannelAssignment&#160;<br/>&#160;<br/>
<b>3.1.2.6&#160;</b><br/>
<b>Single&#160;Buffer&#160;Optimization&#160;</b><br/>
According&#160;&#160;to&#160;&#160;AUTOSAR,&#160;&#160;the&#160;&#160;CanTp&#160;&#160;must&#160;&#160;include&#160;&#160;a&#160;&#160;handling&#160;&#160;for&#160;&#160;segmented&#160;&#160;receive&#160;<br/>buffers,&#160;&#160;i.e.&#160;&#160;it&#160;&#160;is&#160;&#160;allowed&#160;&#160;that&#160;&#160;CanTpStartOfReception&#160;&#160;returns&#160;&#160;a&#160;&#160;smaller&#160;&#160;buffer&#160;&#160;than&#160;<br/>overall&#160;data&#160;length&#160;specified&#160;in&#160;the&#160;first&#160;frame.&#160;The&#160;&#160;CanTp&#160;will&#160;then&#160;request&#160;an&#160;additional&#160;<br/>buffer&#160;during&#160;reception.&#160;<br/>For&#160;&#160;diagnostic&#160;&#160;applications,&#160;&#160;often&#160;&#160;only&#160;&#160;one&#160;&#160;buffer&#160;&#160;is&#160;&#160;provided&#160;&#160;at&#160;&#160;the&#160;&#160;beginning&#160;&#160;where&#160;&#160;its&#160;<br/>size&#160;&#160;is&#160;&#160;sufficient&#160;&#160;to&#160;&#160;store&#160;&#160;the&#160;&#160;complete&#160;&#160;message.&#160;&#160;Therefore&#160;&#160;no&#160;&#160;additional&#160;&#160;buffer&#160;&#160;must&#160;&#160;be&#160;<br/>requested&#160;by&#160;the&#160;CanTp.&#160;<br/>If&#160;&#160;it&#160;&#160;can&#160;&#160;be&#160;&#160;ensured&#160;&#160;that&#160;&#160;always&#160;&#160;only&#160;&#160;one&#160;&#160;single&#160;&#160;buffer&#160;&#160;is&#160;&#160;used,&#160;&#160;the&#160;&#160;CanTp&#160;&#160;provides&#160;&#160;a&#160;<br/>configuration&#160;switch&#160;to&#160;remove&#160;the&#160;code&#160;to&#160;handle&#160;segmented&#160;buffers.&#160;This&#160;will&#160;reduce&#160;size&#160;<br/>and&#160;runtime.&#160;<br/>Configuration&#160;attributes:&#160;&#160;CanTpOptimizeSingleRxBuffer&#160;&#160;<br/>
&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;3.00.01&#160;<br/>
16&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.7.1&#160;<br/>
<hr/>
<a name=17></a><img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/CanTp/doc/TechnicalReference_CanTp-17_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/CanTp/doc/TechnicalReference_CanTp-17_2.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;CAN&#160;Transport Layer&#160;<br/>
<b>3.1.2.7&#160;</b><br/>
<b>Transmit&#160;Queue&#160;</b><br/>
If&#160;an&#160;N-PDU&#160;is&#160;used&#160;by&#160;different&#160;connections&#160;and&#160;more&#160;than&#160;one&#160;connection&#160;requests&#160;the&#160;<br/>CanIf&#160;to&#160;transmit&#160;this&#160;N-PDU&#160;at&#160;the&#160;same&#160;time,&#160;the&#160;subsequent&#160;TxConfirmation&#160;cannot&#160;be&#160;<br/>uniquely&#160;assigned&#160;to&#160;the&#160;correct&#160;connection.&#160;<br/>There&#160;may&#160;be&#160;two&#160;reasons why&#160;an&#160;N-PDU&#160;is used&#160;by&#160;different&#160;connections:&#160;<br/>
<b>&gt;&#160;&#160;</b>A&#160;channel is configured&#160;as&#160;full&#160;duplex:&#160;the&#160;conflict&#160;occurs&#160;here if&#160;the&#160;Rx&#160;connection&#160;<br/>
tries&#160;to&#160;transmit&#160;an&#160;FC&#160;while&#160;the&#160;Tx&#160;connection&#160;is transmitting&#160;SF,&#160;FF or CFs.&#160;<br/>
<b>&gt;&#160;&#160;</b>extended&#160;or&#160;mixed11&#160;addressing&#160;is used:&#160;then&#160;one&#160;N-PDU&#160;can&#160;be&#160;used&#160;by&#160;multiple&#160;<br/>
channels, as&#160;the&#160;addressing&#160;information&#160;is&#160;part of&#160;the&#160;protocol data.&#160;However,&#160;this&#160;<br/>protocol&#160;data&#160;is not&#160;available&#160;when&#160;the&#160;TxConfirmation&#160;is processed.&#160;<br/>
Currently&#160;AUTOSAR&#160;does&#160;not&#160;describe&#160;how&#160;to&#160;handle&#160;these&#160;cases.&#160;By&#160;default&#160;the&#160;CanTp&#160;<br/>tracks&#160;for&#160;each&#160;N-PDU&#160;if&#160;a&#160;transmission&#160;is&#160;in&#160;progress&#160;or&#160;not.&#160;If&#160;a&#160;channel&#160;tries&#160;to&#160;transmit&#160;<br/>an&#160;&#160;N-PDU&#160;&#160;that&#160;&#160;is&#160;&#160;in&#160;&#160;use&#160;&#160;by&#160;&#160;another&#160;&#160;N-SDU,&#160;&#160;the&#160;&#160;request&#160;&#160;is&#160;&#160;rejected&#160;&#160;and&#160;&#160;the&#160;&#160;respective&#160;<br/>channel will retry&#160;transmission&#160;on&#160;task level.&#160;<br/>However,&#160;&#160;the&#160;&#160;more&#160;&#160;often&#160;&#160;such&#160;&#160;conflicts&#160;&#160;occur&#160;&#160;(e.g.&#160;&#160;if&#160;&#160;many&#160;&#160;N-SDUs&#160;&#160;with&#160;&#160;extended&#160;<br/>addressing&#160;&#160;use&#160;&#160;the&#160;&#160;same&#160;&#160;N-PDU),&#160;&#160;the&#160;&#160;higher&#160;&#160;is&#160;&#160;the&#160;&#160;risk&#160;&#160;of&#160;&#160;sporadically&#160;&#160;unexpected&#160;<br/>behavior&#160;&#160;like&#160;&#160;connection&#160;&#160;timeouts&#160;&#160;due&#160;&#160;to&#160;&#160;the&#160;&#160;delay&#160;&#160;caused&#160;&#160;by&#160;&#160;the&#160;&#160;retry&#160;&#160;on&#160;&#160;task&#160;&#160;level.&#160;To&#160;<br/>eliminate&#160;&#160;this&#160;&#160;risk&#160;&#160;and&#160;&#160;to&#160;&#160;optimize&#160;&#160;the&#160;&#160;throughput&#160;&#160;performance,&#160;&#160;the&#160;&#160;CanTp&#160;&#160;can&#160;&#160;be&#160;<br/>configured&#160;&#160;to&#160;&#160;queue&#160;&#160;the&#160;&#160;transmit&#160;&#160;requests&#160;&#160;to&#160;&#160;the&#160;&#160;CanIf.&#160;&#160;Entries&#160;&#160;in&#160;&#160;the&#160;&#160;queue&#160;&#160;are&#160;<br/>transmitted&#160;as soon&#160;as&#160;the&#160;transmission&#160;of&#160;the&#160;previous N-PDU&#160;is completed.&#160;<br/>The&#160;main&#160;drawback of&#160;this&#160;feature is&#160;increased&#160;memory&#160;consumption.&#160;<br/>Configuration&#160;attributes:&#160;CanTpEnableTransmitQueue&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Note&#160;<br/></b>The&#160;default&#160;transmit&#160;queue&#160;size is 4.&#160;To&#160;set&#160;a&#160;different&#160;queue&#160;size,&#160;the&#160;following&#160;line&#160;<br/>
&#160;&#160;must&#160;be&#160;added&#160;to a&#160;user&#160;config&#160;file:&#160;<br/>
<b>#define</b>&#160;CANTP_TX_QUEUE_SIZE &lt;new size&gt;&#160;<br/>Please&#160;note&#160;that&#160;due&#160;to&#160;implementation&#160;reasons,&#160;only&#160;queue&#160;sizes with a&#160;power&#160;of&#160;two&#160;<br/>are&#160;allowed&#160;(2,&#160;4,&#160;8,&#160;16…).&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
&#160;<br/>&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;3.00.01&#160;<br/>
17&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.7.1&#160;<br/>
<hr/>
<a name=18></a><img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/CanTp/doc/TechnicalReference_CanTp-18_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;CAN&#160;Transport Layer&#160;<br/>
<b>3.1.2.8&#160;</b><br/>
<b>Asynchronous&#160;and Synchronous&#160;behavior&#160;of CanTp_Transmit&#160;</b><br/>
By&#160;default,&#160;the&#160;API&#160;CanTp_Transmit is asynchronous.&#160;This&#160;means it&#160;only&#160;prepares&#160;the&#160;<br/>connection,&#160;while&#160;the&#160;request&#160;for the&#160;payload&#160;data&#160;to&#160;the&#160;upper layer and&#160;the&#160;transmission&#160;<br/>of&#160;the&#160;first&#160;CAN&#160;frame&#160;will&#160;be&#160;done&#160;during&#160;the&#160;next&#160;task cycle.&#160;<br/>
CanIf<br/>
CanTp<br/>
PduR<br/>
CanTp_Transmit()<br/>
PduR_CanTpCopyTxData()<br/>
CanIf_Transmit()<br/>
&#160;<br/>
Figure&#160;3-1&#160;&#160;Sequence&#160;Diagram:&#160;Asynchronous&#160;Transmission&#160;<br/>
The&#160;CanTp&#160;can&#160;be&#160;configured&#160;to&#160;make&#160;CanTp_Transmit synchronous.&#160;Then&#160;the&#160;payload&#160;<br/>request&#160;to&#160;the&#160;upper layer and&#160;the&#160;transmit request&#160;to&#160;the&#160;CanIf&#160;are&#160;done&#160;in&#160;the&#160;context&#160;of&#160;<br/>CanTp_Transmit.&#160;This&#160;will&#160;slightly&#160;improve&#160;transmission&#160;speed,&#160;but&#160;requires also&#160;that&#160;the&#160;<br/>upper layer is able&#160;to&#160;handle&#160;calls to&#160;the&#160;CopyTxData&#160;function&#160;before&#160;CanTp_Transmit&#160;<br/>returns.&#160;<br/>
CanIf<br/>
CanTp<br/>
PduR<br/>
CanTp_Transmit()<br/>
PduR_CanTpCopyTxData()<br/>
CanIf_Transmit()<br/>
&#160;<br/>
Figure&#160;3-2&#160;&#160;Sequence&#160;Diagram:&#160;Synchronous&#160;Transmission&#160;<br/>
Configuration&#160;attributes:&#160;CanTpEnableSynchronousTransmit&#160;<br/>
&#160;<br/>
<b>3.1.2.9&#160;</b><br/>
<b>Support of&#160;PduR&#160;Interface&#160;according to&#160;AUTOSAR 4.1.2&#160;</b><br/>
Although&#160;the&#160;CanTp&#160;is&#160;not&#160;yet&#160;fully&#160;compliant&#160;with&#160;AUTOSAR 4.1.2,&#160;it&#160;already&#160;supports the&#160;<br/>PduR&#160;API&#160;signatures&#160;according&#160;to&#160;the&#160;updated&#160;revision.&#160;<br/>The&#160;following&#160;changes&#160;have&#160;been&#160;made&#160;by&#160;AUTOSAR&#160;in&#160;the&#160;interface&#160;between&#160;CanTp&#160;<br/>and&#160;PduR:&#160;<br/>
<b>&gt;&#160;&#160;</b>PduR_CanTpStartOfReception:&#160;pointer to&#160;PduInfoType&#160;as&#160;additional&#160;parameter&#160;<br/>
added&#160;for meta&#160;data&#160;support (currently&#160;not&#160;supported&#160;by&#160;CanTp;&#160;will be&#160;set&#160;to&#160;NULL)&#160;<br/>
<b>&gt;&#160;&#160;</b>PduR_CanTpRxIndication,&#160;PduR_CanTpTxConfirmation:&#160;type&#160;of&#160;the&#160;Result&#160;<br/>
parameter changed&#160;from&#160;NotifResultType&#160;to&#160;Std_ReturnType&#160;<br/>
&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;3.00.01&#160;<br/>
18&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.7.1&#160;<br/>
<hr/>
<a name=19></a><img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/CanTp/doc/TechnicalReference_CanTp-19_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;CAN&#160;Transport Layer&#160;<br/>
<b>PduR&#160;API&#160;Changes&#160;</b><br/>
AUTOSAR&#160;4.0.3&#160;<br/>
BufReq_ReturnType&#160;<b>PduR_CanTpStartOfReception</b>( PduIdType id,&#160;&#160;<br/>&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;&#160;PduLengthType TpSduLength,&#160;<br/>&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;&#160;PduLengthType* bufferSizePtr );&#160;<br/>
void&#160;<b>PduR_CanTpRxIndication</b>( PduIdType CanTpRxPduId,&#160;&#160;<br/>&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;NotifResultType Result );&#160;<br/>
void&#160;<b>PduR_CanTpTxConfirmation</b>( PduIdType CanTpTxPduId,&#160;&#160;<br/>&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;NotifResultType Result );&#160;<br/>
AUTOSAR&#160;4.1.2&#160;<br/>
BufReq_ReturnType&#160;<b>PduR_CanTpStartOfReception</b>( PduIdType id,&#160;&#160;<br/>&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;&#160;PduInfoType * PduInfoPtr,&#160;<br/>&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;&#160;PduLengthType TpSduLength,&#160;<br/>&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;&#160;PduLengthType* bufferSizePtr );&#160;<br/>
void&#160;<b>PduR_CanTpRxIndication</b>( PduIdType CanTpRxPduId,&#160;&#160;<br/>&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;Std_ReturnType Result );&#160;<br/>
void&#160;<b>PduR_CanTpTxConfirmation</b>(PduIdType CanTpTxPduId,&#160;&#160;<br/>&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;&#160;Std_ReturnType Result );&#160;<br/>
Table&#160;3-4&#160;&#160;&#160;PduR&#160;API&#160;changes&#160;between&#160;AR4.0.3&#160;and&#160;4.1.2&#160;<br/>
With&#160;a&#160;Vector&#160;PduR,&#160;the&#160;DaVinci Configurator&#160;Pro 5&#160;will automatically&#160;detect&#160;the&#160;PduR&#160;<br/>version&#160;and&#160;activate&#160;the&#160;appropriate&#160;API&#160;signature.&#160;<br/>With&#160;a&#160;Non-Vector&#160;PduR&#160;in&#160;the&#160;stack,&#160;the&#160;AUTOSAR version&#160;must&#160;be&#160;set&#160;by&#160;providing&#160;one&#160;<br/>of&#160;the&#160;following&#160;definitions (e.g.&#160;via&#160;compiler&#160;config):&#160;<br/>
AUTOSAR 4.0.3:&#160;#define MSR_PDUR_API_AR_VERSION&#160;&#160;&#160;&#160;0x403&#160;<br/>
AUTOSAR 4.1.2:&#160;#define MSR_PDUR_API_AR_VERSION&#160;&#160;&#160;&#160;0x412&#160;<br/>
<b>&#160;</b><br/>
<b>3.1.2.10&#160;&#160;CAN-FD Support&#160;<br/></b>The&#160;CanTp&#160;supports&#160;the&#160;ISO&#160;15765-2:2015,&#160;which&#160;not&#160;only&#160;introduces CAN-FD frames&#160;<br/>with&#160;more than&#160;8&#160;byte&#160;payload,&#160;but&#160;also&#160;supports&#160;segmented&#160;transfers with&#160;more&#160;than&#160;<br/>4095&#160;byte.&#160;<br/>&#160;<br/>
<b>3.1.2.10.1&#160;&#160;CAN&#160;Messages&#160;with&#160;more&#160;than&#160;8&#160;Byte&#160;<br/></b>CAN-FD&#160;&#160;frames&#160;&#160;support&#160;&#160;a&#160;&#160;higher&#160;&#160;bit&#160;&#160;rate&#160;&#160;in&#160;&#160;the&#160;&#160;data&#160;field&#160;&#160;of&#160;a&#160;&#160;CAN&#160;&#160;frame,&#160;&#160;as&#160;&#160;well&#160;&#160;as&#160;&#160;a&#160;<br/>maximum&#160;length&#160;of&#160;up&#160;to&#160;64&#160;byte&#160;per&#160;frame.&#160;For&#160;the&#160;CanTp&#160;behavior,&#160;only&#160;the&#160;data&#160;length&#160;<br/>is&#160;&#160;relevant,&#160;&#160;CAN-FD&#160;&#160;frames&#160;&#160;with&#160;&#160;only&#160;&#160;8&#160;&#160;byte&#160;&#160;are&#160;&#160;treated&#160;&#160;the&#160;&#160;same&#160;&#160;way&#160;&#160;as&#160;&#160;classic&#160;&#160;CAN&#160;<br/>frames.&#160;&#160;<br/>The&#160;maximum&#160;possible&#160;&#160;CAN&#160;DLC&#160;is&#160;&#160;configured&#160;by&#160;&#160;the&#160;PduLength&#160;parameter&#160;of&#160;&#160;a&#160;global&#160;<br/>PDU&#160;in&#160;the&#160;ECUC:&#160;<br/>
&#160;<br/>
/EcuC/EcucPduCollection/Pdu/PduLength&#160;<br/>
To&#160;use&#160;CAN-FD&#160;for&#160;an&#160;N-SDU,&#160;all&#160;of&#160;the&#160;following&#160;configuration&#160;settings are required:&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;3.00.01&#160;<br/>
19&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.7.1&#160;<br/>
<hr/>
<a name=20></a><img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/CanTp/doc/TechnicalReference_CanTp-20_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/CanTp/doc/TechnicalReference_CanTp-20_2.png"/><br/>
<img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/CanTp/doc/TechnicalReference_CanTp-20_3.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;CAN&#160;Transport Layer&#160;<br/>
<b>&gt;&#160;&#160;</b>CanTpRxNPduRef&#160;/&#160;CanTpTxNPduRef&#160;must&#160;reference&#160;a&#160;global PDU with&#160;a&#160;<br/>
PduLength&#160;&gt;&#160;8&#160;<br/>
<b>&gt;&#160;&#160;</b>CanTpRxTaType&#160;/&#160;CanTpTxTaType&#160;must&#160;be&#160;set&#160;to&#160;CANTP_CANFD_FUNCTIONAL&#160;or&#160;<br/>
CANTP_CANFD_PHYSICAL&#160;<br/>
<b>&gt;&#160;&#160;</b>The&#160;global switch&#160;CanTpFlexibleDataRateSupport&#160;must&#160;be&#160;enabled&#160;<br/>
The&#160;&#160;flow&#160;&#160;control&#160;&#160;N-PDU&#160;&#160;references&#160;&#160;are&#160;&#160;not&#160;&#160;taken&#160;&#160;into&#160;&#160;account,&#160;&#160;as&#160;&#160;these&#160;&#160;frames&#160;&#160;always&#160;<br/>need&#160;less&#160;than&#160;8&#160;byte.&#160;It&#160;does not&#160;affect&#160;the&#160;CanTp&#160;behavior&#160;whether&#160;if&#160;they&#160;are&#160;configured&#160;<br/>in&#160;the&#160;CanIf&#160;as&#160;CAN-FD or as&#160;classic CAN.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Reference</b>&#160;<br/>For&#160;restrictions&#160;of&#160;the&#160;N-PDU&#160;usage&#160;on&#160;a&#160;channel,&#160;please also&#160;refer&#160;to&#160;chapter<a href="TechnicalReference_CanTps.html#22">&#160;3.2.2.</a>&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>3.1.2.10.2&#160;&#160;CAN-FD Frame&#160;Padding&#160;<br/></b>With&#160;CAN-FD,&#160;not&#160;all&#160;DLCs&#160;between&#160;8&#160;and&#160;64&#160;are&#160;valid.&#160;A&#160;&#160;CanTp&#160;frame&#160;must&#160;always&#160;be&#160;<br/>padded&#160;to&#160;the&#160;next&#160;valid&#160;DLC.&#160;The&#160;byte&#160;value&#160;which&#160;is&#160;used&#160;to&#160;fill&#160;up&#160;the&#160;frame&#160;is&#160;either&#160;<br/>random&#160;or user defined,&#160;depending&#160;on&#160;the&#160;following&#160;configuration&#160;parameters:&#160;<br/>
&#160;<br/>
CanTp/CanTpGeneral/CanTpHavePaddingByte&#160;<br/>
&#160;<br/>
CanTp/CanTpGeneral/CanTpPaddingByte&#160;<br/>
The&#160;PaddingActivation&#160;setting,&#160;which&#160;can&#160;be&#160;configured&#160;globally&#160;and&#160;N-SDU&#160;specific,&#160;only&#160;<br/>applies&#160;for&#160;frames which&#160;require&#160;a&#160;DLC less&#160;than&#160;8&#160;byte.&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Example&#160;</b><br/>
&#160;&#160;<b>&gt;&#160;</b><br/>
If&#160;a&#160;CanTp&#160;CAN-FD&#160;frame&#160;(PCI&#160;+&#160;payload)&#160;needs&#160;6 byte,&#160;it&#160;is&#160;padded&#160;to 8&#160;byte if&#160;<br/>padding&#160;is&#160;active,&#160;but&#160;left&#160;at&#160;6 byte if&#160;padding&#160;is&#160;disabled.&#160;<br/>
<b>&gt;&#160;&#160;</b>If&#160;a&#160;CanTp&#160;CAN-FD&#160;frame&#160;(PCI&#160;+&#160;payload)&#160;needs&#160;21&#160;byte,&#160;it&#160;is&#160;always&#160;extended&#160;to&#160;<br/>
24&#160;byte,&#160;which is the&#160;next&#160;valid CAN-FD&#160;length&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
&#160;<br/>
<b>3.1.2.10.3&#160;&#160;Segmented Messages&#160;with more&#160;than&#160;4095&#160;Byte&#160;<br/></b>ISO15765-2:2015&#160;&#160;also&#160;&#160;introduced&#160;&#160;an&#160;&#160;extended&#160;&#160;first&#160;&#160;frame&#160;&#160;definition&#160;&#160;(in&#160;&#160;the&#160;&#160;following&#160;<br/>referred&#160;&#160;to&#160;&#160;as&#160;&#160;“long&#160;&#160;first&#160;&#160;frame”;&#160;LFF),&#160;&#160;which&#160;&#160;uses&#160;&#160;a&#160;&#160;data&#160;&#160;length&#160;of&#160;&#160;32&#160;&#160;bit.&#160;&#160;For&#160;&#160;backward&#160;<br/>compatibility,&#160;&#160;LFFs&#160;&#160;are&#160;&#160;only&#160;&#160;used&#160;&#160;if&#160;&#160;the&#160;&#160;overall&#160;&#160;message&#160;&#160;length&#160;&#160;is&#160;&#160;above&#160;&#160;4095&#160;&#160;byte.&#160;<br/>Otherwise,&#160;the&#160;standard&#160;first&#160;frame&#160;format&#160;with&#160;12&#160;bit&#160;data&#160;length&#160;is&#160;used.&#160;<br/>As&#160;the&#160;LFF&#160;does&#160;not&#160;depend&#160;on&#160;the&#160;length&#160;of&#160;the&#160;used&#160;N-PDUs,&#160;it&#160;can&#160;also&#160;be&#160;used&#160;with&#160;<br/>classic&#160;&#160;CAN&#160;&#160;frames.&#160;&#160;However,&#160;&#160;for&#160;&#160;ISO&#160;&#160;compatibility&#160;&#160;it&#160;&#160;is&#160;&#160;recommended&#160;&#160;to&#160;&#160;enable&#160;&#160;this&#160;<br/>functionality&#160;when&#160;using&#160;CAN-FD.&#160;<br/>Configuration&#160;attribute:&#160;CanTpSupportLongFirstFrames&#160;<br/>
&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;3.00.01&#160;<br/>
20&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.7.1&#160;<br/>
<hr/>
<a name=21></a><img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/CanTp/doc/TechnicalReference_CanTp-21_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/CanTp/doc/TechnicalReference_CanTp-21_2.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;CAN&#160;Transport Layer&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Caution&#160;<br/></b>In&#160;the&#160;ECUC&#160;module,&#160;the&#160;type&#160;of&#160;the&#160;global&#160;PduLength can&#160;be&#160;configured:&#160;<br/>
<b>&#160;&#160;</b>&#160;&#160;/EcuC/EcucPduCollection/PduLengthTypeEnum&#160;<br/>
To&#160;use&#160;the&#160;full&#160;32&#160;bit&#160;data&#160;length&#160;of&#160;the&#160;LFF,&#160;it&#160;must&#160;be&#160;set&#160;to&#160;UINT32.&#160;<br/>If&#160;set&#160;to&#160;UINT16,&#160;the&#160;maximum&#160;data&#160;length&#160;will&#160;be&#160;limited&#160;to&#160;65535 byte&#160;and the&#160;CanTp&#160;<br/>will&#160;reject&#160;received&#160;LFFs&#160;with a&#160;longer&#160;data&#160;length.&#160;&#160;<br/>For&#160;transmission&#160;requests,&#160;an&#160;overrun&#160;can’t&#160;be&#160;detected&#160;by&#160;the&#160;CanTp&#160;as&#160;the&#160;compiler&#160;<br/>will&#160;already&#160;truncate&#160;the&#160;data length&#160;passed&#160;to&#160;CanTp_Transmit.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>&#160;<br/></b>&#160;<br/>
<b>3.1.2.11&#160;&#160;Separation Time&#160;by&#160;Application&#160;<br/></b>The&#160;accuracy&#160;of&#160;the&#160;STmin&#160;calculated&#160;by&#160;the&#160;CanTp&#160;depends&#160;on&#160;its&#160;task&#160;&#160;cycle.&#160;If&#160;STmin&#160;<br/>values&#160;are&#160;required&#160;which&#160;are&#160;in&#160;the&#160;range&#160;or&#160;below&#160;the&#160;CanTp&#160;task&#160;cycle&#160;time,&#160;this&#160;may&#160;<br/>not&#160;be&#160;acceptable.&#160;<br/>One&#160;solution&#160;may&#160;be&#160;to&#160;reduce&#160;the&#160;task&#160;cycle&#160;time.&#160;However,&#160;this&#160;is&#160;usually&#160;not&#160;&#160;satisfying&#160;<br/>since&#160;it&#160;produces&#160;too&#160;high&#160;CPU&#160;load.&#160;An&#160;external&#160;timer&#160;(like&#160;in&#160;the&#160;OS&#160;or&#160;in&#160;hardware)&#160;can&#160;<br/>be&#160;an&#160;alternative.&#160;<br/>For&#160;this,&#160;the&#160;CanTp&#160;provides&#160;an&#160;optional&#160;call-out&#160;which&#160;notifies&#160;the&#160;application&#160;whenever&#160;<br/>STmin&#160;need&#160;to&#160;be&#160;started.&#160;&#160;By&#160;the&#160;return&#160;value&#160;of&#160;the&#160;notification&#160;function,&#160;the&#160;application&#160;<br/>can&#160;indicate&#160;whether to&#160;do&#160;STmin&#160;handling&#160;by&#160;itself,&#160;or leave&#160;it&#160;to&#160;the&#160;CanTp.&#160;<br/>If&#160;the&#160;application&#160;&#160;accepts&#160;&#160;to&#160;handle&#160;&#160;the&#160;separation&#160;time,&#160;&#160;it&#160;has&#160;to&#160;set&#160;&#160;up&#160;a&#160;timer&#160;and&#160;call&#160;<br/><a href="TechnicalReference_CanTps.html#49">CanTp_StopSeparationTime()&#160;&#160;</a>when&#160;&#160;the&#160;&#160;timer&#160;&#160;expired.&#160;&#160;This&#160;&#160;will&#160;&#160;trigger&#160;&#160;the&#160;<br/>transmission&#160;of&#160;the&#160;next&#160;CF.&#160;<br/>
It&#160;&#160;is&#160;&#160;allowed&#160;&#160;to&#160;&#160;call&#160;&#160;<a href="TechnicalReference_CanTps.html#49">CanTp_StopSeparationTime()&#160;&#160;</a>anytime&#160;&#160;between&#160;&#160;the&#160;&#160;call&#160;&#160;to&#160;<br/><a href="TechnicalReference_CanTps.html#49">Appl_StartSeparationTime()&#160;</a>and&#160;before&#160;the&#160;end&#160;of&#160;the&#160;configured&#160;N_Cs&#160;time.&#160;Only&#160;<br/>if&#160;N_Cs&#160;expires&#160;and&#160;the&#160;call-back&#160;has&#160;not&#160;been&#160;called&#160;yet,&#160;the&#160;CanTp&#160;will&#160;send&#160;the&#160;next&#160;CF&#160;<br/>by&#160;&#160;itself&#160;&#160;to&#160;&#160;fulfill&#160;&#160;the&#160;&#160;ISO15765-2&#160;&#160;performance&#160;&#160;requirement&#160;&#160;(see&#160;&#160;<a href="TechnicalReference_CanTps.html#31">3.9.2.2).</a>&#160;&#160;Calling&#160;<br/><a href="TechnicalReference_CanTps.html#49">CanTp_StopSeparationTime()&#160;</a>afterwards&#160;has&#160;no&#160;effect.&#160;<br/>
&#160;<br/>
Figure&#160;3-3&#160;&#160;Separation&#160;Time&#160;by&#160;Application&#160;<br/>
To&#160;activate&#160;the&#160;feature,&#160;the&#160;call-out&#160;function&#160;name&#160;must&#160;be&#160;specified&#160;in&#160;the&#160;config&#160;tool:&#160;<br/>
&#160;<br/>
CanTp/CanTpGeneral/CanTpApplSTminStartFunction&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;3.00.01&#160;<br/>
21&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.7.1&#160;<br/>
<hr/>
<a name=22></a><img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/CanTp/doc/TechnicalReference_CanTp-22_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;CAN&#160;Transport Layer&#160;<br/>
<b>3.2&#160;</b><br/>
<b>Limitations&#160;</b><br/>
<b>3.2.1&#160;</b><br/>
<b>Memory&#160;Optimization&#160;</b><br/>
Memory&#160;optimization&#160;by&#160;the&#160;linker via&#160;data&#160;scattering:&#160;<br/>Some&#160;&#160;linkers&#160;&#160;allow&#160;&#160;filling&#160;&#160;the&#160;&#160;“holes”&#160;&#160;caused&#160;&#160;by&#160;&#160;padding&#160;&#160;with&#160;&#160;some&#160;&#160;“foreign”&#160;&#160;data.&#160;&#160;Since&#160;<br/>the&#160;&#160;generation&#160;&#160;tool&#160;&#160;cannot&#160;&#160;be&#160;&#160;aware&#160;&#160;of&#160;&#160;“foreign”&#160;&#160;data,&#160;&#160;such&#160;&#160;optimizations&#160;&#160;must&#160;&#160;be&#160;<br/>disabled.&#160;<br/>
&#160;<br/>
<b>3.2.2&#160;</b><br/>
<b>Channel&#160;Assignment&#160;</b><br/>
In&#160;the&#160;Vector&#160;CanTp,&#160;a&#160;channel&#160;always&#160;consists&#160;of&#160;at&#160;most&#160;one&#160;Rx&#160;N-SDU&#160;and&#160;one&#160;Tx&#160;N-<br/>SDU.&#160;&#160;Furthermore,&#160;&#160;to&#160;&#160;each&#160;&#160;channel&#160;&#160;at&#160;&#160;most&#160;&#160;one&#160;&#160;Rx&#160;&#160;N-PDU&#160;&#160;and&#160;&#160;one&#160;&#160;Tx&#160;&#160;N-PDU&#160;&#160;is&#160;<br/>assigned.&#160;These&#160;N-PDUs are shared&#160;between&#160;the&#160;two&#160;N-SDUs as shown&#160;in<a href="TechnicalReference_CanTps.html#22">&#160;Figure&#160;3-4.</a>&#160;<br/>As&#160;&#160;with&#160;&#160;CAN-FD&#160;&#160;an&#160;&#160;N-PDU&#160;&#160;can&#160;&#160;either&#160;&#160;be&#160;&#160;CAN2.0&#160;&#160;or&#160;&#160;CAN-FD&#160;&#160;but&#160;&#160;not&#160;&#160;both,&#160;&#160;this&#160;&#160;implies&#160;<br/>that&#160;&#160;you&#160;&#160;have&#160;&#160;to&#160;&#160;use&#160;&#160;a&#160;&#160;CAN-FD&#160;&#160;Flow&#160;&#160;Control&#160;&#160;if&#160;&#160;the&#160;&#160;SFs&#160;&#160;/&#160;&#160;FFs&#160;&#160;/&#160;&#160;CFs&#160;&#160;of&#160;&#160;the&#160;&#160;opposite&#160;<br/>direction&#160;use&#160;CAN-FD.&#160;Otherwise&#160;&#160;you&#160;will&#160;need&#160;separate&#160;channels&#160;for&#160;the&#160;Rx&#160;and&#160;Tx&#160;N-<br/>SDUs.&#160;<br/>
&#160;<br/>
Figure&#160;3-4&#160;&#160;Channel&#160;Assignment&#160;for&#160;N-SDUs&#160;and&#160;N-PDUs&#160;<br/>
While&#160;each&#160;N-SDU&#160;represents&#160;a&#160;CanTp&#160;connection,&#160;the&#160;N-PDUs&#160;identify&#160;the&#160;CAN&#160;frames&#160;<br/>that&#160;are transmitted&#160;and&#160;received&#160;via&#160;the&#160;CanIf.&#160;&#160;<br/>With&#160;&#160;Standard&#160;&#160;addressing,&#160;&#160;each&#160;&#160;N-PDU&#160;&#160;can&#160;&#160;only&#160;&#160;be&#160;&#160;assigned&#160;&#160;to&#160;&#160;one&#160;&#160;channel.&#160;&#160;With&#160;<br/>extended&#160;and&#160;mixed11&#160;addressing,&#160;an&#160;N-PDU&#160;may&#160;be&#160;used&#160;on&#160;multiple&#160;channels,&#160;but&#160;only&#160;<br/>with&#160;different&#160;address&#160;information&#160;(N_TA&#160;/&#160;N_AE).&#160;<br/>
<b>3.2.3&#160;</b><br/>
<b>Channel&#160;Addressing&#160;</b><br/>
Usage&#160;of&#160;different&#160;addressing&#160;within&#160;the&#160;same&#160;channel is not&#160;allowed.&#160;<br/>The&#160;addressing&#160;format&#160;–&#160;CANTP_STANDARD,&#160;CANTP_EXTENDED&#160;or&#160;CANTP_MIXED11&#160;<br/>–&#160;must&#160;be&#160;identical&#160;for&#160;each&#160;pair&#160;of&#160;Rx/Tx&#160;N-SDUs assigned&#160;to&#160;the&#160;same&#160;channel.&#160;<br/>
&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;3.00.01&#160;<br/>
22&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.7.1&#160;<br/>
<hr/>
<a name=23></a><img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/CanTp/doc/TechnicalReference_CanTp-23_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;CAN&#160;Transport Layer&#160;<br/>
<b>3.2.4&#160;</b><br/>
<b>Data&#160;Length Parameter&#160;</b><br/>
According&#160;&#160;to&#160;&#160;the&#160;&#160;AUTOSAR&#160;&#160;BSWMD&#160;&#160;specification,&#160;&#160;each&#160;&#160;N-SDU&#160;&#160;has&#160;&#160;a&#160;&#160;Data&#160;&#160;Length&#160;<br/>parameter&#160;(CanTpRxDl,&#160;CanTpTxDl).&#160;However,&#160;it&#160;is&#160;not&#160;clearly&#160;specified&#160;if&#160;this&#160;data&#160;length&#160;<br/>applies&#160;&#160;to&#160;&#160;the&#160;&#160;N-SDU&#160;&#160;(complete&#160;&#160;message&#160;&#160;length)&#160;&#160;or&#160;&#160;to&#160;&#160;the&#160;&#160;N-PDU&#160;&#160;(CAN&#160;&#160;message&#160;&#160;data&#160;<br/>length).&#160;&#160;As&#160;&#160;furthermore&#160;&#160;the&#160;&#160;parameters&#160;&#160;are&#160;&#160;anyway&#160;&#160;deprecated&#160;&#160;in&#160;&#160;AR&#160;&#160;4.1.1&#160;&#160;(see&#160;&#160;also&#160;<br/>AUTOSAR RFC 53101), they&#160;are no&#160;longer evaluated&#160;by&#160;the&#160;CanTp.&#160;&#160;<br/>For&#160;compatibility&#160;reasons,&#160;the&#160;parameters&#160;are&#160;part&#160;of&#160;the&#160;ECUC&#160;file,&#160;but&#160;their&#160;values&#160;have&#160;<br/>no&#160;effect.&#160;<br/>
<b>3.3&#160;</b><br/>
<b>Initialization&#160;</b><br/>
The&#160;API&#160;&#160;function&#160;&#160;CanTp_Init()&#160;&#160;uses&#160;&#160;the&#160;&#160;given&#160;&#160;configuration&#160;&#160;set&#160;&#160;to&#160;&#160;initialize&#160;&#160;all&#160;&#160;global&#160;<br/>variables&#160;of&#160;the&#160;CAN&#160;Transport&#160;Layer&#160;and&#160;brings&#160;it&#160;to&#160;the&#160;state&#160;Idle,&#160;where&#160;reception&#160;and&#160;<br/>transmission&#160;tasks&#160;can&#160;be&#160;started.&#160;<br/>
<b>3.4&#160;</b><br/>
<b>States&#160;</b><br/>
The&#160;CanTp&#160;module&#160;has&#160;two&#160;internal&#160;states,&#160;CANTP_OFF&#160;and&#160;CANTP_ON.&#160;After&#160;power&#160;up,&#160;<br/>the&#160;&#160;CanTp&#160;&#160;is&#160;&#160;in&#160;&#160;the&#160;&#160;CANTP_OFF&#160;&#160;state.&#160;&#160;In&#160;&#160;this&#160;&#160;state&#160;&#160;no&#160;&#160;communication&#160;&#160;tasks&#160;&#160;can&#160;&#160;be&#160;<br/>performed.&#160;<br/>
The&#160;&#160;CanTp&#160;&#160;changes&#160;&#160;to&#160;&#160;the&#160;&#160;internal&#160;&#160;state&#160;&#160;CANTP_ON&#160;&#160;when&#160;&#160;it&#160;&#160;has&#160;&#160;been&#160;&#160;successfully&#160;<br/>initialized.&#160;Segmentation&#160;and&#160;reassembly&#160;tasks&#160;are&#160;only&#160;performed&#160;when&#160;the&#160;module&#160;is&#160;in&#160;<br/>this&#160;&#160;state.&#160;&#160;After&#160;&#160;initialization,&#160;&#160;all&#160;&#160;transport&#160;&#160;protocol&#160;&#160;connections&#160;&#160;are&#160;&#160;in&#160;&#160;a&#160;&#160;sub-state&#160;&#160;of&#160;<br/>CANTP_ON,&#160;&#160;in&#160;&#160;which&#160;&#160;neither&#160;&#160;transmission&#160;&#160;nor&#160;&#160;reception&#160;&#160;is&#160;&#160;in&#160;&#160;progress&#160;&#160;(CANTP_RX_IDLE&#160;<br/>and&#160;CANTP_TX_IDLE).&#160;<br/>
If&#160;&#160;called&#160;&#160;when&#160;&#160;the&#160;&#160;CanTp&#160;&#160;module&#160;&#160;is&#160;&#160;in&#160;&#160;the&#160;&#160;global&#160;&#160;state&#160;&#160;CANTP_ON,&#160;&#160;the&#160;&#160;function&#160;<br/>CanTp_Init&#160;returns&#160;the&#160;module&#160;to&#160;state&#160;Idle&#160;and&#160;all&#160;current&#160;connections are&#160;terminated.&#160;<br/>
The&#160;&#160;function&#160;&#160;CanTp_Shutdown&#160;&#160;stops&#160;&#160;the&#160;&#160;CanTp&#160;&#160;module&#160;&#160;properly&#160;&#160;and&#160;&#160;sets&#160;&#160;the&#160;&#160;global&#160;<br/>state&#160;to&#160;CANTP_OFF.&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;3.00.01&#160;<br/>
23&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.7.1&#160;<br/>
<hr/>
<a name=24></a><img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/CanTp/doc/TechnicalReference_CanTp-24_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;CAN&#160;Transport Layer&#160;<br/>
<b>stm&#160;CanTp</b><br/>
<b>CANTP_OFF</b><br/>
PowerUp<br/>
PowerDown<br/>
PowerDown<br/>
CanTp_Init<br/>
CanTp_Shutdown<br/>
<b>CANTP_ON</b><br/>
[Rx&#160;Connection&#160;Channel]<br/>
<b>CANTP_RX_IDLE</b><br/>
<b>CANTP_RX_PROCESSING</b><br/>
[Receive&#160;NPdu]<br/>
[Reception&#160;finished]<br/>
Init<br/>
[Tx&#160;Connection&#160;Channel]<br/>
<b>CANTP_TX_IDLE</b><br/>
<b>CANTP_TX_PROCESSING</b><br/>
[Transmit&#160;NSdu]<br/>
[Transmission&#160;finished]<br/>
Init<br/>
&#160;<br/>
Figure&#160;3-5&#160;&#160;CanTp&#160;internal&#160;states&#160;<br/>
<b>3.5&#160;</b><br/>
<b>Main Functions&#160;</b><br/>
The&#160;&#160;CanTp_MainFunction&#160;&#160;controls&#160;&#160;the&#160;&#160;timing&#160;&#160;behavior&#160;&#160;of&#160;&#160;the&#160;&#160;CanTp&#160;&#160;and&#160;&#160;performs&#160;&#160;all&#160;<br/>tasks that&#160;have&#160;to&#160;be&#160;done&#160;cyclically.&#160;<br/>Especially&#160;for&#160;the&#160;calculation&#160;of&#160;the&#160;different&#160;timings&#160;(delays,&#160;timeouts)&#160;it&#160;is&#160;important&#160;to&#160;call&#160;<br/>the&#160;&#160;main&#160;&#160;function&#160;&#160;periodically&#160;&#160;with&#160;&#160;the&#160;&#160;time&#160;&#160;interval&#160;&#160;that&#160;&#160;have&#160;&#160;been&#160;&#160;configured&#160;&#160;with&#160;&#160;the&#160;<br/>‘CanTpMainFunctionPeriod’&#160;parameter in&#160;the&#160;generation&#160;tool.&#160;<br/>It&#160;&#160;is&#160;&#160;also&#160;&#160;possible&#160;&#160;to&#160;&#160;separate&#160;&#160;the&#160;&#160;main&#160;&#160;function&#160;&#160;into&#160;&#160;Rx&#160;&#160;and&#160;&#160;Tx,&#160;&#160;e.g.&#160;&#160;to&#160;&#160;optimize&#160;&#160;the&#160;<br/>throughput&#160;(see&#160;chapte<a href="TechnicalReference_CanTps.html#15">r&#160;3.1.2.1&#160;</a>for&#160;details).&#160;<br/>
&#160;<br/>
<b>3.6&#160;</b><br/>
<b>Error&#160;Handling&#160;</b><br/>
<b>3.6.1&#160;</b><br/>
<b>Development&#160;Error&#160;Reporting&#160;</b><br/>
By&#160;&#160;default,&#160;&#160;development&#160;&#160;errors&#160;&#160;are&#160;&#160;reported&#160;&#160;to&#160;&#160;the&#160;&#160;DET&#160;&#160;using&#160;&#160;the&#160;&#160;service&#160;<br/>Det_ReportError()&#160;&#160;as&#160;&#160;specified&#160;&#160;in<a href="TechnicalReference_CanTps.html#3">&#160;&#160;[5],</a>&#160;&#160;if&#160;&#160;development&#160;&#160;error&#160;&#160;reporting&#160;&#160;is&#160;&#160;enabled&#160;&#160;(i.e.&#160;<br/>pre-compile&#160;parameter&#160;CANTP_DEV_ERROR_DETECT==STD_ON).&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;3.00.01&#160;<br/>
24&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.7.1&#160;<br/>
<hr/>
<a name=25></a><img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/CanTp/doc/TechnicalReference_CanTp-25_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;CAN&#160;Transport Layer&#160;<br/>
If&#160;&#160;another&#160;&#160;module&#160;&#160;is&#160;&#160;used&#160;&#160;for&#160;&#160;development&#160;&#160;error&#160;&#160;reporting,&#160;&#160;the&#160;&#160;function&#160;&#160;prototype&#160;&#160;for&#160;<br/>reporting&#160;the&#160;error&#160;can&#160;be&#160;configured&#160;by&#160;the&#160;integrator,&#160;but&#160;must&#160;have&#160;the&#160;same&#160;signature&#160;<br/>as the&#160;service&#160;Det_ReportError().&#160;<br/>
The&#160;reported&#160;CanTp&#160;ID is&#160;35.&#160;<br/>The&#160;reported&#160;service&#160;IDs&#160;identifies&#160;the&#160;services&#160;which&#160;are&#160;described&#160;<a href="TechnicalReference_CanTps.html#38">in&#160;5.1.&#160;</a>The&#160;following&#160;<br/>table&#160;presents&#160;the&#160;service&#160;IDs&#160;and&#160;the&#160;related&#160;services.&#160;Services&#160;marked&#160;with&#160;an&#160;asterisk&#160;<br/>(*)&#160;are&#160;internal service&#160;IDs:&#160;<br/>
<b>Service&#160;ID&#160;</b><br/>
<b>Service&#160;</b><br/>
0x01&#160;<br/>
CanTp_Init&#160;<br/>
0x02&#160;<br/>
CanTp_Shutdown&#160;<br/>
0x03&#160;<br/>
CanTp_Transmit&#160;<br/>
0x04&#160;<br/>
CanTp_RxIndication&#160;<br/>
0x05&#160;<br/>
CanTp_TxConfirmation&#160;<br/>
0x06&#160;<br/>
CanTp_MainFunction&#160;<br/>
0x07&#160;<br/>
CanTp_GetVersionInfo&#160;<br/>
0x08&#160;<br/>
CanTp_CancelTransmit&#160;<br/>
0x09&#160;<br/>
CanTp_CancelReceive&#160;<br/>
0x0A&#160;<br/>
CanTp_ChangeParameter&#160;<br/>
0x0B&#160;<br/>
CanTp_ReadParameter&#160;<br/>
0x20*&#160;<br/>
CanTp_MainFunctionRx&#160;<br/>
0x21*&#160;<br/>
CanTp_MainFunctionTx&#160;<br/>
0x30*&#160;<br/>
CanTp_RxGetBuffer&#160;<br/>
0x31*&#160;<br/>
CanTp_TxGetBuffer&#160;<br/>
0x32*&#160;<br/>
CanTp_RxTransmitFrame&#160;<br/>
0x33*&#160;<br/>
CanTp_TxTransmitFrame&#160;<br/>
0x34*&#160;<br/>
CanTp_RxInit&#160;<br/>
0x35*&#160;<br/>
CanTp_TxInit&#160;<br/>
0x36*&#160;<br/>
CanTp_StopSeparationTimer&#160;<br/>
Table&#160;3-5&#160;&#160;&#160;Service&#160;IDs&#160;<br/>
The&#160;&#160;errors&#160;&#160;reported&#160;&#160;to&#160;&#160;DET&#160;&#160;are&#160;&#160;described&#160;&#160;in&#160;&#160;the&#160;&#160;following&#160;&#160;table.&#160;&#160;Errors&#160;&#160;marked&#160;&#160;with&#160;&#160;an&#160;<br/>asterisk (*)&#160;are Vector&#160;specific:&#160;<br/>
<b>Error&#160;Code&#160;</b><br/>
<b>Description&#160;</b><br/>
0x01&#160;&#160;CANTP_E_PARAM_CONFIG&#160;&#160;<br/>
API&#160;called&#160;with wrong&#160;parameters&#160;<br/>
0x02&#160;&#160;CANTP_E_PARAM_ID&#160;&#160;<br/>
API&#160;called&#160;with wrong&#160;parameters&#160;<br/>
0x03&#160;&#160;CANTP_E_PARAM_POINTER&#160;<br/>
API&#160;called&#160;with wrong&#160;parameters&#160;<br/>
0x20&#160;&#160;CANTP_E_UNINIT&#160;<br/>
API&#160;service used&#160;without&#160;module initialization&#160;<br/>
0x30&#160;&#160;CANTP_E_INVALID_TX_ID&#160;&#160;<br/>
Invalid&#160;Transmit&#160;N-PDU&#160;identifier&#160;<br/>
0x40&#160;&#160;CANTP_E_INVALID_RX_ID&#160;&#160;<br/>
Invalid Receive N-PDU&#160;identifier&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;3.00.01&#160;<br/>
25&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.7.1&#160;<br/>
<hr/>
<a name=26></a><img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/CanTp/doc/TechnicalReference_CanTp-26_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;CAN&#160;Transport Layer&#160;<br/>
<b>Error&#160;Code&#160;</b><br/>
<b>Description&#160;</b><br/>
0x50&#160;&#160;CANTP_E_INVALID_TX_BUFFER&#160;&#160;<br/>
Invalid&#160;Transmit&#160;buffer&#160;provided&#160;<br/>
0x60&#160;&#160;CANTP_E_INVALID_RX_BUFFER&#160;&#160;<br/>
Invalid Receive buffer&#160;provided&#160;<br/>
0x70&#160;&#160;CANTP_E_INVALID_TX_LENGTH&#160;&#160;<br/>
Invalid data length of&#160;the&#160;transmit&#160;N-PDU&#160;<br/>
0x80&#160;&#160;CANTP_E_INVALID_RX_LENGTH&#160;&#160;<br/>
Invalid data length of&#160;the&#160;receive N-PDU&#160;<br/>
0x90&#160;&#160;CANTP_E_INVALID_TA_TYPE&#160;<br/>
Functional&#160;FF&#160;received,&#160;or&#160;transmission&#160;request&#160;for&#160;<br/>a&#160;functional&#160;N-SDU&#160;with SF&#160;data length&#160;<br/>
0xA0&#160;&#160;CANTP_E_OPER_NOT_SUPPORTED&#160;&#160;Requested&#160;operation is&#160;currently&#160;not&#160;available (e.g.&#160;<br/>
cancel&#160;a&#160;transmission&#160;that&#160;is&#160;not&#160;in&#160;progress)&#160;<br/>
0xB0&#160;&#160;CANTP_E_COM&#160;&#160;<br/>
Implementation&#160;specific&#160;error&#160;<br/>
0xB1&#160;&#160;CANTP_E_INVALID_RX_STATE*&#160;<br/>
Rx&#160;state&#160;machine&#160;is&#160;in an invalid state&#160;<br/>
0xB2&#160;&#160;CANTP_E_INVALID_TX_STATE*&#160;<br/>
Tx&#160;state&#160;machine&#160;is&#160;in an&#160;invalid state&#160;<br/>
0xB3&#160;&#160;CANTP_E_INVALID_FRAME_TYPE*&#160;<br/>
An invalid&#160;frame&#160;type&#160;occurred&#160;<br/>
0xC0&#160;&#160;CANTP_E_RX_COM&#160;<br/>
General&#160;reception&#160;error&#160;<br/>
0xC1&#160;&#160;CANTP_E_RX_TIMEOUT_AR*&#160;<br/>
N_Ar&#160;timeout&#160;occurred&#160;<br/>
0xC2&#160;&#160;CANTP_E_RX_TIMEOUT_BR*&#160;<br/>
N_Br&#160;timeout&#160;occurred&#160;<br/>
0xC3&#160;&#160;CANTP_E_RX_TIMEOUT_CR*&#160;<br/>
N_Cr&#160;timeout&#160;occurred&#160;<br/>
0xC4&#160;&#160;CANTP_E_RX_INVALID_SN*&#160;<br/>
CF with invalid sequence&#160;number&#160;received&#160;<br/>
0xC5&#160;&#160;CANTP_E_RX_WFTMAX*&#160;<br/>
Max.&#160;number&#160;of&#160;wait&#160;frames&#160;transmitted&#160;<br/>
0xC6&#160;&#160;CANTP_E_RX_RESTART*&#160;<br/>
Connection&#160;terminate due to&#160;new&#160;SF/FF reception&#160;<br/>
0xC7&#160;&#160;CANTP_E_RX_TRANSMIT_ERROR*&#160;<br/>
Transmission&#160;of&#160;a&#160;flow&#160;control&#160;frame&#160;failed&#160;<br/>
0xD0&#160;&#160;CANTP_E_TX_COM&#160;<br/>
General&#160;transmission&#160;error&#160;<br/>
0xD1&#160;&#160;CANTP_E_TX_TIMEOUT_AS*&#160;<br/>
N_As&#160;timeout&#160;occurred&#160;<br/>
0xD2&#160;&#160;CANTP_E_TX_TIMEOUT_BS*&#160;<br/>
N_Bs&#160;timeout&#160;occurred&#160;<br/>
0xD3&#160;&#160;CANTP_E_TX_TIMEOUT_CS*&#160;<br/>
N_Cs&#160;timeout&#160;occurred&#160;<br/>
0xD4&#160;&#160;CANTP_E_TX_FC_OVFL*&#160;<br/>
FC.OVFL&#160;received&#160;<br/>
0xD5&#160;&#160;CANTP_E_TX_INVALID_FS*&#160;<br/>
FC&#160;with invalid flow&#160;status&#160;received&#160;<br/>
0xD6&#160;&#160;CANTP_E_TX_RES_STMIN*&#160;<br/>
FC&#160;with reserved&#160;STmin&#160;received,&#160;but&#160;not&#160;allowed&#160;<br/>
0xD7&#160;&#160;CANTP_E_TX_TRANSMIT_ERROR*&#160;<br/>
Transmission&#160;of&#160;a&#160;frame&#160;failed&#160;<br/>
Table&#160;3-6&#160;&#160;&#160;Errors&#160;reported&#160;to&#160;DET&#160;<br/>
&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;3.00.01&#160;<br/>
26&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.7.1&#160;<br/>
<hr/>
<a name=27></a><img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/CanTp/doc/TechnicalReference_CanTp-27_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/CanTp/doc/TechnicalReference_CanTp-27_2.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;CAN&#160;Transport Layer&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>FAQ:&#160;How&#160;to&#160;avoid&#160;DET&#160;errors&#160;for&#160;failed&#160;CanTp&#160;communication?&#160;</b><br/>
&#160;&#160;AUTOSAR&#160;specifies&#160;that&#160;the&#160;CanTp&#160;shall&#160;not&#160;only&#160;report&#160;a DET&#160;for&#160;typical&#160;integration&#160;<br/>
errors,&#160;but&#160;also&#160;for&#160;communication errors&#160;like&#160;timeouts.&#160;Although&#160;sometimes&#160;helpful,&#160;in&#160;<br/>most&#160;cases&#160;this&#160;is&#160;not&#160;desired.&#160;<br/>To&#160;suppress&#160;reporting&#160;a&#160;DET&#160;error&#160;for&#160;all&#160;erroneously&#160;terminated&#160;connections,&#160;filters&#160;<br/>with the&#160;following&#160;parameters&#160;have to&#160;be&#160;configured&#160;in the&#160;DET&#160;module:&#160;<br/>
<b>&gt;&#160;&#160;</b>moduleId&#160;&#160;&#160;=&#160;0x23&#160;<br/>
<b>&gt;&#160;&#160;</b>instanceId&#160;&#160;=&#160;0x00&#160;&#160;&#160;<br/>
<b>&gt;&#160;&#160;</b>apiId&#160;&#160;&#160;&#160;&#160;&#160;&#160;=&#160;0x34&#160;and 0x35&#160;<br/>
<b>&gt;&#160;&#160;</b>errorId&#160;&#160;&#160;&#160;&#160;=&#160;0xFF&#160;&#160;<br/>Please note&#160;that&#160;the&#160;filtering&#160;mechanism&#160;is&#160;a&#160;Vector&#160;specific&#160;feature,&#160;which&#160;is&#160;described&#160;<br/>in more&#160;detail&#160;in&#160;the&#160;Vector&#160;DET&#160;Technical&#160;Reference.&#160;<br/>When using&#160;other&#160;DET&#160;implementations,&#160;these errors&#160;can&#160;be&#160;filtered&#160;in a&#160;DET&#160;callout&#160;<br/>which abandons&#160;further&#160;DET&#160;processing&#160;and&#160;continues the&#160;CanTp&#160;code.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;3.00.01&#160;<br/>
27&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.7.1&#160;<br/>
<hr/>
<a name=28></a><img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/CanTp/doc/TechnicalReference_CanTp-28_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;CAN&#160;Transport Layer&#160;<br/>
<b>3.6.1.1&#160;</b><br/>
<b>Parameter&#160;Checking&#160;</b><br/>
AUTOSAR&#160;requires&#160;that&#160;API&#160;functions&#160;check the&#160;validity&#160;of&#160;their&#160;parameters.&#160;The&#160;checks&#160;in&#160;<br/><a href="TechnicalReference_CanTps.html#28">Table&#160;&#160;3-7&#160;&#160;</a>are&#160;&#160;internal&#160;&#160;parameter&#160;&#160;checks&#160;&#160;of&#160;&#160;the&#160;&#160;API&#160;&#160;functions.&#160;&#160;These&#160;&#160;checks&#160;&#160;are&#160;&#160;for&#160;<br/>development&#160;&#160;error&#160;&#160;reporting&#160;&#160;and&#160;&#160;can&#160;&#160;be&#160;&#160;en-/disabled&#160;&#160;via&#160;&#160;the&#160;&#160;configuration&#160;&#160;parameter&#160;<br/>CanTp_DEV_ERROR_DETECT.&#160;<br/>
The&#160;&#160;following&#160;&#160;table&#160;&#160;shows&#160;&#160;the&#160;&#160;parameter&#160;&#160;checks&#160;&#160;performed&#160;&#160;by&#160;&#160;the&#160;&#160;CanTp&#160;&#160;services.&#160;&#160;For&#160;<br/>parameter&#160;checks&#160;marked&#160;with&#160;an&#160;asterisk&#160;(*),&#160;only&#160;the&#160;error&#160;reporting&#160;can&#160;be&#160;deactivated.&#160;<br/>The&#160;check will&#160;also&#160;be&#160;performed&#160;if&#160;development&#160;error reporting&#160;is disabled.&#160;<br/>
<b>Check&#160;</b><br/>
tr&#160;<br/>
&#160;<br/>
d&#160;I<br/>
d&#160;I<br/>
d&#160;I<br/>
d&#160;<br/>
uP<br/>
I<br/>
d<br/>
&#160;<br/>
&#160;<br/>
du<br/>
du<br/>
S<br/>
du<br/>
P<br/>
S<br/>
P<br/>
du<br/>
nfoI<br/>
&#160;<br/>
P<br/>
Rx<br/>p<br/>T<br/>
oni<br/>
<b>Service</b><br/>
fTx<br/>
a&#160;<br/>
<b>&#160;</b><br/>
&#160;<br/>
&#160;<br/>
alv<br/>
ers<br/>
CanTpRx<br/>
CanTpTx<br/>
CanTpRx<br/>
CanI<br/>
pCan<br/>
pDat<br/>
Pid<br/>
P<br/>
pV<br/>
CanTp_RxIndication&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
CanTp_CancelReceive&#160;<br/>
*&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
CanTp_ChangeParameter&#160;<br/>
*&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
*&#160;<br/>
*&#160;<br/>
&#160;<br/>
CanTp_ReadParameter&#160;<br/>
*&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
*&#160;<br/>
*&#160;<br/>
&#160;<br/>
CanTp_Transmit&#160;<br/>
&#160;<br/>
*&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
CanTp_CancelTransmit&#160;<br/>
&#160;<br/>
*&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
CanTp_TxConfirmation&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
CanTp_GetVersionInfo&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
CanTp_StopSeparationTime&#160;<br/>
&#160;<br/>
*&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
Table&#160;3-7&#160;&#160;&#160;Development&#160;Error&#160;Reporting:&#160;Assignment&#160;of&#160;checks&#160;to&#160;services&#160;<br/>
&#160;<br/>
<b>3.6.2&#160;</b><br/>
<b>Production Code&#160;Error Reporting&#160;</b><br/>
In&#160;AR4,&#160;the&#160;CanTp&#160;reports no&#160;production&#160;errors to&#160;the&#160;Diagnostic Event&#160;Manager.&#160;<br/>
&#160;<br/>
&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;3.00.01&#160;<br/>
28&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.7.1&#160;<br/>
<hr/>
<a name=29></a><img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/CanTp/doc/TechnicalReference_CanTp-29_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;CAN&#160;Transport Layer&#160;<br/>
<b>3.7&#160;</b><br/>
<b>Channel&#160;Mode&#160;</b><br/>
In&#160;the&#160;configuration&#160;tool,&#160;two&#160;connections&#160;can&#160;be&#160;grouped&#160;to&#160;one&#160;logical&#160;channel&#160;(see&#160;also&#160;<br/><a href="TechnicalReference_CanTps.html#22">3.2.2).&#160;</a>&#160;<br/>For each&#160;of&#160;these&#160;logical channels it can&#160;be&#160;configured&#160;if&#160;the&#160;channel is half&#160;or&#160;full&#160;duplex.&#160;<br/>
<b>&gt;&#160;&#160;</b>Half&#160;Duplex:&#160;only&#160;the&#160;Rx&#160;or the&#160;Tx&#160;N-SDU&#160;of&#160;a&#160;channel can&#160;be&#160;active&#160;at&#160;a&#160;time.&#160;A&#160;<br/>
connection&#160;which&#160;is started&#160;while&#160;the&#160;opposite&#160;direction&#160;is being&#160;processed&#160;will be&#160;<br/>rejected.&#160;<br/>
<b>&gt;&#160;&#160;</b>Full Duplex:&#160;&#160;bidirectional communication&#160;is&#160;possible&#160;at&#160;any&#160;time.&#160;<br/>
When&#160;only&#160;one&#160;N-SDU&#160;is&#160;configured&#160;for&#160;a&#160;channel,&#160;the&#160;channel&#160;mode&#160;parameter&#160;has&#160;no&#160;<br/>effect.&#160;<br/>
&#160;<br/>
<b>3.8&#160;</b><br/>
<b>Connection Channels&#160;</b><br/>
A&#160;&#160;connection&#160;&#160;channel&#160;&#160;represents&#160;&#160;an&#160;&#160;internal&#160;&#160;path&#160;&#160;for&#160;&#160;transmission&#160;&#160;or&#160;&#160;reception&#160;&#160;of&#160;&#160;an&#160;&#160;N-<br/>SDU&#160;&#160;during&#160;&#160;runtime.&#160;&#160;It&#160;&#160;uses&#160;&#160;its&#160;&#160;own&#160;&#160;resources&#160;&#160;such&#160;&#160;as&#160;&#160;internal&#160;&#160;buffer,&#160;&#160;timer&#160;&#160;or&#160;&#160;state&#160;<br/>machine.&#160;&#160;Therefore,&#160;&#160;each&#160;&#160;connection&#160;&#160;channel&#160;&#160;is&#160;&#160;independent&#160;&#160;from&#160;&#160;the&#160;&#160;others.&#160;&#160;The&#160;<br/>connection&#160;channels&#160;are only&#160;for&#160;CanTp&#160;internal use&#160;and&#160;not&#160;accessible&#160;externally.&#160;&#160;<br/>By&#160;default,&#160;each&#160;N-SDU&#160;is&#160;statically&#160;linked&#160;to&#160;one&#160;connection&#160;channel&#160;(exception:&#160;dynamic&#160;<br/>channel assignment&#160;is&#160;used;&#160;see<a href="TechnicalReference_CanTps.html#16">&#160;3.1.2.5)</a>.&#160;<br/>
&#160;<br/>
The&#160;&#160;CanTp&#160;&#160;is&#160;&#160;able&#160;&#160;to&#160;&#160;manage&#160;&#160;several&#160;&#160;connections&#160;&#160;for&#160;&#160;different&#160;&#160;N-SDUs&#160;&#160;simultaneously.&#160;<br/>However&#160;it&#160;is&#160;not&#160;possible&#160;to&#160;handle&#160;two&#160;receptions&#160;or&#160;two&#160;transmissions&#160;with&#160;the&#160;same&#160;N-<br/>SDU&#160;identifier in&#160;parallel.&#160;<br/>If&#160;a&#160;new&#160;FF&#160;/&#160;SF&#160;is&#160;received&#160;for&#160;an&#160;already&#160;active&#160;N-SDU,&#160;the&#160;connection&#160;is&#160;terminated&#160;and&#160;<br/>restarted.&#160;<br/>If&#160;a&#160;new&#160;transmission&#160;request&#160;is started&#160;for an&#160;already&#160;active&#160;N-SDU,&#160;the&#160;request&#160;is&#160;<br/>rejected.&#160;If&#160;it&#160;is&#160;required&#160;to&#160;start&#160;a&#160;new&#160;transmission&#160;before the&#160;previous one&#160;is&#160;finished,&#160;the&#160;<br/>active&#160;connection&#160;must&#160;first&#160;be&#160;terminated&#160;by&#160;using&#160;the&#160;transmit cancellation&#160;function&#160;(see&#160;<br/><a href="TechnicalReference_CanTps.html#44">5.1.10&#160;CanTp_CancelTransmit())</a>.&#160;<br/>&#160;<br/>
<b>&#160;</b><br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;3.00.01&#160;<br/>
29&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.7.1&#160;<br/>
<hr/>
<a name=30></a><img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/CanTp/doc/TechnicalReference_CanTp-30_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;CAN&#160;Transport Layer&#160;<br/>
<b>3.9&#160;</b><br/>
<b>Connection Timings&#160;</b><br/>
<b>3.9.1&#160;</b><br/>
<b>Timing Parameters&#160;</b><br/>
The&#160;ISO&#160;specifies&#160;several protocol timing&#160;parameters&#160;for receiver and&#160;transmitter side.&#160;The&#160;<br/>following&#160;figure shall&#160;give&#160;an&#160;overview&#160;which&#160;timeouts&#160;exist&#160;and&#160;when&#160;they&#160;are applied.&#160;<br/>
&#160;<br/>
Figure&#160;3-6&#160;&#160;Connection&#160;Timing&#160;<br/>
<b>Timeout&#160;</b><br/>
<b>Description&#160;</b><br/>
Transmission&#160;<br/>N_As&#160;<br/>
Timeout&#160;when waiting&#160;for&#160;the&#160;TxConfirmation of&#160;a&#160;transmitted&#160;SF,&#160;FF,&#160;or&#160;CF&#160;<br/>
N_Bs&#160;<br/>
Timeout&#160;when waiting&#160;for&#160;a&#160;Flow&#160;Control&#160;<br/>
N_Cs&#160;<br/>
Time&#160;until&#160;next&#160;CF has&#160;to&#160;be&#160;transmitted,&#160;or&#160;timeout&#160;when waiting&#160;a buffer&#160;<br/>
Reception&#160;<br/>N_Ar&#160;<br/>
Timeout&#160;when waiting&#160;for&#160;the&#160;TxConfirmation of&#160;a&#160;transmitted&#160;FC&#160;<br/>
N_Br&#160;<br/>
Time before&#160;the&#160;transmission&#160;of&#160;the&#160;next&#160;FC&#160;(see<a href="TechnicalReference_CanTps.html#32">&#160;3.9.2.3)&#160;</a>&#160;<br/>or&#160;Timeout&#160;when waiting&#160;after&#160;SF&#160;reception&#160;for&#160;a&#160;buffer&#160;<br/>
N_Cr&#160;<br/>
Timeout&#160;when waiting&#160;for&#160;next&#160;CF&#160;<br/>
Table&#160;3-8&#160;&#160;&#160;Connection&#160;Timing&#160;Parameters&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;3.00.01&#160;<br/>
30&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.7.1&#160;<br/>
<hr/>
<a name=31></a><img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/CanTp/doc/TechnicalReference_CanTp-31_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/CanTp/doc/TechnicalReference_CanTp-31_2.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;CAN&#160;Transport Layer&#160;<br/>
<b>3.9.2&#160;</b><br/>
<b>Timing Considerations&#160;and Jitter&#160;</b><br/>
<b>3.9.2.1&#160;</b><br/>
<b>Jitter&#160;</b><br/>
The&#160;&#160;time&#160;&#160;base&#160;&#160;for&#160;&#160;all&#160;&#160;timeout&#160;&#160;parameters&#160;&#160;is&#160;&#160;the&#160;&#160;main&#160;&#160;function&#160;&#160;period&#160;&#160;of&#160;&#160;the&#160;&#160;CanTp.&#160;<br/>Because&#160;the&#160;starting&#160;point&#160;of&#160;each&#160;timeout&#160;&#160;may&#160;be&#160;located&#160;&#160;sometime&#160;&#160;between&#160;two&#160;main&#160;<br/>function&#160;calls,&#160;a&#160;jitter&#160;of&#160;up&#160;to&#160;one&#160;task cycle&#160;can&#160;occur and&#160;must&#160;be&#160;taken&#160;into&#160;account.&#160;<br/>The&#160;CanTp&#160;tries&#160;to&#160;compensate&#160;this&#160;by&#160;adding&#160;one&#160;task&#160;cycle&#160;to&#160;the&#160;configured&#160;timings,&#160;so&#160;<br/>the&#160;observed&#160;timings can&#160;be&#160;longer,&#160;but&#160;will never be&#160;shorter than&#160;configured.&#160;&#160;<br/>
&#160;<br/>
<b>3.9.2.2&#160;</b><br/>
<b>Separation Time&#160;</b><br/>
ISO&#160;&#160;15765-2&#160;&#160;specifies&#160;&#160;two&#160;&#160;timing&#160;&#160;parameters&#160;&#160;which&#160;&#160;determine&#160;&#160;the&#160;&#160;time&#160;&#160;between&#160;&#160;the&#160;<br/>transmissions&#160;of&#160;two&#160;consecutive&#160;frames.&#160;&#160;<br/><b>STmin</b>&#160;is&#160;the&#160;minimum&#160;separation&#160;time,&#160;which&#160;is&#160;provided&#160;by&#160;the&#160;receiver.&#160;If&#160;the&#160;transmitter&#160;<br/>sends&#160;&#160;the&#160;&#160;CFs&#160;&#160;faster&#160;&#160;than&#160;&#160;requested,&#160;&#160;there&#160;&#160;is&#160;&#160;no&#160;&#160;guarantee&#160;&#160;that&#160;&#160;the&#160;&#160;receiver&#160;&#160;of&#160;&#160;the&#160;<br/>segmented&#160;&#160;data&#160;&#160;transmission&#160;&#160;will&#160;&#160;correctly&#160;&#160;receive&#160;&#160;and&#160;&#160;process&#160;&#160;all&#160;&#160;frames.&#160;&#160;Another&#160;<br/>purpose&#160;of&#160;STmin&#160;is to&#160;reduce&#160;the&#160;bus load&#160;produced&#160;by&#160;CanTp&#160;communication.&#160;<br/><b>N_Cs</b>&#160;is&#160;the&#160;maximum&#160;separation&#160;time,&#160;after&#160;which&#160;the&#160;transmission&#160;of&#160;the&#160;next&#160;CF&#160;has&#160;to&#160;<br/>be&#160;started.&#160;If&#160;the&#160;delay&#160;is longer than&#160;N_Cs, the&#160;receiver side&#160;may&#160;detect&#160;an&#160;N_Cr&#160;timeout.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Caution&#160;<br/></b>In case&#160;of&#160;a&#160;conflict&#160;between the&#160;configured&#160;N_Cs&#160;and&#160;the&#160;requested&#160;STmin&#160;(N_Cs&#160;&lt;&#160;<br/>
<b>&#160;&#160;</b>STmin),&#160;the&#160;CanTp will&#160;transmit&#160;the&#160;next&#160;CF after&#160;the&#160;end&#160;of&#160;N_Cs&#160;and&#160;therefore violate&#160;<br/>
STmin.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
&#160;<br/>
Basically,&#160;for STmin&#160;the&#160;same&#160;provisions regarding&#160;jitter are&#160;made&#160;as&#160;for all&#160;other timings&#160;<br/>(see<a href="TechnicalReference_CanTps.html#31">&#160;3.9.2.1). Ho</a>wever,&#160;some&#160;STmin&#160;specific&#160;characteristics apply&#160;here:&#160;<br/>
<b>&gt;&#160;&#160;</b>in&#160;burst&#160;mode&#160;(STmin&#160;=&#160;0) the&#160;CFs&#160;are sent&#160;as&#160;fast&#160;as&#160;possible,&#160;i.e.&#160;from&#160;the&#160;context&#160;of&#160;<br/>
the&#160;TxConfirmaton&#160;of&#160;the&#160;previous CF.&#160;The&#160;observed&#160;separation&#160;time&#160;then&#160;only&#160;<br/>depends&#160;on&#160;the&#160;bus&#160;load.&#160;<br/>
<b>&gt;&#160;&#160;</b>when&#160;a&#160;microsecond&#160;STmin&#160;is requested&#160;(0xF1…0xF9) the&#160;CF is always sent&#160;on&#160;the&#160;<br/>
next&#160;task.&#160;No&#160;additional task cycle&#160;is added.&#160;Therefore&#160;if&#160;the&#160;bus load&#160;is&#160;very&#160;high&#160;and&#160;<br/>the&#160;TxConfirmation&#160;is&#160;delayed&#160;too&#160;long,&#160;the&#160;observed&#160;separation&#160;time&#160;might&#160;<br/>sporadically&#160;be&#160;above&#160;the&#160;given&#160;value.&#160;<br/>
<b>&gt;&#160;&#160;</b>when&#160;STmin&#160;supervision&#160;is done&#160;not&#160;internally&#160;but&#160;by&#160;the&#160;application&#160;(see<a href="TechnicalReference_CanTps.html#21">&#160;3.1.2.11),&#160;</a><br/>
the&#160;CanTp&#160;only&#160;transmits&#160;the&#160;CF&#160;by&#160;itself&#160;in&#160;case&#160;N_Cs expires.&#160;<br/>
&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;3.00.01&#160;<br/>
31&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.7.1&#160;<br/>
<hr/>
<a name=32></a><img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/CanTp/doc/TechnicalReference_CanTp-32_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/CanTp/doc/TechnicalReference_CanTp-32_2.png"/><br/>
<img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/CanTp/doc/TechnicalReference_CanTp-32_3.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;CAN&#160;Transport Layer&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>FAQ:&#160;Why&#160;is the&#160;observed&#160;STmin so&#160;much&#160;longer&#160;than&#160;the&#160;requested STmin?&#160;</b><br/>
&#160;&#160;Because&#160;of&#160;the&#160;jitter,&#160;the&#160;CanTp&#160;always&#160;adds one&#160;task&#160;cycle to&#160;the&#160;requested&#160;STmin&#160;in&#160;<br/>
order&#160;to&#160;guarantee&#160;that&#160;the&#160;time&#160;between two CFs&#160;is&#160;never&#160;below&#160;STmin.&#160;When&#160;the&#160;<br/>task&#160;cycle time is&#160;higher&#160;than STmin,&#160;this&#160;may&#160;lead to&#160;unexpected&#160;high separation&#160;<br/>times&#160;(see<a href="TechnicalReference_CanTps.html#32">&#160;Table&#160;3-9).</a>&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
&#160;<br/>
<b>Requested STmin&#160;&#160;Observed&#160;ST&#160;(5ms&#160;cyle&#160;time)&#160;</b><br/>
<b>Observed&#160;ST&#160;(10ms&#160;cyle time)&#160;</b><br/>
0ms&#160;(burst)&#160;<br/>
as&#160;fast&#160;as&#160;possible&#160;&#160;<br/>
as&#160;fast&#160;as&#160;possible&#160;<br/>
100µs&#160;<br/>
&lt;&#160;5ms&#160;<br/>
&lt;&#160;10ms&#160;<br/>
1ms&#160;<br/>
5…10ms&#160;<br/>
10…20ms&#160;<br/>
5ms&#160;<br/>
5…10ms&#160;<br/>
10…20ms&#160;<br/>
6ms&#160;<br/>
10…15ms&#160;<br/>
10…20ms&#160;<br/>
10ms&#160;<br/>
10…15ms&#160;<br/>
10…20ms&#160;<br/>
11ms&#160;<br/>
15…20ms&#160;<br/>
20…30ms&#160;<br/>
Table&#160;3-9&#160;&#160;&#160;Examples&#160;for&#160;requested&#160;and&#160;observed&#160;separation&#160;times&#160;<br/>
<b>3.9.2.3&#160;</b><br/>
<b>Implementation of&#160;N_Br&#160;</b><br/>
The&#160;ISO&#160;157675-2&#160;defines the&#160;parameter N_Br as&#160;follows:&#160;&#160;<br/>
<i>N_Br:&#160;Time&#160;until transmission&#160;of&#160;the&#160;next&#160;Flow&#160;Control&#160;N_PDU&#160;</i><br/>
Since&#160;N_Br&#160;is&#160;only&#160;a&#160;performance&#160;parameter&#160;and&#160;no&#160;timeout&#160;that&#160;must&#160;be&#160;applied&#160;in&#160;case&#160;<br/>of&#160;erroneous behavior,&#160;it&#160;can&#160;be&#160;seen&#160;as&#160;the&#160;maximum&#160;time&#160;after&#160;which&#160;a&#160;Flow&#160;Control&#160;has&#160;<br/>to&#160;&#160;be&#160;&#160;transmitted.&#160;&#160;Considering&#160;&#160;this,&#160;&#160;the&#160;&#160;following&#160;&#160;behavior&#160;&#160;has&#160;&#160;been&#160;&#160;implemented&#160;&#160;in&#160;&#160;the&#160;<br/>CanTp:&#160;<br/>
<b>&gt;&#160;&#160;</b>After the&#160;reception&#160;of&#160;a&#160;First&#160;Frame,&#160;the&#160;first&#160;Flow&#160;Control is&#160;transmitted&#160;immediately&#160;<br/>
(N_Br =&#160;0ms).&#160;<br/>
<b>&gt;&#160;&#160;</b>After the&#160;reception&#160;of&#160;the&#160;last&#160;Consecutive&#160;Frame&#160;in&#160;a&#160;block,&#160;the&#160;next&#160;Flow&#160;Control is&#160;<br/>
transmitted&#160;immediately&#160;(N_Br =&#160;0ms).&#160;<br/>
<b>&gt;&#160;&#160;</b>After&#160;FC.WAIT,&#160;the&#160;subsequent&#160;FC.CTS&#160;is&#160;transmitted&#160;as soon&#160;as sufficient&#160;buffer is&#160;<br/>
provided.&#160;If&#160;no&#160;buffer is provided,&#160;the&#160;next&#160;FC.WAIT&#160;is transmitted&#160;after N_Br.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Note&#160;<br/></b>The&#160;flow&#160;status&#160;(CTS,&#160;WAIT,&#160;OVFL)&#160;depends&#160;on&#160;the&#160;result&#160;of&#160;the&#160;buffer&#160;provision.&#160;&#160;<br/>
&#160;&#160;FC.WAIT&#160;is&#160;sent&#160;if&#160;the&#160;buffer&#160;is&#160;temporarily&#160;unavailable or&#160;too&#160;small.&#160;In&#160;this&#160;case&#160;the&#160;<br/>
receiver&#160;will&#160;continue to&#160;send FC.WAIT&#160;until&#160;the&#160;buffer&#160;status&#160;changes&#160;or&#160;the&#160;maximum&#160;<br/>number&#160;of&#160;wait&#160;frames&#160;(configuration parameter&#160;WFTmax)&#160;is&#160;reached.&#160;<br/>
&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;3.00.01&#160;<br/>
32&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.7.1&#160;<br/>
<hr/>
<a name=33></a><img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/CanTp/doc/TechnicalReference_CanTp-33_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;CAN&#160;Transport Layer&#160;<br/>
<b>4&#160;&#160;Integration&#160;</b><br/>
This&#160;chapter&#160;gives&#160;necessary&#160;information&#160;for&#160;the&#160;integration&#160;of&#160;the&#160;MICROSAR&#160;CanTp&#160;into&#160;<br/>an&#160;application&#160;environment&#160;of&#160;an&#160;ECU.&#160;<br/>
<b>4.1&#160;</b><br/>
<b>Scope&#160;of&#160;Delivery&#160;</b><br/>
The&#160;delivery&#160;of&#160;the&#160;CanTp&#160;contains&#160;the&#160;files&#160;which&#160;are&#160;described&#160;in&#160;the&#160;chapte<a href="TechnicalReference_CanTps.html#33">rs&#160;4.1.1&#160;</a>and&#160;<br/><a href="TechnicalReference_CanTps.html#33">4.1.2:</a>&#160;<br/>
<b>4.1.1&#160;</b><br/>
<b>Static&#160;Files&#160;</b><br/>
<b>File&#160;Name&#160;</b><br/>
<b>Source&#160;</b><br/>
<b>Object&#160;</b><br/>
<b>Description&#160;</b><br/>
<b>Code&#160;</b><br/>
<b>Code&#160;</b><br/>
<b>Delivery&#160;</b><br/>
<b>Delivery&#160;</b><br/>
CanTp.c&#160;<br/>
&#160;<br/>
&#160;<br/>
Source file of&#160;the&#160;CanTp&#160;<br/>
CanTp.h&#160;<br/>
&#160;<br/>
&#160;<br/>
Header file&#160;of&#160;the&#160;CanTp&#160;<br/>
CanTp_Cbk.h&#160;<br/>
&#160;<br/>
&#160;<br/>
Header file&#160;with&#160;CanTp&#160;callback&#160;function&#160;prototypes&#160;<br/>
CanTp_Types.h&#160;<br/>
&#160;<br/>
&#160;<br/>
Header file&#160;with&#160;global&#160;CanTp&#160;type&#160;definitions.&#160;<br/>
CanTp_Priv.h&#160;<br/>
&#160;<br/>
&#160;<br/>
Header file&#160;with&#160;internal&#160;CanTp&#160;definitions.&#160;<br/>
CanTp.lib&#160;<br/>
&#160;<br/>
&#160;<br/>
Library&#160;of&#160;the&#160;CanTp&#160;<br/>
Table&#160;4-1&#160;&#160;&#160;Static&#160;files&#160;<br/>
&#160;<br/>&#160;<br/>
<b>4.1.2&#160;</b><br/>
<b>Dynamic&#160;Files&#160;</b><br/>
The&#160;dynamic&#160;files are&#160;generated&#160;by&#160;the&#160;configuration.&#160;<br/>
<b>File&#160;Name&#160;</b><br/>
<b>Description&#160;</b><br/>
CanTp_Cfg.h&#160;<br/>
This&#160;is&#160;the&#160;generated&#160;header&#160;file of&#160;CanTp&#160;containing&#160;pre-compile switches&#160;<br/>and providing&#160;symbolic&#160;defines.&#160;<br/>
CanTp_Cfg.c&#160;<br/>
This&#160;is&#160;the&#160;generated&#160;source&#160;file&#160;of&#160;CanTp&#160;containing&#160;pre-compile-time&#160;<br/>configurable parameters&#160;<br/>
CanTp_Lcfg.h&#160;<br/>
This&#160;is&#160;the&#160;generated&#160;header&#160;file of&#160;CanTp&#160;containing&#160;link-time&#160;configurable&#160;<br/>symbols&#160;<br/>
CanTp_Lcfg.c&#160;<br/>
This&#160;is&#160;the&#160;generated&#160;source&#160;file&#160;of&#160;CanTp&#160;containing&#160;link-time&#160;configurable&#160;<br/>parameters&#160;<br/>
CanTp_PBcfg.c&#160;<br/>
This&#160;is&#160;the&#160;generated&#160;source&#160;file&#160;of&#160;CanTp&#160;containing&#160;post-build-time&#160;<br/>configurable parameters&#160;<br/>
CanTp_PBcfg.c&#160;<br/>
This&#160;is&#160;the&#160;generated&#160;source&#160;file&#160;of&#160;CanTp&#160;containing&#160;post-build-time&#160;<br/>configurable parameters&#160;<br/>
Table&#160;4-2&#160;&#160;&#160;Generated&#160;files&#160;<br/>
&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;3.00.01&#160;<br/>
33&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.7.1&#160;<br/>
<hr/>
<a name=34></a><img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/CanTp/doc/TechnicalReference_CanTp-34_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/CanTp/doc/TechnicalReference_CanTp-34_2.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;CAN&#160;Transport Layer&#160;<br/>
<b>4.2&#160;</b><br/>
<b>Include&#160;Structure&#160;</b><br/>
MemMap.h<br/>
CANTP<br/>
«include»<br/>
SchM_CanTp.h<br/>
CanTp_Priv.h<br/>
«include»<br/>
«include»<br/>
CanTp.c<br/>
«include»<br/>
«include»<br/>
CanIf.h<br/>
CanTp_Cbk.h<br/>
«include»<br/>
«include»<br/>
PduR_CanTp.h<br/>
«include»<br/>
«include»<br/>
CanTp_Lcfg.c<br/>
CanTp_Lcfg.h<br/>
«include»<br/>
EcuM_Error.h<br/>
«include»<br/>
«include»<br/>
CanTp_PBcfg.c<br/>
CanTp_PBcfg.h<br/>
CanTp.h<br/>
Det.h<br/>
«include»<br/>
«include»<br/>
«include»<br/>
«include»<br/>
CanTp_Cfg.c<br/>
CanTp_Cfg.h<br/>
CanTp_Types.h<br/>
«include»<br/>
«include»<br/>
«include»<br/>
«include»<br/>
ComStackTypes.h<br/>
&#160;&#160;<br/>
Figure&#160;4-1&#160;&#160;Include&#160;structure&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Note&#160;<br/></b>The&#160;only&#160;files&#160;that&#160;need&#160;to be&#160;included&#160;by&#160;other&#160;modules and software&#160;components&#160;are&#160;<br/>
&#160;&#160;CanTp.h&#160;and&#160;CanTp_Cbk.h.&#160;These&#160;files contain all&#160;definitions&#160;and&#160;inclusions&#160;required&#160;<br/>
to use&#160;the&#160;CanTp.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
&#160;<br/>
<b>&#160;</b><br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;3.00.01&#160;<br/>
34&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.7.1&#160;<br/>
<hr/>
<a name=35></a><img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/CanTp/doc/TechnicalReference_CanTp-35_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;CAN&#160;Transport Layer&#160;<br/>
<b>4.3&#160;</b><br/>
<b>Compiler&#160;Abstraction and Memory&#160;Mapping&#160;&#160;</b><br/>
The&#160;&#160;objects&#160;&#160;(e.g.&#160;&#160;variables,&#160;&#160;functions,&#160;&#160;constants)&#160;&#160;are&#160;&#160;declared&#160;&#160;by&#160;&#160;compiler&#160;&#160;independent&#160;<br/>definitions&#160;&#160;–&#160;&#160;the&#160;&#160;compiler&#160;&#160;abstraction&#160;&#160;definitions.&#160;&#160;Each&#160;&#160;compiler&#160;&#160;abstraction&#160;&#160;definition&#160;&#160;is&#160;<br/>assigned&#160;to&#160;a&#160;memory&#160;section.&#160;<br/>The&#160;&#160;following&#160;&#160;table&#160;&#160;contains&#160;&#160;the&#160;&#160;memory&#160;&#160;section&#160;&#160;names&#160;&#160;and&#160;&#160;the&#160;&#160;compiler&#160;&#160;abstraction&#160;<br/>definitions of&#160;the&#160;CanTp&#160;and&#160;illustrates their&#160;assignment&#160;among&#160;each&#160;other.&#160;<br/>
<b>Compiler&#160;Abstraction&#160;</b><br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
<b>Definitions&#160;</b><br/>
A<br/>
G<br/>
T<br/>A<br/>
INIT<br/>
&#160;<br/>
CF<br/>
<b>&#160;</b><br/>
&#160;<br/>
&#160;<br/>
D<br/>
NIT<br/>
B<br/>
E<br/>
NO<br/>
G<br/>
P<br/>
&#160;<br/>
D<br/>
L_<br/>P<br/>
R_<br/>
R_I<br/>
CF<br/>
R_<br/>
P<br/>
B<br/>
&#160;<br/>
A<br/>
A<br/>
A<br/>
_CO<br/>
_A<br/>
_V<br/>
_V<br/>
_P<br/>
_V<br/>
<b>Memory&#160;Mapping&#160;</b><br/>
P<br/>
P<br/>
P<br/>
P<br/>
P<br/>
P<br/>
<b>Sections</b><br/>
NT<br/>
NT<br/>
NT<br/>
NT<br/>
NT<br/>
NT<br/>
<b>&#160;</b><br/>
CA<br/>
CA<br/>
CA<br/>
CA<br/>
CA<br/>
CA<br/>
CANTP_START_SEC_CODE&#160;<br/>
&#160;&#160;&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
CANTP_STOP_SEC_CODE&#160;<br/>
CANTP_START_SEC_VAR_NOINIT_8BIT&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
CANTP_START_SEC_VAR_NOINIT_8BIT&#160;<br/>
CANTP_START_SEC_VAR_INIT_UNSPECIFIED&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
CANTP_STOP_SEC_VAR_INIT_UNSPECIFIED&#160;<br/>
CANTP_START_SEC_PBCFG&#160;&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
CANTP_STOP_SEC_PBCFG&#160;<br/>
CANTP_START_SEC_VAR_PBCFG&#160;&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
CANTP_STOP_SEC_VAR_PBCFG&#160;<br/>
Table&#160;4-3&#160;&#160;&#160;Compiler&#160;abstraction&#160;and&#160;memory&#160;mapping&#160;<br/>
<b>4.3.1&#160;</b><br/>
<b>Memory&#160;mapping rules&#160;</b><br/>
Due&#160;&#160;to&#160;&#160;reuse&#160;&#160;of&#160;&#160;existing&#160;&#160;code,&#160;&#160;some&#160;&#160;pointers&#160;&#160;in&#160;&#160;the&#160;&#160;CanTp&#160;&#160;may&#160;&#160;point&#160;&#160;to&#160;&#160;variables&#160;&#160;of&#160;<br/>different&#160;&#160;memory&#160;&#160;classes.&#160;&#160;Therefore&#160;&#160;it&#160;&#160;must&#160;&#160;be&#160;&#160;ensured&#160;&#160;that&#160;&#160;the&#160;&#160;following&#160;&#160;compiler&#160;<br/>abstraction&#160;definitions&#160;are mapped&#160;to&#160;compatible&#160;memory&#160;sections:&#160;<br/>
<b>&gt;&#160;&#160;</b>CANTP_VAR_PBCFG&#160;and&#160;CANTP_APPL_DATA&#160;<br/>
<b>&gt;&#160;&#160;</b>CANTP_VAR_PBCFG&#160;and&#160;PDUR_APPL_DATA&#160;<br/>
&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;3.00.01&#160;<br/>
35&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.7.1&#160;<br/>
<hr/>
<a name=36></a><img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/CanTp/doc/TechnicalReference_CanTp-36_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;CAN&#160;Transport Layer&#160;<br/>
<b>4.4&#160;</b><br/>
<b>Critical&#160;Sections&#160;</b><br/>
The&#160;synchronization&#160;mechanism&#160;defined&#160;by&#160;AUTOSAR&#160;covers&#160;the&#160;entering&#160;and&#160;leaving&#160;of&#160;<br/>so&#160;&#160;called&#160;&#160;critical&#160;&#160;sections.&#160;&#160;Different&#160;&#160;critical&#160;&#160;sections&#160;&#160;can&#160;&#160;be&#160;&#160;handled&#160;&#160;by&#160;&#160;using&#160;&#160;different&#160;&#160;so&#160;<br/>called&#160;“Exclusive&#160;Areas”.&#160;<br/>
CanTp&#160;&#160;supports&#160;&#160;only&#160;&#160;one&#160;&#160;exclusive&#160;&#160;area&#160;&#160;(CANTP_EXCLUSIVE_AREA_0),&#160;&#160;which&#160;&#160;can&#160;&#160;be&#160;<br/>entered&#160;from&#160;task&#160;and&#160;interrupt&#160;level.&#160;It&#160;protects&#160;all&#160;internal&#160;state&#160;data&#160;against&#160;unintended&#160;<br/>modification&#160;due&#160;to&#160;concurrent&#160;access&#160;and&#160;is entered&#160;from&#160;the&#160;following&#160;APIs:&#160;<br/>
<b>&gt;&#160;&#160;</b>CanTp_RxIndication&#160;<br/>
<b>&gt;&#160;&#160;</b>CanTp_TxConfirmation&#160;<br/>
<b>&gt;&#160;&#160;</b>CanTp_Transmit&#160;<br/>
<b>&gt;&#160;&#160;</b>CanTp_ChangeParameter&#160;<br/>
<b>&gt;&#160;&#160;</b>CanTp_CancelReceive&#160;<br/>
<b>&gt;&#160;&#160;</b>CanTp_CancelTransmit&#160;<br/>
<b>&gt;&#160;&#160;</b>CanTp_StopSeparationTime&#160;<br/>
<b>&gt;&#160;&#160;</b>CanTp_MainFunction&#160;<br/>
The&#160;exclusive&#160;area&#160;must&#160;lock&#160;the&#160;interrupts&#160;from&#160;all&#160;bus&#160;systems&#160;which&#160;may&#160;affect&#160;CanTp&#160;<br/>operation.&#160;So&#160;while&#160;in&#160;CAN-only&#160;systems,&#160;locking&#160;the&#160;CAN&#160;interrupts&#160;is&#160;sufficent,&#160;e.g.&#160;in&#160;an&#160;<br/>ECU&#160;which&#160;does CAN-FlexRay&#160;routing,&#160;also&#160;the&#160;FlexRay&#160;interrupts&#160;have&#160;to&#160;be&#160;locked.&#160;<br/>
&#160;<br/>
<b>4.5&#160;</b><br/>
<b>Buffer&#160;Configuration&#160;</b><br/>
The&#160;&#160;CanTp&#160;&#160;is&#160;&#160;able&#160;&#160;to&#160;&#160;work&#160;&#160;with&#160;&#160;segmented&#160;&#160;reception&#160;&#160;buffers,&#160;&#160;i.e.&#160;&#160;usually&#160;&#160;it&#160;&#160;is&#160;&#160;not&#160;<br/>necessary&#160;to&#160;provide&#160;a&#160;buffer with&#160;size&#160;of&#160;the&#160;complete&#160;message&#160;to&#160;be&#160;received.&#160;<br/>Basically&#160;it&#160;is&#160;sufficient&#160;to&#160;provide&#160;a&#160;buffer&#160;which&#160;is&#160;large&#160;enough&#160;to&#160;store&#160;the&#160;payload&#160;of&#160;all&#160;<br/>CFs&#160;within&#160;a&#160;block.&#160;The&#160;CanTp&#160;will&#160;adjust&#160;the&#160;block&#160;size&#160;and&#160;flow&#160;status&#160;parameters&#160;in&#160;the&#160;<br/>FC&#160;frames&#160;according&#160;to&#160;the&#160;currently&#160;available&#160;buffer&#160;to&#160;control&#160;the&#160;reception&#160;data&#160;flow.&#160;A&#160;<br/>new&#160;buffer is&#160;requested&#160;before the&#160;start&#160;of&#160;a&#160;new&#160;block,&#160;i.e.&#160;when&#160;an&#160;FC.CTS&#160;is sent.&#160;<br/>However,&#160;some&#160;configuration&#160;options&#160;limit&#160;the&#160;reception&#160;control&#160;capabilities&#160;of&#160;the&#160;CanTp.&#160;<br/>This&#160;must&#160;be&#160;taken&#160;into&#160;account&#160;&#160;during&#160;configuration&#160;of&#160;&#160;the&#160;buffer&#160;size&#160;in&#160;&#160;an&#160;upper&#160;layer&#160;<br/>module&#160;(e.g.&#160;in&#160;the&#160;PduR&#160;when&#160;using&#160;high&#160;level routing).&#160;<br/>
&#160;<br/>
<b>4.5.1&#160;</b><br/>
<b>Constant Block&#160;Size&#160;</b><br/>
If&#160;the&#160;&#160;CanTp&#160;&#160;is&#160;not&#160;allowed&#160;to&#160;change&#160;the&#160;block&#160;size&#160;during&#160;reception&#160;(see&#160;also<a href="TechnicalReference_CanTps.html#16">&#160;3.1.2.4),</a>&#160;<br/>the&#160;buffer&#160;size&#160;which&#160;is&#160;reported&#160;to&#160;the&#160;CanTp&#160;upon&#160;request&#160;at&#160;the&#160;end&#160;of&#160;a&#160;block&#160;should&#160;<br/>also&#160;&#160;not&#160;&#160;change&#160;&#160;after&#160;&#160;the&#160;&#160;first&#160;&#160;FC.CTS&#160;&#160;has&#160;&#160;been&#160;&#160;transmitted.&#160;&#160;Otherwise&#160;&#160;the&#160;&#160;CanTp&#160;&#160;will&#160;<br/>transmit&#160;&#160;an&#160;&#160;FC.WAIT&#160;&#160;until&#160;&#160;enough&#160;&#160;buffer&#160;&#160;is&#160;&#160;available,&#160;&#160;which&#160;&#160;will&#160;&#160;unnecessarily&#160;&#160;delay&#160;&#160;the&#160;<br/>reception.&#160;<br/>
&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;3.00.01&#160;<br/>
36&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.7.1&#160;<br/>
<hr/>
<a name=37></a><img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/CanTp/doc/TechnicalReference_CanTp-37_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;CAN&#160;Transport Layer&#160;<br/>
<b>4.5.2&#160;</b><br/>
<b>Zero Block&#160;Size&#160;</b><br/>
If&#160;the&#160;Block&#160;Size&#160;is&#160;configured&#160;as&#160;zero,&#160;an&#160;FC&#160;is&#160;only&#160;allowed&#160;after&#160;FF&#160;reception.&#160;If&#160;once&#160;a&#160;<br/>FC.CTS&#160;&#160;is&#160;&#160;transmitted,&#160;&#160;the&#160;&#160;CanTp&#160;&#160;has&#160;&#160;no&#160;&#160;possibility&#160;&#160;to&#160;&#160;delay&#160;&#160;the&#160;&#160;reception&#160;&#160;if&#160;&#160;the&#160;&#160;upper&#160;<br/>layer&#160;&#160;runs&#160;&#160;out&#160;&#160;of&#160;&#160;buffer.&#160;&#160;The&#160;&#160;CanTp&#160;&#160;will&#160;&#160;try&#160;&#160;to&#160;&#160;get&#160;&#160;more&#160;&#160;buffer&#160;&#160;between&#160;&#160;two&#160;&#160;CFs&#160;&#160;while&#160;<br/>waiting&#160;for&#160;STmin,&#160;but&#160;for&#160;better&#160;robustness&#160;it&#160;is&#160;recommended&#160;to&#160;use&#160;BS&#160;=&#160;0&#160;only&#160;if&#160;a&#160;full&#160;<br/>buffer&#160;is&#160;available.&#160;Otherwise&#160;the&#160;connection&#160;will&#160;be&#160;terminated&#160;with&#160;an&#160;error&#160;if&#160;the&#160;&#160;CanTp&#160;<br/>is still&#160;waiting&#160;for&#160;a&#160;buffer when&#160;the&#160;next&#160;CF is&#160;received.&#160;<br/>
&#160;<br/>
<b>4.5.3&#160;</b><br/>
<b>Zero WFTmax&#160;&#160;</b><br/>
A&#160;WFTmax&#160;value&#160;of&#160;zero does suppress&#160;the&#160;transmission&#160;of&#160;FC.WAIT,&#160;i.e.&#160;the&#160;CanTp&#160;is not&#160;<br/>allowed&#160;&#160;to&#160;&#160;delay&#160;&#160;reception.&#160;&#160;If&#160;&#160;nevertheless&#160;&#160;a&#160;&#160;situation&#160;&#160;occurs&#160;&#160;where&#160;&#160;an&#160;&#160;FC.WAIT&#160;&#160;is&#160;<br/>needed,&#160;&#160;the&#160;&#160;connection&#160;&#160;will&#160;&#160;be&#160;&#160;terminated.&#160;&#160;Therefore,&#160;&#160;similar&#160;&#160;to&#160;&#160;the&#160;&#160;case&#160;&#160;with&#160;&#160;constant&#160;<br/>block&#160;&#160;size,&#160;&#160;it&#160;&#160;is&#160;&#160;important&#160;&#160;to&#160;&#160;provide&#160;&#160;always&#160;&#160;enough&#160;&#160;buffer&#160;&#160;for&#160;&#160;one&#160;&#160;complete&#160;&#160;block&#160;&#160;or&#160;&#160;(if&#160;<br/>block&#160;size&#160;is not&#160;constant)&#160;for&#160;at&#160;least&#160;one&#160;CF.&#160;<br/>
&#160;<br/>
<b>4.5.4&#160;</b><br/>
<b>Zero STmin&#160;</b><br/>
With&#160;&#160;a&#160;&#160;STmin&#160;&#160;of&#160;&#160;zero,&#160;&#160;each&#160;&#160;CF&#160;&#160;is&#160;&#160;transmitted&#160;&#160;immediately&#160;&#160;after&#160;&#160;the&#160;&#160;previous&#160;&#160;CF.&#160;&#160;This&#160;<br/>eliminates&#160;the&#160;possibility&#160;of&#160;a&#160;buffer&#160;request&#160;between&#160;two&#160;CFs&#160;in&#160;case&#160;of&#160;BS&#160;=&#160;0.&#160;If&#160;such&#160;a&#160;<br/>situation&#160;nevertheless&#160;occurs,&#160;the&#160;connection&#160;will&#160;be&#160;erroneously&#160;terminated&#160;on&#160;reception&#160;<br/>of&#160;the&#160;next&#160;CF.&#160;<br/>Therefore&#160;it&#160;is highly&#160;recommended&#160;to&#160;provide&#160;always&#160;a&#160;full&#160;buffer&#160;when&#160;BS&#160;=&#160;0&#160;and&#160;STmin&#160;<br/>=&#160;0&#160;are used.&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;3.00.01&#160;<br/>
37&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.7.1&#160;<br/>
<hr/>
<a name=38></a><img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/CanTp/doc/TechnicalReference_CanTp-38_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;CAN&#160;Transport Layer&#160;<br/>
<b>5&#160;&#160;API&#160;Description&#160;</b><br/>
For an&#160;interfaces overview&#160;please&#160;see<a href="TechnicalReference_CanTps.html#13">&#160;Figure&#160;2-2.</a>&#160;<br/>
&#160;<br/>
<b>5.1&#160;</b><br/>
<b>Services&#160;provided by&#160;CanTp&#160;</b><br/>
<b>5.1.1&#160;</b><br/>
<b>CanTp_InitMemory&#160;</b><br/>
<b>Prototype&#160;</b><br/>
void&#160;<b>CanTp_InitMemory</b>&#160;(&#160;void&#160;)&#160;<br/>
<b>Parameter&#160;</b><br/>
N/A&#160;<br/>
N/A&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
Void&#160;<br/>
N/A&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
Service to initialize module&#160;global&#160;variables&#160;at&#160;power up.&#160;This&#160;function&#160;initializes&#160;the variables&#160;in&#160;*_INIT_*&#160;<br/>sections&#160;and&#160;should be used in&#160;case they&#160;are not&#160;initialized&#160;by&#160;the&#160;startup&#160;code.&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>This&#160;function&#160;must be called prior&#160;to&#160;CanTp_Init&#160;<br/>
<b>&gt;&#160;&#160;</b>This&#160;function&#160;can&#160;be&#160;called&#160;from&#160;any&#160;context.&#160;<br/>
<b>&gt;&#160;&#160;</b>This&#160;function&#160;is&#160;non-reentrant.&#160;<br/>
<b>&gt;&#160;&#160;</b>This&#160;function&#160;is&#160;synchronous.&#160;<br/>
Table&#160;5-1&#160;&#160;&#160;CanTp_InitMemory&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;3.00.01&#160;<br/>
38&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.7.1&#160;<br/>
<hr/>
<a name=39></a><img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/CanTp/doc/TechnicalReference_CanTp-39_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;CAN&#160;Transport Layer&#160;<br/>
<b>5.1.2&#160;</b><br/>
<b>CanTp_Init()&#160;</b><br/>
<b>Prototype&#160;</b><br/>
void&#160;<b>CanTp_Init</b>&#160;(&#160;const&#160;CanTp_ConfigType*&#160;&#160;CfgPtr&#160;)&#160;<br/>
<b>Parameter&#160;</b><br/>
&#160;CfgPtr&#160;<br/>
Pointer&#160;to the&#160;CanTp&#160;post-build configuration&#160;data.&#160;<br/>In&#160;configurations&#160;supporting multiple&#160;variants&#160;or post-build,&#160;a&#160;#define&#160;with&#160;a&#160;<br/>config pointer for&#160;each available configuration&#160;set&#160;is&#160;generated.&#160;<br/>In&#160;simple precompile configurations, the parameter&#160;is&#160;not used&#160;by&#160;the&#160;CanTp&#160;<br/>and can be&#160;set&#160;to&#160;NULL.&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
Void&#160;<br/>
N/A&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
This&#160;function&#160;initializes&#160;the&#160;CanTp&#160;module.&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>This&#160;function&#160;can&#160;be&#160;called&#160;from&#160;any&#160;context.&#160;<br/>
<b>&gt;&#160;&#160;</b>This&#160;function&#160;is&#160;non-reentrant.&#160;<br/>
<b>&gt;&#160;&#160;</b>This&#160;function&#160;is&#160;synchronous.&#160;<br/>
Table&#160;5-2&#160;&#160;&#160;CanTp_Init()&#160;<br/>
&#160;<br/>
<b>5.1.3&#160;</b><br/>
<b>CanTp_Shutdown()&#160;</b><br/>
<b>Prototype&#160;</b><br/>
void&#160;<b>CanTp_Shutdown</b>&#160;( void )&#160;<br/>
<b>Parameter&#160;</b><br/>
N/A&#160;<br/>
N/A&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
Void&#160;<br/>
N/A&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
This&#160;function&#160;is&#160;called to&#160;shut&#160;down&#160;the&#160;CanTp&#160;module.&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>This&#160;function&#160;can&#160;be&#160;called&#160;from&#160;any&#160;context.&#160;<br/>
<b>&gt;&#160;&#160;</b>This&#160;function&#160;is&#160;non-reentrant.&#160;<br/>
<b>&gt;&#160;&#160;</b>This&#160;function&#160;is&#160;synchronous.&#160;<br/>
Table&#160;5-3&#160;&#160;&#160;CanTp_Shutdown()&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;3.00.01&#160;<br/>
39&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.7.1&#160;<br/>
<hr/>
<a name=40></a><img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/CanTp/doc/TechnicalReference_CanTp-40_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;CAN&#160;Transport Layer&#160;<br/>
<b>5.1.4&#160;</b><br/>
<b>CanTp_MainFunction()&#160;</b><br/>
<b>Prototype&#160;</b><br/>
void&#160;<b>CanTp_MainFunction</b>&#160;( void )&#160;<br/>
<b>Parameter&#160;</b><br/>
N/A&#160;<br/>
N/A&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
void&#160;<br/>
N/A&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
The&#160;main function&#160;for scheduling&#160;the&#160;CanTp.&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>This&#160;function&#160;can&#160;be&#160;called&#160;from&#160;any&#160;context.&#160;<br/>
<b>&gt;&#160;&#160;</b>This&#160;function&#160;is&#160;non-reentrant.&#160;<br/>
<b>&gt;&#160;&#160;</b>This&#160;function&#160;is&#160;synchronous.&#160;<br/>
Table&#160;5-4&#160;&#160;&#160;CanTp_MainFunction()&#160;<br/>
&#160;<br/>
<b>5.1.5&#160;</b><br/>
<b>CanTp_MainFunctionRx()&#160;</b><br/>
<b>Prototype&#160;</b><br/>
void&#160;<b>CanTp_MainFunctionRx</b>&#160;( void )&#160;<br/>
<b>Parameter&#160;</b><br/>
N/A&#160;<br/>
N/A&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
void&#160;<br/>
N/A&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
The&#160;main function&#160;for scheduling&#160;the&#160;receive channels&#160;of&#160;the&#160;CanTp.&#160;This&#160;function&#160;is&#160;only&#160;available&#160;if&#160;the&#160;<br/>split&#160;MainFunction feature&#160;is&#160;activated&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>This&#160;function&#160;can&#160;be&#160;called&#160;from&#160;any&#160;context.&#160;<br/>
<b>&gt;&#160;&#160;</b>This&#160;function&#160;is&#160;non-reentrant.&#160;<br/>
<b>&gt;&#160;&#160;</b>This&#160;function&#160;is&#160;synchronous.&#160;<br/>
<b>&gt;&#160;&#160;</b>This&#160;API&#160;is&#160;optional&#160;and&#160;can be&#160;deactivated (see<a href="TechnicalReference_CanTps.html#15">&#160;3.1.2.1)</a>&#160;<br/>
Compiler switch:&#160;CANTP_RXTX_MAINFUNCTION_API&#160;<br/>Configuration attribute:&#160;CanTpEnableSplitMainFunction&#160;<br/>
Table&#160;5-5&#160;&#160;&#160;CanTp_MainFunctionRx()&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;3.00.01&#160;<br/>
40&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.7.1&#160;<br/>
<hr/>
<a name=41></a><img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/CanTp/doc/TechnicalReference_CanTp-41_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;CAN&#160;Transport Layer&#160;<br/>
<b>5.1.6&#160;</b><br/>
<b>CanTp_MainFunctionTx()&#160;</b><br/>
<b>Prototype&#160;</b><br/>
void&#160;<b>CanTp_MainFunctionTx</b>&#160;( void )&#160;<br/>
<b>Parameter&#160;</b><br/>
N/A&#160;<br/>
N/A&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
void&#160;<br/>
N/A&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
The&#160;main function&#160;for scheduling&#160;the&#160;transmit channels&#160;of&#160;the&#160;CanTp.&#160;This&#160;function is&#160;only&#160;available&#160;if&#160;the&#160;<br/>split&#160;MainFunction feature&#160;is&#160;activated&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>This&#160;function&#160;can&#160;be&#160;called&#160;from&#160;any&#160;context.&#160;<br/>
<b>&gt;&#160;&#160;</b>This&#160;function&#160;is&#160;non-reentrant.&#160;<br/>
<b>&gt;&#160;&#160;</b>This&#160;function&#160;is&#160;synchronous.&#160;<br/>
<b>&gt;&#160;&#160;</b>This&#160;API&#160;is&#160;optional&#160;and&#160;can be&#160;deactivated (see<a href="TechnicalReference_CanTps.html#15">&#160;3.1.2.1)</a>&#160;<br/>
Compiler switch:&#160;CANTP_RXTX_MAINFUNCTION_API&#160;<br/>Configuration attribute:&#160;CanTpEnableSplitMainFunction&#160;<br/>
Table&#160;5-6&#160;&#160;&#160;CanTp_MainFunctionTx()&#160;<br/>
&#160;<br/>
<b>5.1.7&#160;</b><br/>
<b>CanTp_GetVersionInfo()&#160;</b><br/>
<b>Prototype&#160;</b><br/>
void&#160;<b>CanTp_GetVersionInfo</b>&#160;( Std_VersionInfoType* versioninfo )&#160;<br/>
<b>Parameter&#160;</b><br/>
versioninfo&#160;<br/>
reference to a&#160;variable&#160;where to store&#160;the&#160;version&#160;information&#160;of&#160;the&#160;CanTp&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
void&#160;<br/>
N/A&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
This&#160;function&#160;returns&#160;the&#160;version&#160;information&#160;of&#160;the&#160;CanTp&#160;module.&#160;<br/>The&#160;version&#160;information&#160;includes: Module&#160;Id,&#160;Vendor Id&#160;and&#160;Vendor specific&#160;version&#160;numbers. &#160;&#160;<br/>The&#160;version&#160;numbers&#160;are BCD-coded.&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>This&#160;function&#160;can&#160;be&#160;called&#160;from&#160;any&#160;context.&#160;<br/>
<b>&gt;&#160;&#160;</b>This&#160;function&#160;is&#160;reentrant.&#160;<br/>
<b>&gt;&#160;&#160;</b>This&#160;function&#160;is&#160;synchronous.&#160;<br/>
<b>&gt;&#160;&#160;</b>This&#160;API&#160;is&#160;optional&#160;and&#160;can be&#160;deactivated&#160;<br/>
Compiler switch:&#160;CANTP_VERSION_INFO_API&#160;<br/>Configuration attribute:&#160;CanTpVersionInfoApi&#160;<br/>
Table&#160;5-7&#160;&#160;&#160;CanTp_GetVersionInfo()&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;3.00.01&#160;<br/>
41&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.7.1&#160;<br/>
<hr/>
<a name=42></a><img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/CanTp/doc/TechnicalReference_CanTp-42_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;CAN&#160;Transport Layer&#160;<br/>
<b>5.1.8&#160;</b><br/>
<b>CanTp_Transmit()&#160;</b><br/>
<b>Prototype&#160;</b><br/>
Std_ReturnType&#160;<b>CanTp_Transmit</b>&#160;( PduIdType CanTpTxSduId, const PduInfoType*&#160;<br/>CanTpTxInfoPtr )&#160;<br/>
<b>Parameter&#160;</b><br/>
CanTpTxSduId&#160;<br/>
Unique&#160;CanTp&#160;identifier of&#160;the&#160;N-SDU to&#160;be&#160;transmitted.&#160;<br/>Range:&#160;0..(maximum&#160;number of&#160;Tx&#160;N-SDU IDs&#160;)&#160;-&#160;1&#160;<br/>
CanTpTxInfoPtr&#160;<br/>
This&#160;reference to a&#160;PduInfoType structure contains&#160;the&#160;length&#160;to&#160;be&#160;<br/>transmitted (SduLength)&#160;and a&#160;data&#160;pointer&#160;(SduDataPointer). Only&#160;the&#160;<br/>SduLength&#160;is&#160;used&#160;by&#160;CanTp_Transmit.&#160;The&#160;data&#160;to&#160;be&#160;transmitted is&#160;<br/>requested&#160;separately&#160;by&#160;the CanTp.&#160;Thereto&#160;the function&#160;<br/>PduR_CanTpCopyTxData&#160;is&#160;used.&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
Std_ReturnType&#160;<br/>
E_OK:&#160;The&#160;transmit request has&#160;been started successfully&#160;<br/>E_NOT_OK:&#160;The&#160;request cannot be&#160;started&#160;(e.g.&#160;a transmit request&#160;is&#160;in&#160;<br/>progress&#160;with the same N-SDU&#160;identifier)&#160;<br/>
&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
This&#160;service is&#160;used to&#160;request the transfer of&#160;segmented&#160;data.&#160;<br/>
&#160;<br/>If&#160;data&#160;length&#160;is&#160;less&#160;than&#160;7&#160;or 6, depending&#160;on&#160;the&#160;addressing&#160;format&#160;(standard,&#160;extended.&#160;mixed11), a&#160;SF&#160;<br/>N-PDU&#160;is&#160;sent. Otherwise, if&#160;data&#160;length is&#160;greater than&#160;7&#160;or 6,&#160;a&#160;multiple frame transmission&#160;session&#160;is&#160;<br/>initiated.&#160;&#160;<br/>When&#160;the transmit request&#160;has&#160;been&#160;completed,&#160;the&#160;CanTp&#160;notifies&#160;the&#160;upper layer by&#160;calling the&#160;<br/>PduR_CanTpTxConfirmation&#160;callback&#160;function. &#160;&#160;<br/>Also,&#160;if&#160;an&#160;error&#160;occurred&#160;(overflow, timeout&#160;etc.), the&#160;transmit request is&#160;aborted and&#160;the&#160;<br/>PduR_CanTpTxConfirmation&#160;callback&#160;is&#160;called&#160;with the appropriate&#160;error result&#160;value.&#160;&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>This&#160;function&#160;can&#160;be&#160;called&#160;from&#160;any&#160;context.&#160;<br/>
<b>&gt;&#160;&#160;</b>This&#160;function&#160;is&#160;reentrant.&#160;<br/>
<b>&gt;&#160;&#160;</b>This&#160;function&#160;can&#160;be&#160;configured to&#160;be&#160;synchronous&#160;or&#160;asynchronous&#160;(see<a href="TechnicalReference_CanTps.html#17">&#160;0)</a>.&#160;<br/>
Table&#160;5-8&#160;&#160;&#160;CanTp_Transmit()&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;3.00.01&#160;<br/>
42&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.7.1&#160;<br/>
<hr/>
<a name=43></a><img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/CanTp/doc/TechnicalReference_CanTp-43_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;CAN&#160;Transport Layer&#160;<br/>
<b>5.1.9&#160;</b><br/>
<b>CanTp_CancelReceive()&#160;</b><br/>
<b>Prototype&#160;</b><br/>
Std_ReturnType&#160;<b>CanTp_CancelReceive</b>&#160;( PduIdType CanTpRxSduId )&#160;<br/>
<b>Parameter&#160;</b><br/>
CanTpRxSduId&#160;<br/>
Identifier of&#160;the&#160;Rx&#160;N-SDU,&#160;for which&#160;a&#160;reception&#160;shall&#160;be&#160;cancelled.&#160;<br/>Range:&#160;0..(maximum&#160;number of&#160;Rx&#160;N-SDU IDs)&#160;-&#160;1&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
Std_ReturnType&#160;<br/>
E_OK: Cancellation&#160;request of&#160;the specified&#160;N-SDU&#160;is&#160;accepted.&#160;<br/>E_NOT_OK: Cancellation request&#160;is&#160;rejected;&#160;the&#160;reason&#160;can&#160;be&#160;that&#160;the&#160;<br/>request&#160;is&#160;issued&#160;for an N-SDU that&#160;is&#160;not&#160;segmented&#160;or that&#160;is&#160;not in the&#160;<br/>reception process.&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
This&#160;service is&#160;used to&#160;cancel&#160;the ongoing&#160;reception&#160;of&#160;an&#160;N-SDU.&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>This&#160;function&#160;can&#160;be&#160;called&#160;from&#160;any&#160;context.&#160;<br/>
<b>&gt;&#160;&#160;</b>This&#160;function&#160;is&#160;non-reentrant.&#160;<br/>
<b>&gt;&#160;&#160;</b>This&#160;function&#160;is&#160;synchronous.&#160;<br/>
<b>&gt;&#160;&#160;</b>This&#160;API&#160;is&#160;optional&#160;and&#160;can be&#160;deactivated&#160;<br/>
Compiler switch:&#160;CANTP_RC&#160;<br/>Configuration attribute:&#160;CanTpRc&#160;<br/>
Table&#160;5-9&#160;&#160;&#160;CanTp_CancelReceive()<b>&#160;</b><br/>
&#160;<br/>
<b>&#160;</b><br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;3.00.01&#160;<br/>
43&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.7.1&#160;<br/>
<hr/>
<a name=44></a><img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/CanTp/doc/TechnicalReference_CanTp-44_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;CAN&#160;Transport Layer&#160;<br/>
<b>5.1.10&#160;&#160;CanTp_CancelTransmit()&#160;</b><br/>
<b>Prototype&#160;</b><br/>
Std_ReturnType&#160;<b>CanTp_CancelTransmit</b>&#160;( PduIdType CanTpTxSduId )&#160;<br/>
<b>Parameter&#160;</b><br/>
CanTpTxSduId&#160;<br/>
Identifier of&#160;the&#160;Tx&#160;N-SDU, for which&#160;a transmission&#160;shall&#160;be&#160;cancelled.&#160;<br/>Range:&#160;0..(maximum&#160;number of&#160;Tx&#160;N-SDU IDs)&#160;-&#160;1&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
Std_ReturnType&#160;<br/>
E_OK:&#160;Cancellation&#160;request of&#160;the specified&#160;N-SDU&#160;is&#160;accepted.&#160;<br/>E_NOT_OK: Cancellation request&#160;is&#160;rejected;&#160;the&#160;reason&#160;can&#160;be&#160;that request&#160;<br/>is&#160;issued for an N-SDU that&#160;is&#160;not&#160;segmented, request&#160;is&#160;issued&#160;after the&#160;last&#160;<br/>CF&#160;has&#160;been&#160;requested&#160;for&#160;transmission&#160;or cancellation is&#160;not&#160;possible for the&#160;<br/>related N-SDU due&#160;to configuration.&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
This&#160;service is&#160;used to&#160;cancel&#160;the ongoing&#160;transmission&#160;of&#160;an&#160;N-SDU.&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>This&#160;function&#160;can&#160;be&#160;called&#160;from&#160;any&#160;context.&#160;<br/>
<b>&gt;&#160;&#160;</b>This&#160;function&#160;is&#160;non-reentrant.&#160;<br/>
<b>&gt;&#160;&#160;</b>This&#160;function&#160;is&#160;synchronous.&#160;<br/>
<b>&gt;&#160;&#160;</b>This&#160;API&#160;is&#160;optional&#160;and&#160;can be&#160;deactivated&#160;<br/>
Compiler switch:&#160;CANTP_TC&#160;<br/>Configuration attribute:&#160;CanTpTc&#160;<br/>
Table&#160;5-10&#160;&#160;&#160;CanTp_CancelTransmit()&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;3.00.01&#160;<br/>
44&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.7.1&#160;<br/>
<hr/>
<a name=45></a><img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/CanTp/doc/TechnicalReference_CanTp-45_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;CAN&#160;Transport Layer&#160;<br/>
<b>5.1.11&#160;&#160;CanTp_ChangeParameter()&#160;</b><br/>
<b>Prototype&#160;</b><br/>
Std_ReturnType&#160;<b>CanTp_ChangeParameter</b>&#160;( PduIdType id, TPParameterType parameter,&#160;<br/>uint16 value )&#160;<br/>
<b>Parameter&#160;</b><br/>
id&#160;<br/>
Identifier of&#160;the&#160;Rx&#160;N-SDU,&#160;for which&#160;a&#160;parameter&#160;shall&#160;be&#160;changed.&#160;<br/>Range:&#160;0..(maximum&#160;number of&#160;Rx&#160;N-SDU IDs)&#160;-&#160;1&#160;<br/>
parameter&#160;<br/>
Parameter&#160;type of&#160;which the value has&#160;to&#160;be changes&#160;(TP_BS&#160;or&#160;TP_STMIN).&#160;<br/>
value&#160;<br/>
The&#160;new&#160;value&#160;of&#160;the parameter.&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
Std_ReturnType&#160;<br/>
E_OK: request is&#160;accepted.&#160;<br/>E_NOT_OK: request&#160;is&#160;not&#160;accepted.&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
This&#160;service&#160;is&#160;used to&#160;request the change of&#160;reception&#160;parameters&#160;BS&#160;and&#160;STmin for a specified&#160;N-SDU.&#160;<br/>Modification of&#160;parameters&#160;is&#160;only&#160;allowed&#160;if&#160;currently&#160;no reception&#160;for the respective N-SDU&#160;is&#160;in&#160;progress.&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>This&#160;function&#160;can&#160;be&#160;called&#160;from&#160;any&#160;context.&#160;<br/>
<b>&gt;&#160;&#160;</b>This&#160;function&#160;is&#160;non-reentrant.&#160;<br/>
<b>&gt;&#160;&#160;</b>This&#160;function&#160;is&#160;synchronous.&#160;<br/>
<b>&gt;&#160;&#160;</b>This&#160;API&#160;is&#160;optional&#160;and&#160;can be&#160;deactivated&#160;<br/>
Compiler switch:&#160;CANTP_ENABLE_CHANGE_PARAM&#160;<br/>Configuration attribute:&#160;CanTpChangeParameterApi&#160;<br/>
Table&#160;5-11&#160;&#160;&#160;CanTp_ChangeParameter()&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;3.00.01&#160;<br/>
45&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.7.1&#160;<br/>
<hr/>
<a name=46></a><img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/CanTp/doc/TechnicalReference_CanTp-46_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;CAN&#160;Transport Layer&#160;<br/>
<b>5.1.12&#160;&#160;CanTp_ReadParameter()&#160;</b><br/>
<b>Prototype&#160;</b><br/>
Std_ReturnType&#160;<b>CanTp_ReadParameter</b>&#160;( PduIdType id, TPParameterType parameter,&#160;<br/>uint16* value )&#160;<br/>
<b>Parameter&#160;</b><br/>
id&#160;<br/>
Identifier of&#160;the&#160;Rx&#160;N-SDU,&#160;for which&#160;a&#160;flow&#160;control&#160;parameter&#160;shall&#160;be read.&#160;<br/>Range:&#160;0..(maximum&#160;number of&#160;Rx&#160;N-SDU IDs)&#160;-&#160;1&#160;<br/>
parameter&#160;<br/>
Parameter&#160;type of&#160;which the value has&#160;to&#160;be read (TP_BS&#160;or&#160;TP_STMIN).&#160;<br/>
value&#160;<br/>
Pointer&#160;where&#160;the&#160;parameter&#160;value&#160;will&#160;be&#160;stored.&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
Std_ReturnType&#160;<br/>
E_OK: request is&#160;accepted.&#160;<br/>E_NOT_OK: request&#160;is&#160;not&#160;accepted.&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
This&#160;service is&#160;used to&#160;read&#160;the current value&#160;of&#160;reception&#160;parameters&#160;BS&#160;and&#160;STmin for a specified&#160;N-<br/>SDU.&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>This&#160;function&#160;can&#160;be&#160;called&#160;from&#160;any&#160;context.&#160;<br/>
<b>&gt;&#160;&#160;</b>This&#160;function&#160;is&#160;non-reentrant.&#160;<br/>
<b>&gt;&#160;&#160;</b>This&#160;function&#160;is&#160;synchronous.&#160;<br/>
<b>&gt;&#160;&#160;</b>This&#160;API&#160;is&#160;optional&#160;and&#160;can be&#160;deactivated&#160;<br/>
Compiler switch:&#160;CANTP_ENABLE_READ_PARAM&#160;<br/>Configuration attribute:&#160;CanTpReadParameterApi&#160;<br/>
Table&#160;5-12&#160;&#160;&#160;CanTp_ReadParameter()&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;3.00.01&#160;<br/>
46&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.7.1&#160;<br/>
<hr/>
<a name=47></a><img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/CanTp/doc/TechnicalReference_CanTp-47_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;CAN&#160;Transport Layer&#160;<br/>
<b>5.2&#160;</b><br/>
<b>Services&#160;used&#160;by&#160;CanTp&#160;</b><br/>
In&#160;&#160;the&#160;&#160;following&#160;&#160;table&#160;&#160;services&#160;&#160;provided&#160;&#160;by&#160;&#160;other&#160;&#160;components,&#160;&#160;which&#160;&#160;are&#160;&#160;used&#160;&#160;by&#160;&#160;the&#160;<br/>CanTp&#160;are&#160;listed.&#160;For&#160;details&#160;about&#160;prototype&#160;and&#160;functionality&#160;refer&#160;to&#160;the&#160;documentation&#160;<br/>of&#160;the&#160;providing&#160;component.&#160;<br/>
<b>Component&#160;</b><br/>
<b>API&#160;</b><br/>
CanIf&#160;<br/>
CanIf_Transmit&#160;<br/>CanIf_CancelTransmit&#160;&#160;<br/>
Det&#160;<br/>
Det_ReportError&#160;<br/>
EcuM&#160;<br/>
EcuM_BswErrorHook&#160;<br/>
PduR&#160;<br/>
PduR_CanTpCopyRxData&#160;<br/>PduR_CanTpCopyTxData&#160;<br/>PduR_CanTpRxIndication&#160;<br/>PduR_CanTpStartOfReception&#160;<br/>PduR_CanTpTxConfirmation&#160;<br/>PduR_CanTpChangeParameterConfirmation&#160;<br/>
SchM&#160;<br/>
SchM_Enter_CanTp_*&#160;<br/>SchM_Exit_CanTp_*&#160;<br/>
Table&#160;5-13&#160;&#160;&#160;Services&#160;used&#160;by&#160;the&#160;CanTp&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;3.00.01&#160;<br/>
47&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.7.1&#160;<br/>
<hr/>
<a name=48></a><img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/CanTp/doc/TechnicalReference_CanTp-48_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;CAN&#160;Transport Layer&#160;<br/>
<b>5.3&#160;</b><br/>
<b>Callback&#160;Functions&#160;</b><br/>
This&#160;chapter&#160;describes&#160;the&#160;callback&#160;functions&#160;that&#160;are&#160;implemented&#160;by&#160;the&#160;CanTp&#160;and&#160;can&#160;<br/>be&#160;invoked&#160;by&#160;other&#160;modules.&#160;The&#160;prototypes&#160;of&#160;the&#160;callback&#160;functions&#160;are&#160;provided&#160;in&#160;the&#160;<br/>header&#160;file&#160;CanTp_Cbk.h&#160;by&#160;the&#160;CanTp.&#160;<br/>
<b>5.3.1&#160;</b><br/>
<b>CanTp_RxIndication()&#160;</b><br/>
<b>Prototype&#160;</b><br/>
void&#160;<b>CanTp_RxIndication</b>&#160;( PduIdType CanTpRxPduId, const PduInfoType*&#160;<br/>CanTpRxPduPtr )&#160;<br/>
<b>Parameter&#160;</b><br/>
CanTpRxPduId&#160;<br/>
Identifier of&#160;the&#160;Rx&#160;N-PDU&#160;that&#160;have been received.&#160;<br/>Range:&#160;0..(maximum&#160;number of&#160;Rx&#160;N-PDU IDs)&#160;-&#160;1&#160;<br/>
CanTpRxPduPtr&#160;<br/>
Reference to structure&#160;with&#160;the&#160;size&#160;of&#160;the received&#160;N-PDU (SduLength)&#160;and&#160;<br/>to&#160;the payload data&#160;(SduDataPointer)&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
void&#160;<br/>
N/A&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
This&#160;function&#160;is&#160;called by&#160;the CAN&#160;Interface after a successful&#160;reception&#160;of&#160;an&#160;N-PDU.&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>This&#160;function&#160;can&#160;be&#160;called&#160;from&#160;any&#160;context.&#160;<br/>
<b>&gt;&#160;&#160;</b>This&#160;function&#160;is&#160;reentrant.&#160;<br/>
<b>&gt;&#160;&#160;</b>This&#160;function&#160;is&#160;synchronous.&#160;<br/>
Table&#160;5-14&#160;&#160;&#160;CanTp_RxIndication()&#160;<br/>
<b>5.3.2&#160;</b><br/>
<b>CanTp_TxConfirmation()&#160;</b><br/>
<b>Prototype&#160;</b><br/>
void&#160;<b>CanTp_TxConfirmation</b>&#160;( PduIdType TxPduId )&#160;<br/>
<b>Parameter&#160;</b><br/>
TxPduId&#160;<br/>
Identifier of&#160;the&#160;Tx&#160;N-PDU that have been&#160;transmitted&#160;successfully.&#160;<br/>Range:&#160;0..(maximum&#160;number of&#160;Tx&#160;N-PDU IDs)&#160;-&#160;1&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
void&#160;<br/>
N/A&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
This&#160;function&#160;is&#160;called by&#160;the CAN&#160;Interface to confirm&#160;the&#160;successful&#160;transmission&#160;of&#160;an&#160;N-PDU.&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>This&#160;function&#160;can&#160;be&#160;called&#160;from&#160;any&#160;context.&#160;<br/>
<b>&gt;&#160;&#160;</b>This&#160;function&#160;is&#160;reentrant.&#160;<br/>
<b>&gt;&#160;&#160;</b>This&#160;function&#160;is&#160;synchronous.&#160;<br/>
Table&#160;5-15&#160;&#160;&#160;CanTp_TxConfirmation()&#160;<br/>
&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;3.00.01&#160;<br/>
48&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.7.1&#160;<br/>
<hr/>
<a name=49></a><img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/CanTp/doc/TechnicalReference_CanTp-49_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;CAN&#160;Transport Layer&#160;<br/>
<b>5.3.3&#160;</b><br/>
<b>CanTp_StopSeparationTime()&#160;</b><br/>
<b>Prototype&#160;<br/></b>void&#160;<b>CanTp_StopSeparationTime</b>(PduIdType&#160;CanTpTxSduId)&#160;<br/>
<b>Parameter&#160;</b><br/>
CanTpTxSduId&#160;<br/>
Symbolic&#160;name value&#160;of&#160;the&#160;Tx&#160;connection&#160;<br/>Note:&#160;this&#160;is&#160;the&#160;same ID as&#160;it has&#160;been&#160;passed&#160;to&#160;the&#160;application&#160;in&#160;the&#160;<br/>StartSeparationTime call-out.&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
Called&#160;by&#160;the&#160;application&#160;to&#160;trigger transmission&#160;of&#160;the&#160;next CF&#160;when&#160;its&#160;separation timer expired.&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>Feature „STmin by&#160;Application“&#160;must be active&#160;(see<a href="TechnicalReference_CanTps.html#21">&#160;3.1.2.11)</a>&#160;<br/>
<b>&gt;&#160;&#160;</b>The&#160;request to&#160;do&#160;the&#160;separation&#160;time handling&#160;must have&#160;been&#160;accepted&#160;by&#160;the&#160;application&#160;(see<a href="TechnicalReference_CanTps.html#49">&#160;5.4.1)</a>.&#160;<br/>
If&#160;CanTp_StopSeparationTime()&#160;is&#160;called before&#160;Appl_StartSeparationTime&#160;returns&#160;(e.g. in case of&#160;a&#160;fast&#160;<br/>timer interrupt), the&#160;CanTp assumes&#160;a positive result and&#160;accepts&#160;the&#160;function&#160;call.&#160;<br/>
<b>&gt;&#160;&#160;</b>In&#160;the context of&#160;this&#160;function,&#160;the CanTp will&#160;request the CF payload from&#160;its&#160;upper&#160;layer&#160;and transmit&#160;<br/>
the&#160;next CF&#160;<br/>
Table&#160;5-16&#160;&#160;&#160;CanTp_StopSeparationTime()&#160;<br/>
<b>5.4&#160;</b><br/>
<b>Configurable&#160;Interfaces&#160;</b><br/>
<b>5.4.1&#160;</b><br/>
<b>Appl_StartSeparationTime()&#160;</b><br/>
<b>Prototype&#160;</b><br/>
boolean&#160;<b>Appl_StartSeparationTime</b>(PduIdType CanTpTxSduId, uint8 STmin)&#160;<br/>
<b>Parameter&#160;</b><br/>
CanTpTxSduId&#160;<br/>
Symbolic&#160;name value&#160;of&#160;the&#160;Tx&#160;connection.&#160;<br/>
STmin&#160;<br/>
STmin value&#160;from&#160;the flow&#160;control&#160;(encoding&#160;according to ISO).&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
TRUE&#160;<br/>
request to handle&#160;Separation&#160;Time is&#160;accepted&#160;by&#160;the&#160;application&#160;<br/>
FALSE&#160;<br/>
request to handle&#160;Separation&#160;Time is&#160;rejected&#160;and&#160;will&#160;be&#160;done&#160;by&#160;CanTp&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
Called&#160;by&#160;the&#160;CanTp to&#160;notify&#160;the application&#160;that a&#160;separation timer need to&#160;be&#160;started.&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>The&#160;function&#160;is&#160;called&#160;from&#160;the&#160;TxConfirmation&#160;context&#160;<br/>
<b>&gt;&#160;&#160;</b>The&#160;actual&#160;name of&#160;the function&#160;is&#160;configured by&#160;the&#160;parameter&#160;<br/>
‘CanTp/CanTpGeneral/CanTpApplSTminStartFunction’&#160;<br/>
Table&#160;5-17&#160;&#160;&#160;Appl_StartSeparationTime()&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;3.00.01&#160;<br/>
49&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.7.1&#160;<br/>
<hr/>
<a name=50></a><img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/CanTp/doc/TechnicalReference_CanTp-50_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;CAN&#160;Transport Layer&#160;<br/>
<b>5.4.2&#160;</b><br/>
<b>Notification Functions&#160;</b><br/>
Additional&#160;notification&#160;callouts&#160;can&#160;be&#160;defined&#160;to&#160;notify&#160;the&#160;application&#160;about&#160;the&#160;reception&#160;<br/>or&#160;&#160;transmission&#160;&#160;of&#160;&#160;CanTp&#160;&#160;frames.&#160;&#160;This&#160;&#160;may&#160;&#160;be&#160;&#160;used&#160;&#160;for&#160;&#160;project&#160;&#160;specific&#160;&#160;extensions&#160;&#160;or&#160;<br/>workarounds.&#160;&#160;The&#160;&#160;function&#160;&#160;declarations&#160;&#160;are&#160;&#160;provided&#160;&#160;in&#160;&#160;CanTp_Cbk.h.&#160;&#160;To&#160;&#160;activate&#160;&#160;a&#160;<br/>callout,&#160;an&#160;according&#160;compiler switch&#160;must&#160;be&#160;defined&#160;to&#160;STD_ON in&#160;a&#160;user config&#160;file.&#160;<br/>
<b>5.4.2.1&#160;</b><br/>
<b>Appl_CanTpRxSFIndication()&#160;</b><br/>
<b>Prototype&#160;</b><br/>
void&#160;<b>Appl_CanTpRxSFIndication&#160;</b>(PduIdType &#160; &#160; &#160; &#160; &#160;PduRRxPduId,&#160;&#160;<br/>&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;&#160;&#160;const PduInfoType* PduInfoPtr);&#160;<br/>
<b>Parameter&#160;</b><br/>
PduRRxPduId&#160;<br/>
PduId of&#160;the&#160;connection,&#160;which&#160;is&#160;defined by&#160;the&#160;PduR; the same Id is&#160;passed&#160;<br/>to&#160;PduR&#160;in&#160;PduR_CanTpRxIndication().&#160;<br/>
PduInfoPtr&#160;<br/>
Reference to structure&#160;with&#160;the&#160;size&#160;(SduLength)&#160;and&#160;the&#160;CAN frame content&#160;<br/>(SduDataPointer)&#160;of&#160;the single frame.&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
Function is&#160;called&#160;upon&#160;successful&#160;reception&#160;of&#160;a&#160;single frame&#160;N-PDU&#160;before the&#160;call&#160;of&#160;<br/>PduR_CanTpStartOfReception().&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>To activate&#160;the&#160;callout, CANTP_APPL_RX_SF_INDICATION&#160;must be defined to&#160;STD_ON&#160;<br/>
Table&#160;5-18&#160;&#160;&#160;Appl_CanTpRxSFIndication()&#160;<br/>
<b>5.4.2.2&#160;</b><br/>
<b>Appl_CanTpRxFFIndication()&#160;</b><br/>
<b>Prototype&#160;</b><br/>
void&#160;<b>Appl_CanTpRxFFIndication&#160;</b>(PduIdType &#160; &#160; &#160; &#160; &#160;PduRRxPduId,&#160;&#160;<br/>&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;const PduInfoType* PduInfoPtr);&#160;<br/>
<b>Parameter&#160;</b><br/>
PduRRxPduId&#160;<br/>
PduId of&#160;the&#160;connection,&#160;which&#160;is&#160;defined by&#160;the&#160;PduR; the same Id is&#160;passed&#160;<br/>to&#160;PduR&#160;in&#160;PduR_CanTpRxIndication().&#160;<br/>
PduInfoPtr&#160;<br/>
Reference&#160;to&#160;structure&#160;with&#160;the&#160;size (SduLength)&#160;and&#160;the&#160;CAN frame content&#160;<br/>(SduDataPointer)&#160;of&#160;the first frame.&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
Function is&#160;called&#160;upon&#160;successful&#160;reception&#160;of&#160;a&#160;first frame&#160;N-PDU&#160;before the call&#160;of&#160;<br/>PduR_CanTpStartOfReception().&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>To activate&#160;the&#160;callout, CANTP_APPL_RX_FF_INDICATION&#160;must be defined to&#160;STD_ON&#160;<br/>
Table&#160;5-19&#160;&#160;&#160;Appl_CanTpRxFFIndication()&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;3.00.01&#160;<br/>
50&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.7.1&#160;<br/>
<hr/>
<a name=51></a><img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/CanTp/doc/TechnicalReference_CanTp-51_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;CAN&#160;Transport Layer&#160;<br/>
<b>5.4.2.3&#160;</b><br/>
<b>Appl_CanTpRxCFIndication()&#160;</b><br/>
<b>Prototype&#160;</b><br/>
void&#160;<b>Appl_CanTpRxCFIndication&#160;</b>(PduIdType &#160; &#160; &#160; &#160; &#160;PduRRxPduId,&#160;&#160;<br/>&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;const PduInfoType* PduInfoPtr);&#160;<br/>
<b>Parameter&#160;</b><br/>
PduRRxPduId&#160;<br/>
PduId of&#160;the&#160;connection,&#160;which&#160;is&#160;defined by&#160;the&#160;PduR; the same Id&#160;is&#160;passed&#160;<br/>to&#160;PduR&#160;in&#160;PduR_CanTpRxIndication().&#160;<br/>
PduInfoPtr&#160;<br/>
Reference to structure&#160;with&#160;the&#160;size (SduLength)&#160;and&#160;the&#160;CAN frame content&#160;<br/>(SduDataPointer)&#160;of&#160;the consecutive frame.&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
Function is&#160;called&#160;upon&#160;successful&#160;reception&#160;of&#160;a&#160;consecutive frame&#160;N-PDU&#160;before the&#160;call&#160;of&#160;<br/>PduR_CanTpCopyRxData().&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>To activate&#160;the&#160;callout, CANTP_APPL_RX_CF_INDICATION&#160;must be defined to&#160;STD_ON&#160;<br/>
Table&#160;5-20&#160;&#160;&#160;Appl_CanTpRxCFIndication()&#160;<br/>
<b>5.4.2.4&#160;</b><br/>
<b>Appl_CanTpFrameTransmission ()&#160;</b><br/>
<b>Prototype&#160;</b><br/>
void&#160;<b>Appl_CanTFrameTransmission</b>&#160;(PduIdType &#160; &#160; &#160; &#160; &#160;CanIfTxPduId,&#160;&#160;<br/>&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;const PduInfoType* PduInfoPtr);&#160;<br/>
<b>Parameter&#160;</b><br/>
CanIfTxPduId&#160;<br/>
PduId of&#160;the&#160;transmitted CAN&#160;message,&#160;which&#160;is&#160;defined&#160;by&#160;the&#160;CanIf; the&#160;<br/>same Id is&#160;passed&#160;to&#160;CanIf_Transmit().&#160;<br/>
PduInfoPtr&#160;<br/>
Reference to structure&#160;with&#160;the&#160;size (SduLength)&#160;and&#160;the&#160;content&#160;<br/>(SduDataPointer)&#160;of&#160;the transmitted CAN frame.&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
Function is&#160;called&#160;if&#160;transmission&#160;of&#160;a&#160;CanTp&#160;N-PDU&#160;has&#160;successfully&#160;been&#160;started (CanIf_Transmit()&#160;has&#160;<br/>been&#160;called&#160;and returned&#160;E_OK).&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>To activate&#160;the&#160;callout, CANTP_APPL_FRAME_TRANSMISSION must be defined&#160;to&#160;STD_ON&#160;<br/>
Table&#160;5-21&#160;&#160;&#160;Appl_CanTpFrameTransmission&#160;()&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;3.00.01&#160;<br/>
51&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.7.1&#160;<br/>
<hr/>
<a name=52></a><img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/CanTp/doc/TechnicalReference_CanTp-52_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;CAN&#160;Transport Layer&#160;<br/>
<b>5.4.2.5&#160;</b><br/>
<b>Appl_CanTpFrameTxConfirmation ()&#160;</b><br/>
<b>Prototype&#160;</b><br/>
void&#160;<b>Appl_CanTFrameTxConfirmation</b>&#160;(PduIdType&#160;CanIfTxPduId);&#160;<br/>
<b>Parameter&#160;</b><br/>
CanIfTxPduId&#160;<br/>
PduId of&#160;the&#160;transmitted CAN&#160;message,&#160;which&#160;is&#160;defined&#160;by&#160;the&#160;CanIf; the&#160;<br/>same Id is&#160;passed&#160;to&#160;CanIf_Transmit().&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
Function is&#160;called&#160;if&#160;a&#160;CanTp&#160;N-PDU&#160;has&#160;successfully&#160;been&#160;transmitted&#160;(at&#160;the&#160;beginning of&#160;<br/>CanTp_TxConfirmation).&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>To activate&#160;the&#160;callout,&#160;CANTP_APPL_FRAME_CONFIRMATION&#160;must be defined to&#160;STD_ON&#160;<br/>
Table&#160;5-22&#160;&#160;&#160;Appl_CanTpFrameTransmission&#160;()&#160;<br/>
&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;3.00.01&#160;<br/>
52&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.7.1&#160;<br/>
<hr/>
<a name=53></a><img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/CanTp/doc/TechnicalReference_CanTp-53_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;CAN&#160;Transport Layer&#160;<br/>
<b>6&#160;&#160;Configuration&#160;</b><br/>
The&#160;CanTp&#160;attributes can&#160;be&#160;configured&#160;with&#160;the&#160;following&#160;tool:&#160;<br/>
<b>&gt;&#160;&#160;</b>Configuration&#160;in&#160;DaVinci Configurator&#160;Pro&#160;5&#160;<br/>
&#160;<br/>
<b>6.1&#160;</b><br/>
<b>Configuration Variants&#160;</b><br/>
The&#160;CanTp&#160;supports&#160;the&#160;configuration&#160;variant&#160;<br/>
<b>&gt;&#160;&#160;</b>VARIANT-PRE-COMPILE&#160;<br/>
<b>&gt;&#160;&#160;</b>VARIANT-POST-BUILD-LOADABLE&#160;<br/>
<b>&gt;&#160;&#160;</b>VARIANT-POST-BUILD-SELECTABLE&#160;<br/>
The&#160;configuration&#160;classes of&#160;the&#160;CanTp&#160;parameters depend&#160;on&#160;the&#160;supported&#160;configuration&#160;<br/>variants.&#160;For their&#160;definitions please&#160;see&#160;the&#160;CanTp_bswmd.arxml&#160;file.&#160;<br/>
&#160;<br/>
<b>6.2&#160;</b><br/>
<b>&#160;Configuration of Post-Build&#160;</b><br/>
The&#160;configuration&#160;of&#160;post-build&#160;loadable&#160;is described&#160;in<a href="TechnicalReference_CanTps.html#3">&#160;[7].</a>&#160;<br/>In&#160;the&#160;CanTp,&#160;the&#160;following&#160;configuration&#160;changes are possible&#160;at&#160;post-build&#160;time:&#160;&#160;<br/>
<b>&gt;&#160;&#160;</b>Modify&#160;timing&#160;parameters of&#160;existing&#160;N-SDUs&#160;<br/>
<b>&gt;&#160;&#160;</b>Activate&#160;or disable&#160;N-PDU&#160;padding&#160;of&#160;existing&#160;N-SDUs (padding&#160;must&#160;have&#160;been&#160;<br/>
globally&#160;enabled&#160;at&#160;pre-compile&#160;time)&#160;<br/>
<b>&gt;&#160;&#160;</b>Modify&#160;flow&#160;control parameters of&#160;existing&#160;Rx&#160;N-SDUs (STmin,&#160;Block&#160;Size,&#160;WFTmax)&#160;<br/>
<b>&gt;&#160;&#160;</b>Change&#160;number of&#160;channels (dynamic channel assignment&#160;must&#160;have&#160;been&#160;enabled&#160;<br/>
at&#160;pre-compile&#160;time,&#160;see<a href="TechnicalReference_CanTps.html#16">&#160;3.1.2.5)</a>&#160;<br/>
<b>&gt;&#160;&#160;</b>Add&#160;new&#160;N-SDUs&#160;<br/>
Existing&#160;references to&#160;N-PDUs can’t&#160;be&#160;changed&#160;at&#160;post-build&#160;time.&#160;However,&#160;when&#160;adding&#160;<br/>new&#160;N-SDUs,&#160;N-PDUs configured&#160;at&#160;pre-compile&#160;time&#160;can&#160;be&#160;referenced.&#160;<br/>
&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;3.00.01&#160;<br/>
53&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.7.1&#160;<br/>
<hr/>
<a name=54></a><img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/CanTp/doc/TechnicalReference_CanTp-54_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/CanTp/doc/TechnicalReference_CanTp-54_2.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;CAN&#160;Transport Layer&#160;<br/>
<b>6.3&#160;</b><br/>
<b>Additional&#160;Configuration Hints&#160;</b><br/>
<b>6.3.1&#160;</b><br/>
<b>CanIf&#160;Tx&#160;Buffering&#160;</b><br/>
The&#160;CanTp&#160;does&#160;not&#160;implement&#160;a&#160;retry&#160;mechanism&#160;in&#160;case&#160;the&#160;CanIf&#160;is&#160;not&#160;able&#160;to&#160;transmit&#160;<br/>a&#160;TP&#160;message.&#160;If&#160;a&#160;call&#160;to&#160;CanIf_Transmit&#160;failed,&#160;the&#160;connection&#160;is terminated.&#160;<br/>To&#160;avoid&#160;unpredictable&#160;interruption&#160;&#160;of&#160;active&#160;CanTp&#160;connections,&#160;the&#160;Tx&#160;buffering&#160;feature&#160;<br/>must&#160;be&#160;enabled&#160;in&#160;the&#160;CanIf&#160;for systems where high&#160;bus load&#160;and&#160;failed&#160;transmissions are&#160;<br/>expected.&#160;<br/>
&#160;<br/>
<b>6.3.2&#160;</b><br/>
<b>ISO&#160;Performance&#160;Requirements&#160;</b><br/>
ISO15765-2&#160;defines&#160;performance&#160;requirements&#160;for&#160;N_Br&#160;and&#160;N_Cs&#160;(see&#160;a<a href="TechnicalReference_CanTps.html#30">lso&#160;3.9.1),&#160;</a>which&#160;<br/>frequently&#160;leads&#160;to&#160;confusion.&#160;The&#160;reason&#160;for this&#160;is&#160;that&#160;there&#160;is&#160;usually&#160;no&#160;clear&#160;distinction&#160;<br/>between&#160;<b>configured timeouts</b>&#160;and&#160;the&#160;<b>actual&#160;timing</b>&#160;observed&#160;on&#160;the&#160;bus.&#160;<br/>For example,&#160;a&#160;typical&#160;OEM&#160;specification&#160;may&#160;look like&#160;that:&#160;<br/>
<b>Timing&#160;Parameter&#160;&#160;Value&#160;<br/></b>N_As&#160;<br/>
1000ms&#160;<br/>
N_Ar&#160;<br/>
1000ms&#160;<br/>
N_Bs&#160;<br/>
1000ms&#160;<br/>
N_Br&#160;<br/>
(N_Br&#160;+&#160;N_Ar)&#160;&lt;&#160;(0,9*N_Bs)&#160;<br/>
N_Cs&#160;<br/>
(N_Cs&#160;+&#160;N_As)&#160;&lt;&#160;(0,9*N_Cr)&#160;<br/>
N_Cr&#160;<br/>
1000ms&#160;<br/>
Table&#160;6-1&#160;&#160;&#160;Example&#160;for&#160;typical&#160;timing&#160;parameter&#160;specification&#160;<br/>
Interpreting&#160;all&#160;timings&#160;as&#160;configurable&#160;parameters&#160;would&#160;mean,&#160;that&#160;only&#160;a&#160;negative&#160;value&#160;<br/>can&#160;fulfill the&#160;specified&#160;equation&#160;for N_Br&#160;and&#160;N_Cs.&#160;<br/>However,&#160;the&#160;intent&#160;of&#160;the&#160;requirement&#160;is&#160;not&#160;to&#160;specify&#160;a&#160;concrete&#160;value,&#160;but&#160;to&#160;provide&#160;a&#160;<br/>test&#160;criterion&#160;for&#160;a&#160;black&#160;box&#160;test&#160;where&#160;e.g.&#160;N_Br&#160;and&#160;N_Ar&#160;can’t&#160;be&#160;measured&#160;separately.&#160;<br/>So&#160;it&#160;should&#160;be&#160;interpreted&#160;as&#160;follows:&#160;<br/>
&#160;<br/>
(actual&#160;measured&#160;time&#160;for&#160;N_Br&#160;+&#160;N_Ar)&#160;&lt;&#160;(0,9&#160;*&#160;configured&#160;N_Bs&#160;timeout)&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>FAQ:&#160;Which&#160;values should&#160;be&#160;used&#160;for&#160;the&#160;config&#160;parameters&#160;N_Cs and&#160;N_Br?&#160;</b><br/>
&#160;&#160;The&#160;CanTp&#160;tries&#160;to&#160;send&#160;out&#160;frames as&#160;fast&#160;as&#160;possible.&#160;N_Cs&#160;and&#160;N_Br&#160;are&#160;mainly&#160;<br/>
used to&#160;abort/complete&#160;an operation&#160;before&#160;it&#160;is&#160;obvious that&#160;the&#160;performance&#160;time can&#160;<br/>no&#160;longer&#160;be&#160;fulfilled&#160;(see al<a href="TechnicalReference_CanTps.html#31">so&#160;3.9.2.2&#160;</a>for&#160;N_Cs&#160;and<a href="TechnicalReference_CanTps.html#32">&#160;3.9.2.3&#160;</a>for&#160;N_Br).&#160;&#160;<br/>So assuming a&#160;typical&#160;bus&#160;delay&#160;far&#160;below&#160;100ms,&#160;for&#160;the&#160;example above a&#160;good&#160;<br/>choice&#160;for&#160;N_Cs&#160;and&#160;N_Br&#160;would be&#160;around&#160;800ms.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;3.00.01&#160;<br/>
54&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.7.1&#160;<br/>
<hr/>
<a name=55></a><img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/CanTp/doc/TechnicalReference_CanTp-55_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;CAN&#160;Transport Layer&#160;<br/>
<b>7&#160;&#160;Glossary&#160;and&#160;Abbreviations&#160;</b><br/>
<b>7.1&#160;</b><br/>
<b>Glossary&#160;</b><br/>
<b>Term&#160;</b><br/>
<b>Description&#160;</b><br/>
Buffer&#160;<br/>
A&#160;buffer&#160;in a&#160;memory&#160;area normally&#160;in the&#160;RAM.&#160;It&#160;is&#160;an&#160;area&#160;that&#160;the&#160;<br/>application has&#160;reserved&#160;for&#160;data&#160;storage.&#160;<br/>
Callback&#160;function&#160;<br/>
This&#160;is&#160;a&#160;function&#160;provided by&#160;an&#160;application.&#160;E.g.&#160;the&#160;CAN&#160;Driver&#160;calls&#160;a&#160;<br/>callback&#160;function&#160;to&#160;allow&#160;the&#160;application to&#160;control&#160;some&#160;action,&#160;to&#160;make&#160;<br/>decisions&#160;at&#160;runtime and&#160;to influence&#160;the&#160;work&#160;of&#160;the&#160;driver.&#160;<br/>
CAN&#160;Driver&#160;<br/>
The&#160;CAN&#160;Driver&#160;encapsulates&#160;a&#160;specific&#160;CAN&#160;controller&#160;handling.&#160;It&#160;<br/>consists&#160;of&#160;algorithms&#160;for&#160;hardware&#160;initialization,&#160;CAN&#160;message&#160;<br/>transmission&#160;and&#160;reception.&#160;The&#160;application&#160;interface&#160;supports&#160;both&#160;event&#160;<br/>and polling&#160;notification and&#160;WR/RD&#160;access&#160;to&#160;the&#160;message buffers.&#160;<br/>
CAN&#160;message&#160;<br/>
Frame&#160;which is composed of&#160;the&#160;start-of-frame,&#160;arbitration,&#160;control,&#160;data,&#160;<br/>CRC,&#160;acknowledge and&#160;end-of-frame&#160;bit&#160;fields.&#160;<br/>
Channel&#160;<br/>
A&#160;channel&#160;defines&#160;the&#160;assignment&#160;(1:1)&#160;between&#160;a physical&#160;communication&#160;<br/>interface&#160;and&#160;a physical&#160;layer&#160;on&#160;which different&#160;modules are&#160;connected&#160;to&#160;<br/>(either&#160;CAN&#160;or&#160;LIN).&#160;1 channel&#160;consists&#160;of&#160;1&#160;...&#160;X&#160;network(s).&#160;<br/>
Communication&#160;<br/>
The&#160;communication&#160;stack&#160;consists&#160;of&#160;the&#160;communication configuration&#160;and&#160;<br/>
stack&#160;<br/>
the&#160;communication&#160;kernel,&#160;a number&#160;of&#160;adaptive software&#160;components&#160;that&#160;<br/>cover&#160;the&#160;basic&#160;communication requirements&#160;in&#160;distributed&#160;automotive&#160;<br/>applications.&#160;<br/>
Component&#160;<br/>
CAN&#160;Driver,&#160;Network&#160;Management&#160;...&#160;are&#160;software&#160;COMPONENTS&#160;in&#160;<br/>contrast&#160;to&#160;the&#160;expression&#160;module,&#160;which describes an&#160;ECU.&#160;<br/>
Confirmation&#160;<br/>
A&#160;service primitive defined in&#160;the&#160;ISO/OSI&#160;Reference Model&#160;(ISO&#160;7498).&#160;<br/>With&#160;the&#160;service primitive 'confirmation'&#160;a service provider&#160;informs&#160;a&#160;service&#160;<br/>user&#160;about&#160;the&#160;result&#160;of&#160;a&#160;preceding&#160;service request&#160;of&#160;the&#160;service user.&#160;<br/>Notification by&#160;the&#160;CAN&#160;Driver&#160;on&#160;asynchronous&#160;successful&#160;transmission&#160;of&#160;<br/>a CAN&#160;message.&#160;<br/>
Critical&#160;section&#160;<br/>
A&#160;critical&#160;section&#160;is&#160;a sequence of&#160;instructions&#160;where&#160;mutual&#160;exclusion&#160;must&#160;<br/>be&#160;ensured.&#160;Such&#160;a&#160;section&#160;is&#160;called&#160;'critical'&#160;because&#160;shared&#160;data is&#160;<br/>modified&#160;within it.&#160;<br/>
Data&#160;consistency&#160;<br/>
Data&#160;consistency&#160;means&#160;that&#160;the&#160;content&#160;of&#160;a&#160;given&#160;application message&#160;<br/>correlates&#160;unambiguously&#160;to the&#160;operation&#160;performed&#160;onto&#160;the&#160;message&#160;by&#160;<br/>the&#160;application.&#160;This&#160;means that&#160;no&#160;unforeseen&#160;sequence&#160;of&#160;operations&#160;<br/>may&#160;alter&#160;the&#160;content&#160;of&#160;a message hence&#160;rendering&#160;a&#160;message&#160;<br/>inconsistent&#160;with respect&#160;to&#160;its&#160;allowed&#160;and expected&#160;value.&#160;<br/>
Data&#160;link layer&#160;<br/>
The&#160;communication&#160;layer&#160;which provides&#160;services&#160;for&#160;the&#160;transfer&#160;of&#160;data&#160;<br/>link&#160;messages.&#160;The&#160;data&#160;link&#160;layer&#160;consists&#160;of&#160;the&#160;communication&#160;hardware&#160;<br/>and the&#160;communication&#160;driver&#160;software.&#160;<br/>
DaVinci&#160;<br/>
Configuration and&#160;code&#160;generation&#160;tool&#160;for&#160;MICROSAR&#160;components&#160;<br/>
Configurator&#160;Pro&#160;5&#160;<br/>Deadlock&#160;<br/>
A&#160;state in&#160;which tasks&#160;block one another&#160;so&#160;that&#160;further&#160;processing&#160;of&#160;the&#160;<br/>tasks&#160;concerned&#160;is&#160;no&#160;longer&#160;possible.&#160;A&#160;deadlock&#160;between two tasks&#160;<br/>occurs,&#160;e.g.&#160;if&#160;both&#160;tasks&#160;wait&#160;for&#160;the&#160;reception&#160;of&#160;a message which is to&#160;be&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;3.00.01&#160;<br/>
55&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.7.1&#160;<br/>
<hr/>
<a name=56></a><img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/CanTp/doc/TechnicalReference_CanTp-56_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;CAN&#160;Transport Layer&#160;<br/>
sent&#160;by&#160;the&#160;other&#160;task&#160;before&#160;sending&#160;its&#160;own message.&#160;<br/>
Electronic&#160;Control&#160;<br/>
Also known as&#160;ECU.&#160;Small&#160;embedded&#160;computer&#160;system&#160;consisting&#160;of&#160;at&#160;<br/>
Unit&#160;<br/>
least&#160;one CPU&#160;and&#160;corresponding&#160;periphery&#160;which is placed in&#160;one&#160;<br/>housing.&#160;<br/>
Event&#160;<br/>
An exclusive signal&#160;which is assigned&#160;to&#160;a certain&#160;extended task.&#160;An event&#160;<br/>can&#160;be&#160;used&#160;to send&#160;binary&#160;information&#160;to an&#160;extended task.&#160;The&#160;meaning&#160;<br/>of&#160;events&#160;is&#160;defined&#160;by&#160;the application.&#160;Any&#160;task&#160;can&#160;set&#160;an&#160;event&#160;for&#160;an&#160;<br/>extended task.&#160;The&#160;event&#160;can&#160;only&#160;be&#160;cleared&#160;by&#160;the&#160;task&#160;which is&#160;<br/>assigned&#160;to&#160;the&#160;event.&#160;<br/>
Gateway&#160;<br/>
A&#160;gateway&#160;is&#160;designed&#160;to&#160;enable communication&#160;between different&#160;bus&#160;<br/>systems,&#160;e.g.&#160;from&#160;CAN&#160;to LIN.&#160;<br/>
Indication&#160;<br/>
A&#160;service primitive defined in&#160;the&#160;ISO/OSI&#160;Reference Model&#160;(ISO&#160;7498).&#160;<br/>With&#160;the&#160;service primitive 'indication'&#160;a service provider&#160;informs&#160;a&#160;service&#160;<br/>user&#160;about&#160;the&#160;occurrence of&#160;either&#160;an&#160;internal&#160;event&#160;or&#160;a&#160;service request&#160;<br/>issued by&#160;another&#160;service user.&#160;Notification of&#160;application in&#160;case&#160;of&#160;events&#160;<br/>in the&#160;Vector&#160;software&#160;components,&#160;e.g.&#160;an&#160;asynchronous&#160;reception&#160;of&#160;a&#160;<br/>CAN&#160;message.&#160;<br/>
Interrupt&#160;<br/>
Processor-specific&#160;event&#160;which can&#160;interrupt&#160;the&#160;execution&#160;of&#160;a&#160;current&#160;<br/>program&#160;section.&#160;<br/>
Interrupt&#160;level&#160;<br/>
Processing&#160;level&#160;provided&#160;for&#160;time-critical&#160;activities.&#160;To&#160;keep&#160;the&#160;interrupt&#160;<br/>latency&#160;brief,&#160;only&#160;absolutely&#160;indispensable actions&#160;should be&#160;effected&#160;in&#160;<br/>the&#160;interrupt&#160;service routine,&#160;which ensures&#160;reception&#160;of&#160;the&#160;interrupt&#160;and&#160;<br/>trigger&#160;its&#160;(post)&#160;processing&#160;within a&#160;task.&#160;Other&#160;processing&#160;levels&#160;are:&#160;<br/>Operating&#160;system&#160;level&#160;and task&#160;level.&#160;<br/>
Network&#160;<br/>
A&#160;network&#160;defines&#160;the&#160;assignment&#160;(1:N)&#160;between a&#160;logical&#160;communication&#160;<br/>grouping&#160;and a&#160;physical&#160;layer&#160;on&#160;which different&#160;modules are&#160;connected&#160;to&#160;<br/>(either&#160;CAN&#160;or&#160;LIN).&#160;One&#160;network&#160;consists&#160;of&#160;one&#160;channel,&#160;Y&#160;networks&#160;<br/>consists&#160;of&#160;1&#160;...&#160;Z&#160;channel(s).&#160;We&#160;say&#160;network&#160;if&#160;we talk&#160;about&#160;more&#160;than&#160;<br/>one bus.&#160;<br/>
Physical&#160;layer&#160;<br/>
An electrical&#160;circuit&#160;that&#160;connects&#160;an&#160;ECU&#160;to a&#160;communication&#160;media.&#160;<br/>
Platform&#160;<br/>
The&#160;sum&#160;of&#160;micro&#160;controller&#160;derivative,&#160;communication controller&#160;<br/>implementation&#160;and&#160;compiler&#160;is&#160;called&#160;platform.&#160;<br/>
Post-build&#160;<br/>
This&#160;type&#160;of&#160;configuration is possible after&#160;building&#160;the&#160;software&#160;module&#160;or&#160;<br/>the&#160;ECU&#160;software.&#160;The&#160;software&#160;may&#160;either&#160;receive parameters&#160;of&#160;its&#160;<br/>configuration&#160;during&#160;the&#160;download of&#160;the&#160;complete ECU&#160;software&#160;resulting&#160;<br/>from&#160;the&#160;linkage of&#160;the&#160;code,&#160;or&#160;it&#160;may&#160;receive its&#160;configuration&#160;file that&#160;can&#160;<br/>be&#160;downloaded to the&#160;ECU&#160;separately,&#160;avoiding&#160;a re-compilation and re-<br/>build of&#160;the&#160;ECU&#160;software modules.&#160;In order&#160;to&#160;make&#160;the&#160;post-build time&#160;re-<br/>configuration&#160;possible,&#160;the re-configurable&#160;parameters&#160;shall&#160;be&#160;stored&#160;at&#160;a&#160;<br/>known memory&#160;location&#160;of&#160;ECU&#160;storage&#160;area.&#160;<br/>
Segmented&#160;data&#160;<br/>
See&#160;segmented&#160;communication&#160;<br/>
transfer&#160;<br/>Software&#160;<br/>
A&#160;software&#160;architecture is&#160;the&#160;structure&#160;or&#160;structures of&#160;a system,&#160;which&#160;<br/>
architecture&#160;<br/>
comprises&#160;software&#160;components,&#160;the&#160;external&#160;visible properties of&#160;these&#160;<br/>components&#160;and&#160;the&#160;relationships among them.&#160;<br/>
Transport&#160;Protocol&#160;<br/>
Some&#160;information&#160;that&#160;must&#160;be&#160;transferred over&#160;the&#160;CAN/LIN bus&#160;does&#160;not&#160;<br/>fit&#160;into&#160;individual&#160;message&#160;frames&#160;because&#160;the&#160;data length&#160;exceeds the&#160;<br/>maximum&#160;of&#160;8&#160;bytes.&#160;In&#160;this&#160;case,&#160;the&#160;sender&#160;must&#160;divide&#160;up&#160;the&#160;data&#160;into&#160;a&#160;<br/>number&#160;of&#160;messages.&#160;Additional&#160;information&#160;is&#160;necessary&#160;for&#160;the&#160;receiver&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;3.00.01&#160;<br/>
56&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.7.1&#160;<br/>
<hr/>
<a name=57></a><img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/CanTp/doc/TechnicalReference_CanTp-57_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;CAN&#160;Transport Layer&#160;<br/>
to put&#160;the&#160;data&#160;together&#160;again.&#160;<br/>
Table&#160;7-1&#160;&#160;&#160;Glossary&#160;<br/>
<b>7.2&#160;</b><br/>
<b>Abbreviations&#160;</b><br/>
<b>Abbreviation&#160;</b><br/>
<b>Description&#160;</b><br/>
AE&#160;<br/>
Address Extension&#160;<br/>
API&#160;<br/>
Application&#160;Programming Interface&#160;&#160;&#160;<br/>
AR&#160;<br/>
AUTOSAR&#160;<br/>
AUTOSAR&#160;<br/>
Automotive Open System&#160;Architecture&#160;<br/>
BS&#160;<br/>
Block&#160;Size&#160;<br/>
BSW&#160;<br/>
Basis&#160;Software&#160;<br/>
BSWMD&#160;<br/>
Basic&#160;Software&#160;Module Description&#160;<br/>
CAN&#160;<br/>
Controller&#160;Area&#160;Network&#160;protocol&#160;<br/>
CAN-FD&#160;<br/>
CAN&#160;with Flexible Data Rate&#160;<br/>
CANTP&#160;<br/>
CAN&#160;Transport&#160;Layer&#160;<br/>
CF&#160;<br/>
Consecutive Frame&#160;<br/>
COM&#160;<br/>
Communication&#160;<br/>
CTS&#160;<br/>
Clear&#160;To&#160;Send&#160;<br/>
DCM&#160;<br/>
Diagnostic&#160;Communication&#160;Manager&#160;<br/>
DEM&#160;<br/>
Diagnostic&#160;Event&#160;Manager&#160;<br/>
DET&#160;<br/>
Development&#160;Error&#160;Tracer&#160;<br/>
DL&#160;<br/>
Data&#160;Length&#160;<br/>
DLC&#160;<br/>
Data&#160;Length&#160;Code,&#160;Number&#160;of&#160;data bytes&#160;of&#160;a CAN&#160;message&#160;<br/>
ECU&#160;<br/>
Electronic&#160;Control&#160;Unit&#160;<br/>
FC&#160;<br/>
Flow&#160;Control&#160;<br/>
FF&#160;<br/>
First&#160;Frame&#160;<br/>
FS&#160;<br/>
Flow&#160;Status&#160;Control&#160;<br/>
HIS&#160;<br/>
Hersteller&#160;Initiative Software&#160;<br/>
ID&#160;<br/>
Identifier&#160;<br/>
ISO&#160;<br/>
International&#160;Standardization Organization&#160;<br/>
LFF&#160;<br/>
Long&#160;First&#160;Frame&#160;(extended&#160;first&#160;frame&#160;with escape&#160;sequence)&#160;<br/>
LSF&#160;<br/>
Long&#160;Single&#160;Frame&#160;(extended&#160;single&#160;frame&#160;with escape&#160;sequence)&#160;<br/>
MICROSAR&#160;<br/>
Microcontroller&#160;Open&#160;System&#160;Architecture&#160;(the&#160;Vector&#160;AUTOSAR&#160;<br/>solution)&#160;<br/>
N&#160;<br/>
Network&#160;Layer&#160;(used&#160;as&#160;prefix;&#160;e.g.&#160;N-PDU&#160;or&#160;N-SDU)&#160;<br/>
OBD&#160;<br/>
Undefined&#160;<br/>
OEM&#160;<br/>
Original&#160;Equipment&#160;Manufacturer&#160;<br/>
OS&#160;<br/>
Operating&#160;System&#160;<br/>
OVFLW&#160;<br/>
Overflow&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;3.00.01&#160;<br/>
57&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.7.1&#160;<br/>
<hr/>
<a name=58></a><img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/CanTp/doc/TechnicalReference_CanTp-58_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;CAN&#160;Transport Layer&#160;<br/>
PB&#160;<br/>
Post-Build&#160;<br/>
PDU&#160;<br/>
Protocol&#160;Data Unit&#160;<br/>
PDUR&#160;<br/>
PDU&#160;Router&#160;<br/>
ROM&#160;<br/>
Read-Only&#160;Memory&#160;<br/>
RFC&#160;<br/>
Request&#160;For&#160;Comment&#160;<br/>
RTE&#160;<br/>
Runtime Environment&#160;<br/>
SA&#160;<br/>
Source&#160;Address&#160;<br/>
SDU&#160;<br/>
Service Data Unit&#160;<br/>
SF&#160;<br/>
Single Frame&#160;<br/>
SN&#160;<br/>
Sequence&#160;Number&#160;<br/>
SRS&#160;<br/>
Software&#160;Requirement&#160;Specification&#160;<br/>
ST&#160;<br/>
Separation&#160;Time&#160;<br/>
SWC&#160;<br/>
Software&#160;Component&#160;<br/>
SWS&#160;<br/>
Software&#160;Specification&#160;<br/>
TA&#160;<br/>
Target&#160;Address&#160;<br/>
TP&#160;<br/>
Transport&#160;Protocol&#160;<br/>
TPCI&#160;<br/>
Transport&#160;Protocol&#160;Control&#160;Information&#160;<br/>
WT&#160;<br/>
Wait&#160;<br/>
Table&#160;7-2&#160;&#160;&#160;Abbreviations&#160;<br/>
&#160;<br/>
&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;3.00.01&#160;<br/>
58&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.7.1&#160;<br/>
<hr/>
<a name=59></a><img src="ElectricPowerSteering_RH850_FORD_T3T6_website/content/en/docs/CanTp/doc/TechnicalReference_CanTp-59_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;CAN&#160;Transport Layer&#160;<br/>
<b>8&#160;&#160;Contact&#160;</b><br/>
Visit&#160;our website&#160;for&#160;more information&#160;on&#160;<br/>&#160;<br/><b>&gt;&#160;&#160;</b>News&#160;<br/>
<b>&gt;&#160;&#160;</b>Products&#160;<br/>
<b>&gt;&#160;&#160;</b>Demo&#160;software&#160;<br/>
<b>&gt;&#160;&#160;</b>Support&#160;<br/>
<b>&gt;&#160;&#160;</b>Training&#160;data&#160;<br/>
<b>&gt;&#160;&#160;</b>Addresses&#160;<br/>
&#160;<br/>www.vector.com&#160;<br/>
&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>
&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;3.00.01&#160;<br/>
59&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.7.1&#160;<br/>
<hr/>
<a name="outline"></a><h1>Document Outline</h1>
<ul>
<li><a href="TechnicalReference_CanTps.html#10">1 Component History</a></li>
<li><a href="TechnicalReference_CanTps.html#11">2 Introduction</a>
<ul>
<li><a href="TechnicalReference_CanTps.html#12">2.1 Architecture Overview</a></li>
</ul>
</li>
<li><a href="TechnicalReference_CanTps.html#14">3 Functional Description</a>
<ul>
<li><a href="TechnicalReference_CanTps.html#14">3.1 Features</a>
<ul>
<li><a href="TechnicalReference_CanTps.html#14">3.1.1 Deviations</a></li>
<li><a href="TechnicalReference_CanTps.html#15">3.1.2 Additions/ Extensions</a>
<ul>
<li><a href="TechnicalReference_CanTps.html#15">3.1.2.1 Split CanTp_MainFunction</a></li>
<li><a href="TechnicalReference_CanTps.html#15">3.1.2.2 Notification of Failed Buffer Request</a></li>
<li><a href="TechnicalReference_CanTps.html#15">3.1.2.3 Handling of FC Frames with a Reserved STmin</a></li>
<li><a href="TechnicalReference_CanTps.html#16">3.1.2.4 Dynamic and Static BlockSize and STmin</a></li>
<li><a href="TechnicalReference_CanTps.html#16">3.1.2.5 Dynamic Channel Assignment</a></li>
<li><a href="TechnicalReference_CanTps.html#16">3.1.2.6 Single Buffer Optimization</a></li>
<li><a href="TechnicalReference_CanTps.html#17">3.1.2.7 Transmit Queue</a></li>
<li><a href="TechnicalReference_CanTps.html#18">3.1.2.8 Asynchronous and Synchronous behavior of CanTp_Transmit</a></li>
<li><a href="TechnicalReference_CanTps.html#18">3.1.2.9 Support of PduR Interface according to AUTOSAR 4.1.2</a></li>
<li><a href="TechnicalReference_CanTps.html#19">3.1.2.10 CAN-FD Support</a>
<ul>
<li><a href="TechnicalReference_CanTps.html#19">3.1.2.10.1 CAN Messages with more than 8 Byte</a></li>
<li><a href="TechnicalReference_CanTps.html#20">3.1.2.10.2 CAN-FD Frame Padding</a></li>
<li><a href="TechnicalReference_CanTps.html#20">3.1.2.10.3 Segmented Messages with more than 4095 Byte</a></li>
</ul>
</li>
<li><a href="TechnicalReference_CanTps.html#21">3.1.2.11 Separation Time by Application</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="TechnicalReference_CanTps.html#22">3.2 Limitations</a>
<ul>
<li><a href="TechnicalReference_CanTps.html#22">3.2.1 Memory Optimization</a></li>
<li><a href="TechnicalReference_CanTps.html#22">3.2.2 Channel Assignment</a></li>
<li><a href="TechnicalReference_CanTps.html#22">3.2.3 Channel Addressing</a></li>
<li><a href="TechnicalReference_CanTps.html#23">3.2.4 Data Length Parameter</a></li>
</ul>
</li>
<li><a href="TechnicalReference_CanTps.html#23">3.3 Initialization</a></li>
<li><a href="TechnicalReference_CanTps.html#23">3.4 States</a></li>
<li><a href="TechnicalReference_CanTps.html#24">3.5 Main Functions</a></li>
<li><a href="TechnicalReference_CanTps.html#24">3.6 Error Handling</a>
<ul>
<li><a href="TechnicalReference_CanTps.html#24">3.6.1 Development Error Reporting</a>
<ul>
<li><a href="TechnicalReference_CanTps.html#28">3.6.1.1 Parameter Checking</a></li>
</ul>
</li>
<li><a href="TechnicalReference_CanTps.html#28">3.6.2 Production Code Error Reporting</a></li>
</ul>
</li>
<li><a href="TechnicalReference_CanTps.html#29">3.7 Channel Mode</a></li>
<li><a href="TechnicalReference_CanTps.html#29">3.8 Connection Channels</a></li>
<li><a href="TechnicalReference_CanTps.html#30">3.9 Connection Timings</a>
<ul>
<li><a href="TechnicalReference_CanTps.html#30">3.9.1 Timing Parameters</a></li>
<li><a href="TechnicalReference_CanTps.html#31">3.9.2 Timing Considerations and Jitter</a>
<ul>
<li><a href="TechnicalReference_CanTps.html#31">3.9.2.1 Jitter</a></li>
<li><a href="TechnicalReference_CanTps.html#31">3.9.2.2 Separation Time</a></li>
<li><a href="TechnicalReference_CanTps.html#32">3.9.2.3 Implementation of N_Br</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a href="TechnicalReference_CanTps.html#33">4 Integration</a>
<ul>
<li><a href="TechnicalReference_CanTps.html#33">4.1 Scope of Delivery</a>
<ul>
<li><a href="TechnicalReference_CanTps.html#33">4.1.1 Static Files</a></li>
<li><a href="TechnicalReference_CanTps.html#33">4.1.2 Dynamic Files</a></li>
</ul>
</li>
<li><a href="TechnicalReference_CanTps.html#34">4.2 Include Structure</a></li>
<li><a href="TechnicalReference_CanTps.html#35">4.3 Compiler Abstraction and Memory Mapping</a>
<ul>
<li><a href="TechnicalReference_CanTps.html#35">4.3.1 Memory mapping rules</a></li>
</ul>
</li>
<li><a href="TechnicalReference_CanTps.html#36">4.4 Critical Sections</a></li>
<li><a href="TechnicalReference_CanTps.html#36">4.5 Buffer Configuration</a>
<ul>
<li><a href="TechnicalReference_CanTps.html#36">4.5.1 Constant Block Size</a></li>
<li><a href="TechnicalReference_CanTps.html#37">4.5.2 Zero Block Size</a></li>
<li><a href="TechnicalReference_CanTps.html#37">4.5.3 Zero WFTmax</a></li>
<li><a href="TechnicalReference_CanTps.html#37">4.5.4 Zero STmin</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="TechnicalReference_CanTps.html#38">5 API Description</a>
<ul>
<li><a href="TechnicalReference_CanTps.html#38">5.1 Services provided by CanTp</a>
<ul>
<li><a href="TechnicalReference_CanTps.html#38">5.1.1 CanTp_InitMemory</a></li>
<li><a href="TechnicalReference_CanTps.html#39">5.1.2 CanTp_Init()</a></li>
<li><a href="TechnicalReference_CanTps.html#39">5.1.3 CanTp_Shutdown()</a></li>
<li><a href="TechnicalReference_CanTps.html#40">5.1.4 CanTp_MainFunction()</a></li>
<li><a href="TechnicalReference_CanTps.html#40">5.1.5 CanTp_MainFunctionRx()</a></li>
<li><a href="TechnicalReference_CanTps.html#41">5.1.6 CanTp_MainFunctionTx()</a></li>
<li><a href="TechnicalReference_CanTps.html#41">5.1.7 CanTp_GetVersionInfo()</a></li>
<li><a href="TechnicalReference_CanTps.html#42">5.1.8 CanTp_Transmit()</a></li>
<li><a href="TechnicalReference_CanTps.html#43">5.1.9 CanTp_CancelReceive()</a></li>
<li><a href="TechnicalReference_CanTps.html#44">5.1.10 CanTp_CancelTransmit()</a></li>
<li><a href="TechnicalReference_CanTps.html#45">5.1.11 CanTp_ChangeParameter()</a></li>
<li><a href="TechnicalReference_CanTps.html#46">5.1.12 CanTp_ReadParameter()</a></li>
</ul>
</li>
<li><a href="TechnicalReference_CanTps.html#47">5.2 Services used by CanTp</a></li>
<li><a href="TechnicalReference_CanTps.html#48">5.3 Callback Functions</a>
<ul>
<li><a href="TechnicalReference_CanTps.html#48">5.3.1 CanTp_RxIndication()</a></li>
<li><a href="TechnicalReference_CanTps.html#48">5.3.2 CanTp_TxConfirmation()</a></li>
<li><a href="TechnicalReference_CanTps.html#49">5.3.3 CanTp_StopSeparationTime()</a></li>
</ul>
</li>
<li><a href="TechnicalReference_CanTps.html#49">5.4 Configurable Interfaces</a>
<ul>
<li><a href="TechnicalReference_CanTps.html#49">5.4.1 Appl_StartSeparationTime()</a></li>
<li><a href="TechnicalReference_CanTps.html#50">5.4.2 Notification Functions</a>
<ul>
<li><a href="TechnicalReference_CanTps.html#50">5.4.2.1 Appl_CanTpRxSFIndication()</a></li>
<li><a href="TechnicalReference_CanTps.html#50">5.4.2.2 Appl_CanTpRxFFIndication()</a></li>
<li><a href="TechnicalReference_CanTps.html#51">5.4.2.3 Appl_CanTpRxCFIndication()</a></li>
<li><a href="TechnicalReference_CanTps.html#51">5.4.2.4 Appl_CanTpFrameTransmission ()</a></li>
<li><a href="TechnicalReference_CanTps.html#52">5.4.2.5 Appl_CanTpFrameTxConfirmation ()</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a href="TechnicalReference_CanTps.html#53">6 Configuration</a>
<ul>
<li><a href="TechnicalReference_CanTps.html#53">6.1 Configuration Variants</a></li>
<li><a href="TechnicalReference_CanTps.html#53">6.2 &#160;Configuration of Post-Build</a></li>
<li><a href="TechnicalReference_CanTps.html#54">6.3 Additional Configuration Hints</a>
<ul>
<li><a href="TechnicalReference_CanTps.html#54">6.3.1 CanIf Tx Buffering</a></li>
<li><a href="TechnicalReference_CanTps.html#54">6.3.2 ISO Performance Requirements</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="TechnicalReference_CanTps.html#55">7 Glossary and Abbreviations</a>
<ul>
<li><a href="TechnicalReference_CanTps.html#55">7.1 Glossary</a></li>
<li><a href="TechnicalReference_CanTps.html#57">7.2 Abbreviations</a></li>
</ul>
</li>
<li><a href="TechnicalReference_CanTps.html#59">8 Contact</a></li>
</ul>
<hr/>
</body>
</html>
