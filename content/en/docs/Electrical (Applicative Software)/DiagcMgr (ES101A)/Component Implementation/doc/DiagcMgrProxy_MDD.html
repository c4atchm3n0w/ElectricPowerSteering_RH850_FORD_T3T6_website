---
title: DiagcMgrProxy_MDD
linkTitle: DiagcMgrProxy_MDD
weight: 5
---

<p><strong>Module Design Document</strong></p>
<p><strong>For</strong></p>
<p><strong>Diagnostic Manager Proxy</strong></p>
<p><strong>VERSION:</strong> <strong>5.0</strong></p>
<p><strong>DATE:</strong> <strong>29-JUN-2017</strong></p>
<p><strong>Prepared By:</strong></p>
<p><strong>Shruthi Raghavan</strong></p>
<p><strong>Location:</strong> The official version of this document is stored in the Nexteer Configuration Management System.</p>
<p><strong>Revision History</strong></p>
<table style="width:100%;">
<colgroup>
<col style="width: 5%" />
<col style="width: 58%" />
<col style="width: 9%" />
<col style="width: 10%" />
<col style="width: 15%" />
</colgroup>
<tbody>
<tr class="odd">
<td><strong>Sl. No.</strong></td>
<td><strong>Description</strong></td>
<td><strong>Author</strong></td>
<td><strong>Version</strong></td>
<td><strong>Date</strong></td>
</tr>
<tr class="even">
<td>1</td>
<td>ES101A_DiagcMgr_Design version 2 implementation</td>
<td>SB</td>
<td>1.0</td>
<td>11-Mar-2016</td>
</tr>
<tr class="odd">
<td>2</td>
<td>ES101A_DiagcMgr_Design version 4 implementation</td>
<td>SB</td>
<td>2.0</td>
<td>22-Jun-2016</td>
</tr>
<tr class="even">
<td>3</td>
<td>Added new DET in Init1</td>
<td>SB</td>
<td>3.0</td>
<td>02-Dec-2016</td>
</tr>
<tr class="odd">
<td>4</td>
<td>Added new runnable SetNtcStsAndSnpshtData.</td>
<td>SR</td>
<td>4.0</td>
<td>21-Apr-2017</td>
</tr>
<tr class="even">
<td>5</td>
<td>Added unit test considerations per EA4#9649</td>
<td>SR</td>
<td>5.0</td>
<td>29-Jun-2017</td>
</tr>
</tbody>
</table>
<p>Table of Contents</p>
<p><a href="#abbrevations-and-acronyms">1 Abbrevations And Acronyms 5</a></p>
<p><a href="#references">2 References 6</a></p>
<p><a href="#diagcmgrproxyapplx-high-level-description">3 DiagcMgrPROXYAPPLX &amp; High-Level Description 7</a></p>
<p><a href="#design-details-of-software-module">4 Design details of software module 8</a></p>
<p><a href="#graphical-representation-of-diagcmgrproxyapplx">4.1 Graphical representation of DiagcmgrPRoxyApplX 8</a></p>
<p><a href="#data-flow-diagram">4.2 Data Flow Diagram 8</a></p>
<p><a href="#module-level-dfd">4.2.1 Module level DFD 8</a></p>
<p><a href="#sub-module-level-dfd">4.2.2 Sub-Module level DFD 8</a></p>
<p><a href="#component-flow-diagram">4.3 COMPONENT FLOW DIAGRAM 8</a></p>
<p><a href="#variable-data-dictionary">5 Variable Data Dictionary 9</a></p>
<p><a href="#user-defined-typedef-definitiondeclaration">5.1 User defined typedef definition/declaration 9</a></p>
<p><a href="#variable-definition-for-enumerated-types">5.2 Variable definition for enumerated types 9</a></p>
<p><a href="#constant-data-dictionary">6 Constant Data Dictionary 10</a></p>
<p><a href="#programfixed-constants">6.1 Program(fixed) Constants 10</a></p>
<p><a href="#embedded-constants">6.1.1 Embedded Constants 10</a></p>
<p><a href="#local">6.1.1.1 Local 10</a></p>
<p><a href="#global">6.1.1.2 Global 10</a></p>
<p><a href="#module-specific-lookup-tables-constants">6.1.2 Module specific Lookup Tables Constants 10</a></p>
<p><a href="#software-module-implementation">7 Software Module Implementation 11</a></p>
<p><a href="#sub-module-functions">7.1 Sub-Module Functions 11</a></p>
<p><a href="#initialization-functions">7.1.1 Initialization Functions 11</a></p>
<p><a href="#init-diagcmgrproxyapplxinit1">7.1.1.1 INIT: DiagcMgrPROXYAPPLXInit1 11</a></p>
<p><a href="#design-rationale">7.1.1.2 Design Rationale 11</a></p>
<p><a href="#__RefHeading___Toc454968199">7.1.1.3 Store Module Inputs to Local copies 11</a></p>
<p><a href="#__RefHeading___Toc454968200">7.1.1.4 (Processing of function)……… 11</a></p>
<p><a href="#__RefHeading___Toc454968201">7.1.1.5 Store Local copy of outputs into Module Outputs 11</a></p>
<p><a href="#periodic-functions">7.1.2 PERIODIC FUNCTIONS 11</a></p>
<p><a href="#per-diagcmgrproxyapplxper1">7.1.2.1 Per: diagcmgrPROXYAPPLXPer1 11</a></p>
<p><a href="#design-rationale-1">7.1.2.2 Design Rationale 11</a></p>
<p><a href="#__RefHeading___Toc454968205">7.1.2.3 Store Module Inputs to Local copies 11</a></p>
<p><a href="#__RefHeading___Toc454968206">7.1.2.4 (Processing of function)……… 11</a></p>
<p><a href="#__RefHeading___Toc454968207">7.1.2.5 Store Local copy of outputs into Module Outputs 11</a></p>
<p><a href="#interrupt-functions">7.1.3 Interrupt Functions 11</a></p>
<p><a href="#server-runnable-functions">7.1.4 Server Runnable Functions 12</a></p>
<p><a href="#getdiagcdataapplx_oper">7.1.4.1 GetDiagcDataApplX_Oper 12</a></p>
<p><a href="#getntcactvx_oper">7.1.4.2 GetNtcActvX_Oper 12</a></p>
<p><a href="#getntcdebcntrappl0_oper">7.1.4.3 GetNtcDebCntrAppl0_Oper 12</a></p>
<p><a href="#getntcinfoapplx_oper">7.1.4.4 GetNtcInfoApplX_Oper 12</a></p>
<p><a href="#getntcqlfrstsx_oper">7.1.4.5 GetNtcQlfrStsX_Oper 12</a></p>
<p><a href="#getntcstsx_oper">7.1.4.6 GetNtcStsX_Oper 13</a></p>
<p><a href="#setntcstsx_oper">7.1.4.7 SetNtcStsX_Oper 14</a></p>
<p><a href="#local-functionmacro-definitions">7.1.5 Local Function/Macro Definitions 14</a></p>
<p><a href="#description">7.1.5.1 Description 14</a></p>
<p><a href="#transient-functions">7.1.6 TRANSIENT FUNCTIONS 14</a></p>
<p><a href="#known-limitations-with-design">8 Known Limitations With Design 15</a></p>
<p><a href="#unit-test-consideration">9 UNIT TEST CONSIDERATION 16</a></p>
<p><a href="#appendix">10 Appendix 17</a></p>
<h1 id="abbrevations-and-acronyms">Abbrevations And Acronyms</h1>
<table>
<colgroup>
<col style="width: 28%" />
<col style="width: 71%" />
</colgroup>
<tbody>
<tr class="odd">
<td>Abbreviation</td>
<td>Description</td>
</tr>
<tr class="even">
<td>DFD</td>
<td>Design functional diagram</td>
</tr>
<tr class="odd">
<td>MDD</td>
<td>Module design Document</td>
</tr>
</tbody>
</table>
<h1 id="references">References</h1>
<p>This section lists the title &amp; version of all the documents that are referred for development of this document</p>
<table>
<colgroup>
<col style="width: 9%" />
<col style="width: 41%" />
<col style="width: 48%" />
</colgroup>
<tbody>
<tr class="odd">
<td>Sr. No.</td>
<td>Title</td>
<td>Version</td>
</tr>
<tr class="even">
<td>1</td>
<td>MDD Guidelines</td>
<td>See process v04.04.02 document from eRoom <a href="http://eroom.nexteer.com/eRoomReq/Files/Nexteer-ProductLineSystems/ProcessDocumentsSystemsElectronicSystems/0_35a47/MDD%20Guideline%20EA4%2001.00.01.docx">here</a></td>
</tr>
<tr class="odd">
<td>2</td>
<td>EA4 Software Naming Conventions</td>
<td>See process v04.04.02 document from eRoom <a href="http://eroom.nexteer.com/eRoomReq/Files/Nexteer-ProductLineSystems/ProcessDocumentsSystemsElectronicSystems/0_35e15/EA4%20Software%20Naming%20Conventions%2001.01.00.docx">here</a></td>
</tr>
<tr class="even">
<td>3</td>
<td>Coding standards</td>
<td>See process v04.04.02 document from eRoom <a href="http://eroom.nexteer.com/eRoomReq/Files/Nexteer-ProductLineSystems/ProcessDocumentsSystemsElectronicSystems/0_35a2f/Software%20Design%20and%20Coding%20Standards%202.1.doc">here</a></td>
</tr>
<tr class="odd">
<td>4</td>
<td>ES101A_DiagcMgr_Design</td>
<td>See Synergy Design Subproject Version</td>
</tr>
</tbody>
</table>
<h1 id="diagcmgrproxyapplx-high-level-description">DiagcMgrPROXYAPPLX &amp; High-Level Description</h1>
<p>There are 11 proxy components whose design is same but the name of the components is based on the application number. ApplX is used through out the document in place of application number.</p>
<h1 id="design-details-of-software-module">Design details of software module</h1>
<h2 id="graphical-representation-of-diagcmgrproxyapplx">Graphical representation of DiagcmgrPRoxyApplX</h2>
<p><img src="ElectricPowerSteering_RH850_FORD_T3T6_website/static/media/image1.png" style="width:3.71181in;height:2.22917in" /></p>
<h2 id="data-flow-diagram">Data Flow Diagram</h2>
<h2 id="module-level-dfd">Module level DFD</h2>
<p><em>N/A</em></p>
<h2 id="sub-module-level-dfd">Sub-Module level DFD</h2>
<p><em>N/A</em></p>
<h2 id="component-flow-diagram">COMPONENT FLOW DIAGRAM</h2>
<p><em>N/A</em></p>
<h1 id="variable-data-dictionary">Variable Data Dictionary</h1>
<h2 id="user-defined-typedef-definitiondeclaration">User defined typedef definition/declaration </h2>
<p><em>&lt;This section documents any user types uniquely used for the module.&gt;</em></p>
<table>
<colgroup>
<col style="width: 34%" />
<col style="width: 31%" />
<col style="width: 11%" />
<col style="width: 11%" />
<col style="width: 11%" />
</colgroup>
<tbody>
<tr class="odd">
<td>Typedef Name</td>
<td>Element Name</td>
<td>User Defined Type</td>
<td><p>Legal Range</p>
<p>(min)</p></td>
<td><p>Legal Range</p>
<p>(max)</p></td>
</tr>
<tr class="even">
<td>Refer DiagcMgr_MDD</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<h2 id="variable-definition-for-enumerated-types">Variable definition for enumerated types</h2>
<table>
<colgroup>
<col style="width: 44%" />
<col style="width: 40%" />
<col style="width: 14%" />
</colgroup>
<tbody>
<tr class="odd">
<td>Enum Name</td>
<td>Element Name</td>
<td>Value</td>
</tr>
<tr class="even">
<td>N/A</td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<h1 id="constant-data-dictionary">Constant Data Dictionary</h1>
<h2 id="programfixed-constants">Program(fixed) Constants</h2>
<h2 id="embedded-constants">Embedded Constants</h2>
<p><em>&lt; All program specific constants will be defined in detail &gt;</em></p>
<h2 id="local">Local</h2>
<table>
<colgroup>
<col style="width: 47%" />
<col style="width: 20%" />
<col style="width: 14%" />
<col style="width: 16%" />
</colgroup>
<tbody>
<tr class="odd">
<td>Constant Name</td>
<td>Resolution</td>
<td>Units</td>
<td>Value</td>
</tr>
<tr class="even">
<td>See DataDict.m file</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>Refer DiagcMgr_MDD</td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<h2 id="global">Global</h2>
<p><em>&lt;This section lists the global constants used by the module. For details on global constants, refer to the Data Dictionary for the application&gt;</em></p>
<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<tbody>
<tr class="odd">
<td>Constant Name</td>
</tr>
<tr class="even">
<td>See DataDict.m file</td>
</tr>
<tr class="odd">
<td></td>
</tr>
<tr class="even">
<td></td>
</tr>
</tbody>
</table>
<h2 id="module-specific-lookup-tables-constants">Module specific Lookup Tables Constants</h2>
<p><em>&lt;(This is for lookup tables (arrays) with fixed values, same name as other tables)&gt;</em></p>
<table>
<colgroup>
<col style="width: 42%" />
<col style="width: 20%" />
<col style="width: 18%" />
<col style="width: 18%" />
</colgroup>
<tbody>
<tr class="odd">
<td>Constant Name</td>
<td>Resolution</td>
<td>Value</td>
<td>Software Segment</td>
</tr>
<tr class="even">
<td>Refer DiagcMgr_MDD</td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<h1 id="software-module-implementation">Software Module Implementation</h1>
<h2 id="sub-module-functions">Sub-Module Functions</h2>
<p>None</p>
<h2 id="initialization-functions">Initialization Functions</h2>
<h2 id="init-diagcmgrproxyapplxinit1">INIT: DiagcMgrPROXYAPPLXInit1</h2>
<p>X in the flowchart will change based on the proxy application number.</p>
<p>ErrorID ‘0’ is ensuring if DTCIDX value in fault response table is set to have value larger than the total number of DTCs in the code configuration.</p>
<p><img src="ElectricPowerSteering_RH850_FORD_T3T6_website/static/media/image2.wmf" /></p>
<h2 id="design-rationale">Design Rationale</h2>
<h2 id="periodic-functions">PERIODIC FUNCTIONS</h2>
<h2 id="per-diagcmgrproxyapplxper1">Per: diagcmgrPROXYAPPLXPer1</h2>
<h2 id="design-rationale-1">Design Rationale</h2>
<p>Design rationale for the subblock:<br />
<em><strong>DiagcMgrProxyApplXPer1/Clear All NTCs/For Number of NTCs in NtcInfoAryX/Clear the NTCs that are active</strong></em></p>
<p>This block clears the NTCs that are active and <em>Not Status Locked</em> This Ignition Cycle.<br />
It also clears the NTCs that are NOT active from history even if they are Status Locked This Igniton Cycle</p>
<p>In the case of an invalid aging counter, the status of the NTC must be set to TestNotCompleteThisIgnitionCycle.</p>
<p><em><u>MC/DC Coverage Can be Achieved:</u></em></p>
<p>The above is verified to <strong>not</strong> be a MC/DC coverage issue<br />
The second condition when reached by an invalid aging counter can still check whether the status locked and test complete conditions individually affect it.</p>
<h2 id="interrupt-functions">Interrupt Functions</h2>
<p><em>None</em></p>
<h2 id="server-runnable-functions">Server Runnable Functions</h2>
<h2 id="getdiagcdataapplx_oper">GetDiagcDataApplX_Oper</h2>
<p>See DataDict.m file and model for detailed description.</p>
<h2 id="getntcactvx_oper">GetNtcActvX_Oper</h2>
<p>See DataDict.m file and model for detailed description.</p>
<p>X in the flowchart will change based on the proxy application number.</p>
<p>ErrorID ‘0’ is ensuring if NtcNr is within the valid range.</p>
<p>ErrorID ‘1’ is ensuring if ApplIdx is valid.</p>
<p><img src="ElectricPowerSteering_RH850_FORD_T3T6_website/static/media/image3.wmf" /></p>
<h2 id="getntcdebcntrappl0_oper">GetNtcDebCntrAppl0_Oper</h2>
<p>See DataDict.m file and model for detailed description.</p>
<h2 id="getntcinfoapplx_oper">GetNtcInfoApplX_Oper</h2>
<p>See DataDict.m file and model for detailed description.</p>
<h2 id="getntcqlfrstsx_oper">GetNtcQlfrStsX_Oper</h2>
<p>See DataDict.m file and model for detailed description.</p>
<p>X in the flowchart will change based on the proxy application number.</p>
<p>ErrorID ‘0’ is ensuring if NtcNr is within the valid range.</p>
<p>ErrorID ‘1’ is ensuring if ApplIdx is valid.</p>
<p><img src="ElectricPowerSteering_RH850_FORD_T3T6_website/static/media/image4.wmf" /></p>
<h2 id="getntcstsx_oper">GetNtcStsX_Oper</h2>
<p>See DataDict.m file and model for detailed description.</p>
<p>X in the flowchart will change based on the proxy application number.</p>
<p>ErrorID ‘0’ is ensuring if NtcNr is within the valid range.</p>
<p>ErrorID ‘1’ is ensuring if ApplIdx is valid.</p>
<p><img src="ElectricPowerSteering_RH850_FORD_T3T6_website/static/media/image5.wmf" /></p>
<h2 id="setntcstsx_oper">SetNtcStsX_Oper</h2>
<p>See DataDict.m file and model for detailed description.</p>
<p>X in the flowchart will change based on the proxy application number.</p>
<p>ErrorID ‘0’ is ensuring if NtcNr is within the valid range.</p>
<p>ErrorID ‘1’ is ensuring if ApplIdx is valid.</p>
<p><img src="ElectricPowerSteering_RH850_FORD_T3T6_website/static/media/image6.wmf" /></p>
<h2 id="setntcstsandsnpshtdatax_oper">SetNtcStsAndSnpshtDataX_Oper</h2>
<p>See DataDict.m file and model for detailed description.</p>
<p>X in the flowchart will change based on the proxy application number.</p>
<p>ErrorID ‘0’ is ensuring if NtcNr is within the valid range.</p>
<p>ErrorID ‘1’ is ensuring if ApplIdx is valid.</p>
<p><img src="ElectricPowerSteering_RH850_FORD_T3T6_website/static/media/image7.wmf" /></p>
<h2 id="local-functionmacro-definitions">Local Function/Macro Definitions</h2>
<h2 id="description">Description</h2>
<p>Proxies use functions from the private.c file, refer DiagcMgr MDD for function descriptions.</p>
<h2 id="transient-functions">TRANSIENT FUNCTIONS </h2>
<p><em>None</em></p>
<h1 id="known-limitations-with-design">Known Limitations With Design</h1>
<ol type="1">
<li><p>Per the FDD author, safety critical data is protected in an exclusive area but there is a possibility of corruption of non critical data.</p></li>
<li><p>Refer to Design Rationale section on the top level of DiagcMgrProxy Simulink model.</p></li>
</ol>
<h1 id="unit-test-consideration">UNIT TEST CONSIDERATION</h1>
<ol type="1">
<li><p>Config files in the contract folder are for a test project with sample configurations using Application 6 and Application 10. Therefore with this configuration, the following files cannot be tested – DiagcMgrProxyAppl0, DiagcMgrProxyAppl1, DiagcMgrProxyAppl2, DiagcMgrProxyAppl3, DiagcMgrProxyAppl4, DiagcMgrProxyAppl5, DiagcMgrProxyAppl7, DiagcMgrProxyAppl8, DiagcMgrProxyAppl9.</p></li>
<li><p>Low Path Coverage can be justified in the notes for now, if the reason is due to Configurable code in the component.</p></li>
</ol>
<p>Note: Continuous improvement CR EA4#9630 has been written to modify the contract folder header files to allow better coverage in unit test.</p>
<h1 id="appendix">Appendix</h1>
<p><em>None</em></p>
