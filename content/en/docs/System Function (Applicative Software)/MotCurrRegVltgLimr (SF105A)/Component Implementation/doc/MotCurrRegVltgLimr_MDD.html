---
title: MotCurrRegVltgLimr_MDD
linkTitle: MotCurrRegVltgLimr_MDD
weight: 3
---

<p><strong>Module Design Document</strong></p>
<p><strong>For</strong></p>
<p><strong>‘MotCurrRegVltgLimr’</strong></p>
<p><strong>VERSION: 5.0</strong></p>
<p><strong>DATE: 08-Nov-2017</strong></p>
<p><strong>Prepared By:</strong></p>
<p><strong>TATA ELXSI,</strong></p>
<p><strong>TRIVANDRUM, INDIA</strong></p>
<p><strong><br />
Location:</strong> The official version of this document is stored in the Nexteer Configuration Management System.</p>
<p><strong>Revision History</strong></p>
<table style="width:100%;">
<colgroup>
<col style="width: 6%" />
<col style="width: 31%" />
<col style="width: 31%" />
<col style="width: 12%" />
<col style="width: 17%" />
</colgroup>
<tbody>
<tr class="odd">
<td><strong>Sl. No.</strong></td>
<td><strong>Description</strong></td>
<td><strong>Author</strong></td>
<td><strong>Version</strong></td>
<td><strong>Date</strong></td>
</tr>
<tr class="even">
<td>1</td>
<td>Initial Version</td>
<td>Selva Sengottaiyan</td>
<td>1.0</td>
<td>26-May-2015</td>
</tr>
<tr class="odd">
<td>2</td>
<td>Updated graphical representation and added local function information</td>
<td>Nick Saxton</td>
<td>2.0</td>
<td>13-Apr-2016</td>
</tr>
<tr class="even">
<td>3</td>
<td>Updated for FDD v2.1.0</td>
<td>Matthew Leser</td>
<td>3.0</td>
<td>7-Nov-2016</td>
</tr>
<tr class="odd">
<td>4</td>
<td>Updated to fix Anomaly EA4#9045</td>
<td>Matthew Leser</td>
<td>4.0</td>
<td>04-Jan-2017</td>
</tr>
<tr class="even">
<td>5</td>
<td>Updated for FDD v3.0.0</td>
<td>TATA</td>
<td>5.0</td>
<td>08-Nov-2017</td>
</tr>
</tbody>
</table>
<p><strong><u><br />
Table of Contents</u></strong></p>
<p>1 Abbrevations And Acronyms 5</p>
<p>2 References 6</p>
<p>3 High-Level Description 7</p>
<p>4 Design details of software module 8</p>
<p>4.1 Graphical representation 8</p>
<p>4.2 Data Flow Diagram 8</p>
<p>4.2.1 Module level DFD 8</p>
<p>4.2.2 Sub-Module level DFD 8</p>
<p>4.3 COMPONENT FLOW DIAGRAM 8</p>
<p>5 Variable Data Dictionary 9</p>
<p>5.1 User defined typedef definition/declaration 9</p>
<p>5.2 Variable definition for enumerated types 9</p>
<p>6 Constant Data Dictionary 10</p>
<p>6.1 Program(fixed) Constants 10</p>
<p>6.1.1 Embedded Constants 10</p>
<p>6.1.1.1 Local 10</p>
<p>6.1.1.2 Global 10</p>
<p>6.1.2 Module specific Lookup Tables Constants 10</p>
<p>7 Software Module Implementation 11</p>
<p>7.1 Sub-Module Functions 11</p>
<p>7.1.1 Initialization Functions 11</p>
<p>7.1.1.1 INIT: MotCurrRegVltgLimrInit1 11</p>
<p>7.1.1.1.1 Design Rationale 11</p>
<p>7.1.1.1.2 Module Outputs 11</p>
<p>7.1.1.1.3 Module Internal 11</p>
<p>7.1.2 PERIODIC FUNCTIONS 11</p>
<p>7.1.2.1 INIT: MotCurrRegVltgLimrPER1 11</p>
<p>7.1.2.1.1 Design Rationale 11</p>
<p>7.1.2.1.2 Module Outputs 11</p>
<p>7.1.3 Interrupt Functions 11</p>
<p>7.1.4 Server runnables 12</p>
<p>7.1.4.1.1 Store Local copy of outputs into Module Outputs 12</p>
<p>7.1.5 Local Function/Macro Definitions 12</p>
<p>7.1.5.1.1 Local function #1 12</p>
<p>7.1.5.1.2 Local function #2 12</p>
<p>7.1.5.1.3 Local function #3 12</p>
<p>7.1.5.1.4 Local function #4 13</p>
<p>7.1.5.1.5 Local function #5 13</p>
<p>7.1.6 GLObAL Function/Macro Definitions 13</p>
<p>7.1.7 Tranisition FUNCTIONS 13</p>
<p>8 Known Limitations With Design 14</p>
<p>9 UNIT TEST CONSIDERATION 15</p>
<p>10 Appendix 16</p>
<h1 id="abbrevations-and-acronyms">Abbrevations And Acronyms</h1>
<table>
<colgroup>
<col style="width: 28%" />
<col style="width: 71%" />
</colgroup>
<thead>
<tr class="header">
<th>Abbreviation</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>DFD</td>
<td>Design functional diagram</td>
</tr>
<tr class="even">
<td>MDD</td>
<td>Module design Document</td>
</tr>
<tr class="odd">
<td>FDD</td>
<td>Functional Design Document</td>
</tr>
</tbody>
</table>
<h1 id="references">References</h1>
<p>This section lists the title &amp; version of all the documents that are referred for development of this document</p>
<table>
<colgroup>
<col style="width: 11%" />
<col style="width: 65%" />
<col style="width: 22%" />
</colgroup>
<thead>
<tr class="header">
<th>Sr. No.</th>
<th>Title</th>
<th>Version</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>MDD Guidelines</td>
<td>Process 4.02.01</td>
</tr>
<tr class="even">
<td>2</td>
<td>Software Naming Conventions</td>
<td>Process 4.02.01</td>
</tr>
<tr class="odd">
<td>3</td>
<td>Software Design and Coding standards</td>
<td>2.1</td>
</tr>
<tr class="even">
<td>4</td>
<td>FDD – SF105A_MotCurrRegVltgLimr_Design</td>
<td>See Synergy sub project version</td>
</tr>
<tr class="odd">
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<h1 id="high-level-description">High-Level Description</h1>
<p><em>None</em></p>
<h1 id="design-details-of-software-module">Design details of software module</h1>
<h2 id="graphical-representation">Graphical representation</h2>
<p><img src="ElectricPowerSteering_RH850_FORD_T3T6_website/static/media/image2.png" style="width:3.1875in;height:5.0625in" /></p>
<h2 id="data-flow-diagram">Data Flow Diagram</h2>
<p><em>Refer FDD</em></p>
<h2 id="module-level-dfd">Module level DFD</h2>
<p><em>Refer FDD</em></p>
<h2 id="sub-module-level-dfd">Sub-Module level DFD</h2>
<p><em>Refer FDD</em></p>
<h2 id="component-flow-diagram">COMPONENT FLOW DIAGRAM</h2>
<p><em>Refer FDD</em></p>
<h1 id="variable-data-dictionary">Variable Data Dictionary</h1>
<h2 id="user-defined-typedef-definitiondeclaration">User defined typedef definition/declaration </h2>
<p><em>&lt;This section documents any user types uniquely used for the module.&gt;</em></p>
<table>
<colgroup>
<col style="width: 34%" />
<col style="width: 31%" />
<col style="width: 11%" />
<col style="width: 11%" />
<col style="width: 11%" />
</colgroup>
<thead>
<tr class="header">
<th>Typedef Name</th>
<th>Element Name</th>
<th>User Defined Type</th>
<th><p>Legal Range</p>
<p>(min)</p></th>
<th><p>Legal Range</p>
<p>(max)</p></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>None</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<h2 id="variable-definition-for-enumerated-types">Variable definition for enumerated types</h2>
<table>
<colgroup>
<col style="width: 44%" />
<col style="width: 40%" />
<col style="width: 14%" />
</colgroup>
<thead>
<tr class="header">
<th>Enum Name</th>
<th>Element Name</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>None</td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<h1 id="constant-data-dictionary">Constant Data Dictionary</h1>
<h2 id="programfixed-constants">Program(fixed) Constants</h2>
<h2 id="embedded-constants">Embedded Constants</h2>
<h2 id="local">Local </h2>
<table>
<colgroup>
<col style="width: 42%" />
<col style="width: 20%" />
<col style="width: 18%" />
<col style="width: 18%" />
</colgroup>
<thead>
<tr class="header">
<th>Constant Name</th>
<th>Resolution</th>
<th>Units</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>MODIDXHILIM_VOLT_F32</td>
<td>Single precision float</td>
<td>Volt</td>
<td>1</td>
</tr>
<tr class="even">
<td>MODIDXLOLIM_VOLT_F32</td>
<td>Single precision float</td>
<td>Volt</td>
<td>0</td>
</tr>
<tr class="odd">
<td>BITMASK1_CNT_U08</td>
<td>Uint8</td>
<td>CNT</td>
<td>1U</td>
</tr>
<tr class="even">
<td>BITMASK2_CNT_U08</td>
<td>Uint8</td>
<td>CNT</td>
<td>2U</td>
</tr>
<tr class="odd">
<td>BITMASK4_CNT_U08</td>
<td>Uint8</td>
<td>CNT</td>
<td>4U</td>
</tr>
</tbody>
</table>
<h2 class="unnumbered" id="section"></h2>
<h2 id="global">Global</h2>
<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<thead>
<tr class="header">
<th>Constant Name</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td></td>
</tr>
</tbody>
</table>
<h2 id="module-specific-lookup-tables-constants">Module specific Lookup Tables Constants</h2>
<p><em>None</em></p>
<h1 id="software-module-implementation">Software Module Implementation</h1>
<h2 id="sub-module-functions">Sub-Module Functions </h2>
<h2 id="initialization-functions">Initialization Functions</h2>
<p><em>MotCurrRegVltgLimrInit1</em></p>
<h2 id="init-motcurrregvltglimrinit1">INIT: MotCurrRegVltgLimrInit1</h2>
<h2 id="design-rationale">Design Rationale</h2>
<p><em>Design follows implemenetation in FDD.</em></p>
<h2 id="module-outputs">Module Outputs</h2>
<p><em>Refer ‘MotCurrRegVltgLimrInit’ block in FDD</em></p>
<h2 id="module-internal">Module Internal </h2>
<p>None</p>
<h2 id="periodic-functions">PERIODIC FUNCTIONS </h2>
<h2 id="init-motcurrregvltglimrper1">INIT: MotCurrRegVltgLimrPER1</h2>
<h2 id="design-rationale-1">Design Rationale</h2>
<h2 id="module-outputs-1">Module Outputs</h2>
<p><em>As per FDD,</em> <em>dMotCurrRegVltgLimrMotVltgDecouplFbDax,</em> <em>dMotCurrRegVltgLimrMotVltgDecouplFbQax renamed with dMotCurrRegVltgLimrMotVltgDecoupldFbDax,</em> <em>dMotCurrRegVltgLimrMotVltgDecouplFbQax in the source file.</em> <em>And also dMotCurrRegVltgLimrMotCurrCmdErr(display variable)</em> <em>is nowhere used in source file. That</em> <em>variable</em> <em>davinci definition is removed.</em> <em>Design follows implemenetation in FDD.</em></p>
<h2 id="interrupt-functions">Interrupt Functions</h2>
<p><em>None</em></p>
<h2 id="server-runnables"><br />
Server runnables</h2>
<p><em>None</em></p>
<h2 id="store-local-copy-of-outputs-into-module-outputs">Store Local copy of outputs into Module Outputs</h2>
<p><em>None</em></p>
<h2 id="local-functionmacro-definitions">Local Function/Macro Definitions</h2>
<h2 id="local-function-1"> Local function #1</h2>
<table>
<colgroup>
<col style="width: 18%" />
<col style="width: 45%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 14%" />
</colgroup>
<tbody>
<tr class="odd">
<td><strong>Function Name</strong></td>
<td>KpKiCtrl</td>
<td>Type</td>
<td>Min</td>
<td>Max</td>
</tr>
<tr class="even">
<td><strong>Arguments Passed</strong></td>
<td>MotPropGain_Ohm_T_f32</td>
<td>Float32</td>
<td>0</td>
<td>2.25</td>
</tr>
<tr class="odd">
<td></td>
<td>MotIntglGain_Ohm_T_f32</td>
<td>Float32</td>
<td>0</td>
<td>3.6</td>
</tr>
<tr class="even">
<td></td>
<td>SysSt_Cnt_T_enum</td>
<td>Enum</td>
<td>SYSST_DI</td>
<td>SYSST_WRMININ</td>
</tr>
<tr class="odd">
<td></td>
<td>CmdErr_Ampr_T_f32</td>
<td>Float32</td>
<td>-200</td>
<td>400</td>
</tr>
<tr class="even">
<td></td>
<td>*MotVltgIntglCmdPrev_Volt_T_f32</td>
<td>Float32</td>
<td>-1000</td>
<td>1000</td>
</tr>
<tr class="odd">
<td></td>
<td>*MotCurrRegVltgLimrMotVltgPropCmd_Volt_T_f32</td>
<td>Float32</td>
<td>-26.5</td>
<td>26.5</td>
</tr>
<tr class="even">
<td></td>
<td>*MotCurrRegVltgLimrMotVltgIntglPreLim_Volt_T_f32</td>
<td>Float32</td>
<td>-26.5</td>
<td>26.5</td>
</tr>
<tr class="odd">
<td></td>
<td>MotVltgIntglLoLim_Volt_T_f32</td>
<td>Float32</td>
<td>-31</td>
<td>0</td>
</tr>
<tr class="even">
<td></td>
<td>MotVltgIntglHiLim_Volt_T_f32</td>
<td>Float32</td>
<td>0</td>
<td>31</td>
</tr>
<tr class="odd">
<td></td>
<td>*MotVltgPropCmd_Volt_T_f32</td>
<td>Float32</td>
<td>-26.5</td>
<td>26.5</td>
</tr>
<tr class="even">
<td></td>
<td>*MotVltgIntglCmd_Volt_T_f32</td>
<td>Float32</td>
<td>6</td>
<td>26.5</td>
</tr>
</tbody>
</table>
<p>* MotVltgPropCmd_Volt_T_f32 and * MotVltgIntglCmd_Volt_T_f32 are outputs of this function.</p>
<h2 id="local-function-2">Local function #2 </h2>
<table style="width:100%;">
<colgroup>
<col style="width: 19%" />
<col style="width: 46%" />
<col style="width: 11%" />
<col style="width: 11%" />
<col style="width: 11%" />
</colgroup>
<tbody>
<tr class="odd">
<td><strong>Function Name</strong></td>
<td>ErrorCalcQax</td>
<td>Type</td>
<td>Min</td>
<td>Max</td>
</tr>
<tr class="even">
<td><strong>Arguments Passed</strong></td>
<td>QaxCurrCmd_Ampr_T_f32</td>
<td>Float32</td>
<td>-200</td>
<td>200</td>
</tr>
<tr class="odd">
<td></td>
<td>QaxRplCmd_Ampr_T_f32</td>
<td>Float32</td>
<td>-29</td>
<td>29</td>
</tr>
<tr class="even">
<td></td>
<td>QaxCoggCmd_Ampr_T_f32</td>
<td>Float32</td>
<td>-6</td>
<td>6</td>
</tr>
<tr class="odd">
<td></td>
<td>QaxCurrModif_Ampr_T_f32</td>
<td>Float32</td>
<td>-200</td>
<td>200</td>
</tr>
<tr class="even">
<td></td>
<td>* QaxCmdFinal_Ampr_T_f32</td>
<td>Float32</td>
<td>-200</td>
<td>200</td>
</tr>
<tr class="odd">
<td><strong>Returns</strong></td>
<td>CmdErrQax_Ampr_T_f32</td>
<td>Float32</td>
<td>-200</td>
<td>400</td>
</tr>
</tbody>
</table>
<p>*QaxCmdFinal_Ampr_T_f32 is also an output of this function.</p>
<h2 id="local-function-3">Local function #3 </h2>
<table style="width:100%;">
<colgroup>
<col style="width: 19%" />
<col style="width: 46%" />
<col style="width: 11%" />
<col style="width: 11%" />
<col style="width: 11%" />
</colgroup>
<tbody>
<tr class="odd">
<td><strong>Function Name</strong></td>
<td>LoaScaFac</td>
<td>Type</td>
<td>Min</td>
<td>Max</td>
</tr>
<tr class="even">
<td><strong>Arguments Passed</strong></td>
<td>CurrLoaMtgtnEn_Cnt_T_logl</td>
<td>Boolean</td>
<td>FALSE</td>
<td>TRUE</td>
</tr>
<tr class="odd">
<td></td>
<td>IvtrLoaMtgtnEn_Cnt_T_logl</td>
<td>Boolean</td>
<td>FALSE</td>
<td>TRUE</td>
</tr>
<tr class="even">
<td></td>
<td>MotCtrlDualEcuMotCtrlMtgtnEna_Cnt_T_logl</td>
<td>Boolean</td>
<td>FALSE</td>
<td>TRUE</td>
</tr>
<tr class="odd">
<td></td>
<td>FetLoaMtgtnEna_Cnt_T_logl</td>
<td>Boolean</td>
<td>FALSE</td>
<td>TRUE</td>
</tr>
<tr class="even">
<td></td>
<td>*CurrLoaScaFac_Uls_T_f32</td>
<td>Float32</td>
<td>0</td>
<td>1</td>
</tr>
<tr class="odd">
<td></td>
<td>*IvtrLoaScaFac_Uls_T_f32</td>
<td>Float32</td>
<td>0</td>
<td>1</td>
</tr>
<tr class="even">
<td></td>
<td>*DualEcuScaFac_Uls_T_f32</td>
<td>Float32</td>
<td>0</td>
<td>1</td>
</tr>
<tr class="odd">
<td></td>
<td>*FetScaFac_Uls_T_f32</td>
<td>Float32</td>
<td>0.0F</td>
<td>1.0F</td>
</tr>
</tbody>
</table>
<p>*CurrLoaScaFac_Uls_T_f32, *IvtrLoaScaFac_Uls_T_f32, and *DualEcuScaFac_Uls_T_f32 are outputs of this function.</p>
<h2 id="local-function-4">Local function #4</h2>
<table style="width:100%;">
<colgroup>
<col style="width: 19%" />
<col style="width: 46%" />
<col style="width: 11%" />
<col style="width: 11%" />
<col style="width: 11%" />
</colgroup>
<tbody>
<tr class="odd">
<td><strong>Function Name</strong></td>
<td>MotCurr_Pred</td>
<td>Type</td>
<td>Min</td>
<td>Max</td>
</tr>
<tr class="even">
<td><strong>Arguments Passed</strong></td>
<td>MotInduQaxEstimdIvs_IvsHenry_T_f32</td>
<td>Float32</td>
<td>2240</td>
<td>33334</td>
</tr>
<tr class="odd">
<td></td>
<td>MotREstimd_Ohm_T_f32</td>
<td>Float32</td>
<td>0.005</td>
<td>0.12565</td>
</tr>
<tr class="even">
<td></td>
<td>CurrQax_Ampr_T_f32</td>
<td>Float32</td>
<td>-200</td>
<td>200</td>
</tr>
<tr class="odd">
<td></td>
<td>MotVltgQaxPrev_Volt_T_f32</td>
<td>Float32</td>
<td>-26.5</td>
<td>26.5</td>
</tr>
<tr class="even">
<td></td>
<td>CurrDax_Ampr_T_f32</td>
<td>Float32</td>
<td>-200</td>
<td>200</td>
</tr>
<tr class="odd">
<td></td>
<td>MotVltgDaxPrev_Volt_T_f32</td>
<td>Float32</td>
<td>-26.5</td>
<td>26.5</td>
</tr>
<tr class="even">
<td></td>
<td>MotBackEmfVltg_Volt_T_f32</td>
<td>Float32</td>
<td>-101.25</td>
<td>101.25</td>
</tr>
<tr class="odd">
<td></td>
<td>ReacncQax_Ohm_T_f32</td>
<td>Float32</td>
<td>-0.5</td>
<td>0.5</td>
</tr>
<tr class="even">
<td></td>
<td>ReacncDax_Ohm_T_f32</td>
<td>Float32</td>
<td>-0.5</td>
<td>0.5</td>
</tr>
<tr class="odd">
<td></td>
<td>MotInduDaxEstimdIvs_IvsHenry_T_f32</td>
<td>Float32</td>
<td>2240</td>
<td>33334</td>
</tr>
<tr class="even">
<td></td>
<td>MotCurrRegVltgLimrMotCurrPredEna_Cnt_T_f32</td>
<td>Boolean</td>
<td>FALSE</td>
<td>TRUE</td>
</tr>
<tr class="odd">
<td></td>
<td>MotCtrlCurrPredTi_NanoSec_T_f32</td>
<td>Float32</td>
<td>0</td>
<td>125000</td>
</tr>
<tr class="even">
<td></td>
<td>*MotCurrQaxPred_Ampr_T_f32</td>
<td>Float32</td>
<td>-200</td>
<td>200</td>
</tr>
<tr class="odd">
<td></td>
<td>*MotCurrDaxPred_Ampr_T_f32</td>
<td>Float32</td>
<td>-200</td>
<td>200</td>
</tr>
</tbody>
</table>
<p>*MotCurrQaxPred_Ampr_T_f32 and *MotCurrDaxPred_Ampr_T_f32 are outputs of this function.</p>
<h2 id="local-function-5">Local function #5</h2>
<table style="width:100%;">
<colgroup>
<col style="width: 19%" />
<col style="width: 46%" />
<col style="width: 11%" />
<col style="width: 11%" />
<col style="width: 11%" />
</colgroup>
<tbody>
<tr class="odd">
<td><strong>Function Name</strong></td>
<td>Decoder</td>
<td>Type</td>
<td>Min</td>
<td>Max</td>
</tr>
<tr class="even">
<td><strong>Arguments Passed</strong></td>
<td>MotAndThermProtnLoaMod_Cnt_T_u08</td>
<td>Uint8</td>
<td>OU</td>
<td>255U</td>
</tr>
<tr class="odd">
<td></td>
<td>CurrMeasLoaMtgtnEna_Cnt_T_logl</td>
<td>Boolean</td>
<td>FALSE</td>
<td>TRUE</td>
</tr>
<tr class="even">
<td></td>
<td>IvtrLoaMtgtnEna_Cnt_T_logl</td>
<td>Boolean</td>
<td>FALSE</td>
<td>TRUE</td>
</tr>
<tr class="odd">
<td></td>
<td>FetLoaMtgtnEna_Cnt_T_logl</td>
<td>Boolean</td>
<td>FALSE</td>
<td>TRUE</td>
</tr>
</tbody>
</table>
<p>* CurrMeasLoaMtgtnEna_Cnt_T_logl, *IvtrLoaMtgtnEna_Cnt_T_logl, *FetLoaMtgtnEna_Cnt_T_logl are outputs of this function.</p>
<h2 id="global-functionmacro-definitions">GLObAL Function/Macro Definitions</h2>
<p>None</p>
<h2 id="tranisition-functions">Tranisition FUNCTIONS </h2>
<p>None</p>
<h1 id="known-limitations-with-design">Known Limitations With Design</h1>
<p>None</p>
<h1 id="unit-test-consideration">UNIT TEST CONSIDERATION</h1>
<p>None</p>
<h1 id="appendix">Appendix</h1>
<p><em>None</em></p>
